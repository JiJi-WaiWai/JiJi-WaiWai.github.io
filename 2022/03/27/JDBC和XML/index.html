<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.css" integrity="sha256-no0c5ccDODBwp+9hSmV5VvPpKwHCpbVzXHexIkupM6U=" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.js" integrity="sha256-a5YRB27CcBwBFcT5EF/f3E4vzIqyHrSR878nseNYw64=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"jiji-waiwai.github.io","root":"/","images":"/images","scheme":"Gemini","version":"8.6.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"livere","storage":true,"lazyload":false,"nav":null,"activeClass":"livere"},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="一篇个人笔记，介绍了java怎么连接mysql数据库等知识。。">
<meta property="og:type" content="article">
<meta property="og:title" content="JDBC和XML">
<meta property="og:url" content="https://jiji-waiwai.github.io/2022/03/27/JDBC%E5%92%8CXML/index.html">
<meta property="og:site_name" content="De&#39;s Blog">
<meta property="og:description" content="一篇个人笔记，介绍了java怎么连接mysql数据库等知识。。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s1.ax1x.com/2022/03/27/q0CUNd.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/03/27/q0PcM6.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/03/27/q0PzJs.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/03/27/q0i4mT.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/03/27/q0AI78.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/04/09/LPFLgU.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/04/09/LPFxb9.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/04/09/LPku5t.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/04/09/LPkbdA.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/04/09/LPAYQO.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/04/09/LPABFI.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/04/09/LPEGAs.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/04/25/LIsre1.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/04/25/LIccF0.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/04/25/LI2Z8K.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/04/26/L7RS3t.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/04/26/L7WWWR.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/04/26/L7fQk4.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/04/26/L7f1h9.png">
<meta property="article:published_time" content="2022-03-27T05:03:32.000Z">
<meta property="article:modified_time" content="2022-06-24T08:52:17.616Z">
<meta property="article:author" content="唧唧歪歪">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s1.ax1x.com/2022/03/27/q0CUNd.png">


<link rel="canonical" href="https://jiji-waiwai.github.io/2022/03/27/JDBC%E5%92%8CXML/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://jiji-waiwai.github.io/2022/03/27/JDBC%E5%92%8CXML/","path":"2022/03/27/JDBC和XML/","title":"JDBC和XML"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>JDBC和XML | De's Blog</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>
  <a target="_blank" rel="noopener" href="https://GitHub.com/JiJi-WaiWai" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#FD6C6C; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">De's Blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#JDBC"><span class="nav-number">1.</span> <span class="nav-text">JDBC</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#JDBC%E5%BC%80%E5%8F%91"><span class="nav-number">1.1.</span> <span class="nav-text">JDBC开发</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JDBC%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="nav-number">1.2.</span> <span class="nav-text">JDBC工具类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A2%84%E5%A4%84%E7%90%86"><span class="nav-number">1.3.</span> <span class="nav-text">预处理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#sql%E6%B3%A8%E5%85%A5%E9%97%AE%E9%A2%98"><span class="nav-number">1.3.1.</span> <span class="nav-text">sql注入问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%84%E5%A4%84%E7%90%86%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.3.2.</span> <span class="nav-text">预处理对象</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JDBC%E6%8E%A7%E5%88%B6%E4%BA%8B%E5%8A%A1"><span class="nav-number">1.4.</span> <span class="nav-text">JDBC控制事务</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="nav-number">2.</span> <span class="nav-text">数据库连接池</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#DBCP%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="nav-number">2.1.</span> <span class="nav-text">DBCP连接池</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#C3P0%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="nav-number">2.2.</span> <span class="nav-text">C3P0连接池</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Druid%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="nav-number">2.3.</span> <span class="nav-text">Druid连接池</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DBUtils"><span class="nav-number">3.</span> <span class="nav-text">DBUtils</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A2%9E%E5%88%A0%E6%94%B9"><span class="nav-number">3.1.</span> <span class="nav-text">增删改</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5"><span class="nav-number">3.2.</span> <span class="nav-text">查</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%89%B9%E5%A4%84%E7%90%86"><span class="nav-number">4.</span> <span class="nav-text">批处理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%83%E6%95%B0%E6%8D%AE"><span class="nav-number">5.</span> <span class="nav-text">元数据</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8JDBC%E8%8E%B7%E5%8F%96%E5%85%83%E6%95%B0%E6%8D%AE"><span class="nav-number">5.1.</span> <span class="nav-text">使用JDBC获取元数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DatabaseMetaData"><span class="nav-number">5.2.</span> <span class="nav-text">DatabaseMetaData</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ResultSetMetaData"><span class="nav-number">5.3.</span> <span class="nav-text">ResultSetMetaData</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#XML"><span class="nav-number">6.</span> <span class="nav-text">XML</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95"><span class="nav-number">6.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#XML%E7%BA%A6%E6%9D%9F"><span class="nav-number">6.2.</span> <span class="nav-text">XML约束</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#DTD%E7%BA%A6%E6%9D%9F"><span class="nav-number">6.2.1.</span> <span class="nav-text">DTD约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Schema%E7%BA%A6%E6%9D%9F"><span class="nav-number">6.2.2.</span> <span class="nav-text">Schema约束</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#XML%E8%A7%A3%E6%9E%90"><span class="nav-number">6.3.</span> <span class="nav-text">XML解析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#DOM4J%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">6.3.1.</span> <span class="nav-text">DOM4J的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#xpath%E8%AF%BB%E5%8F%96xml"><span class="nav-number">6.3.2.</span> <span class="nav-text">xpath读取xml</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JDBC%E8%87%AA%E5%AE%9A%E4%B9%89XML"><span class="nav-number">6.4.</span> <span class="nav-text">JDBC自定义XML</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B"><span class="nav-number">7.</span> <span class="nav-text">综合案例</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%95%86%E5%9F%8E%E6%A1%88%E4%BE%8B%E8%A1%A8%E8%AE%BE%E8%AE%A1"><span class="nav-number">7.1.</span> <span class="nav-text">商城案例表设计</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="nav-number">7.2.</span> <span class="nav-text">环境搭建</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JavaBean%E7%B1%BB%E5%88%9B%E5%BB%BA"><span class="nav-number">7.3.</span> <span class="nav-text">JavaBean类创建</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-%E8%AE%BE%E8%AE%A1%E7%94%A8%E6%88%B7%E4%B8%8E%E8%AE%A2%E5%8D%95"><span class="nav-number">7.3.1.</span> <span class="nav-text">3.1 设计用户与订单</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-1-%E4%B8%80%E5%AF%B9%E5%A4%9A%E5%85%B3%E7%B3%BB%E5%88%86%E6%9E%90"><span class="nav-number">7.3.1.1.</span> <span class="nav-text">3.1.1 一对多关系分析</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-2-User%E7%B1%BB"><span class="nav-number">7.3.1.2.</span> <span class="nav-text">3.1.2 User类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-3-Orders%E7%B1%BB"><span class="nav-number">7.3.1.3.</span> <span class="nav-text">3.1.3 Orders类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-4-Orders%E7%B1%BB%E8%AE%BE%E8%AE%A1%E5%88%86%E6%9E%90"><span class="nav-number">7.3.1.4.</span> <span class="nav-text">3.1.4 Orders类设计分析</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-4-%E4%BF%AE%E6%94%B9Orders%E7%B1%BB"><span class="nav-number">7.3.1.5.</span> <span class="nav-text">3.1.4 修改Orders类</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-%E8%AE%BE%E8%AE%A1%E5%95%86%E5%93%81%E4%B8%8E%E5%88%86%E7%B1%BB"><span class="nav-number">7.3.2.</span> <span class="nav-text">3.2 设计商品与分类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-1-Category%E7%B1%BB"><span class="nav-number">7.3.2.1.</span> <span class="nav-text">3.2.1 Category类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-2-Product%E7%B1%BB"><span class="nav-number">7.3.2.2.</span> <span class="nav-text">3.2.2 Product类</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-%E8%AE%BE%E8%AE%A1%E8%AE%A2%E5%8D%95%E9%A1%B9"><span class="nav-number">7.3.3.</span> <span class="nav-text">3.3 设计订单项</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-1-%E5%A4%9A%E5%AF%B9%E5%A4%9A%E5%85%B3%E7%B3%BB%E5%88%86%E6%9E%90"><span class="nav-number">7.3.3.1.</span> <span class="nav-text">3.3.1 多对多关系分析</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-2-%E5%88%9B%E5%BB%BAOrderItem"><span class="nav-number">7.3.3.2.</span> <span class="nav-text">3.3.2 创建OrderItem</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E7%BC%96%E5%86%99DAO%E7%B1%BB"><span class="nav-number">7.4.</span> <span class="nav-text">4.编写DAO类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-UserDao"><span class="nav-number">7.4.1.</span> <span class="nav-text">4.1 UserDao</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-1-%E7%BC%96%E5%86%99UserDao"><span class="nav-number">7.4.1.1.</span> <span class="nav-text">4.1.1 编写UserDao</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-2-%E6%B5%8B%E8%AF%95%E6%B3%A8%E5%86%8C%E4%B8%8E%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD"><span class="nav-number">7.4.1.2.</span> <span class="nav-text">4.1.2 测试注册与登录功能</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-ProductDao"><span class="nav-number">7.4.2.</span> <span class="nav-text">4.2 ProductDao</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-1-%E7%BC%96%E5%86%99-ProductDao"><span class="nav-number">7.4.2.1.</span> <span class="nav-text">4.2.1 编写 ProductDao</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-2-%E6%B5%8B%E8%AF%95-ProductDao"><span class="nav-number">7.4.2.2.</span> <span class="nav-text">4.2.2 测试 ProductDao</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-OrdersDao"><span class="nav-number">7.4.3.</span> <span class="nav-text">4.3 OrdersDao</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-3-1-%E5%A4%9A%E5%AF%B9%E4%B8%80%E5%88%86%E6%9E%90"><span class="nav-number">7.4.3.1.</span> <span class="nav-text">4.3.1 多对一分析</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-3-2-%E5%88%9B%E5%BB%BAOrdersDao"><span class="nav-number">7.4.3.2.</span> <span class="nav-text">4.3.2 创建OrdersDao</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-3-3-%E6%B5%8B%E8%AF%95OrdersDao"><span class="nav-number">7.4.3.3.</span> <span class="nav-text">4.3.3 测试OrdersDao</span></a></li></ol></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="唧唧歪歪"
      src="/images/1.jpg">
  <p class="site-author-name" itemprop="name">唧唧歪歪</p>
  <div class="site-description" itemprop="description">踏上新征程----go！！！</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">21</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">29</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/JiJi-WaiWai" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;JiJi-WaiWai" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:1753645532@qq.com" title="E-Mail → mailto:1753645532@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://tool.gljlw.com/qq/?qq=1753645532" title="http:&#x2F;&#x2F;tool.gljlw.com&#x2F;qq&#x2F;?qq&#x3D;1753645532" rel="noopener" target="_blank">加qq</a>
        </li>
    </ul>
  </div>

          </div>
        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jiji-waiwai.github.io/2022/03/27/JDBC%E5%92%8CXML/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/1.jpg">
      <meta itemprop="name" content="唧唧歪歪">
      <meta itemprop="description" content="踏上新征程----go！！！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="De's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          JDBC和XML
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-03-27 13:03:32" itemprop="dateCreated datePublished" datetime="2022-03-27T13:03:32+08:00">2022-03-27</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-06-24 16:52:17" itemprop="dateModified" datetime="2022-06-24T16:52:17+08:00">2022-06-24</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>一篇个人笔记，介绍了java怎么连接mysql数据库等知识。。</p>
<span id="more"></span>

<h1 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h1><p><strong>概念</strong></p>
<p>JDBC(Java Data Base Connectivity) 是 Java 访问数据库的标准规范.是一种用于执行SQL语句的Java API，可以为<br>多种关系数据库提供统一访问，它由一组用Java语言编写的类和接口组成。是Java访问数据库的标准规范.</p>
<p><strong>原理</strong></p>
<p> JDBC是接口，驱动是接口的实现，没有驱动将无法完成数据库连接，从而不能操作数据库！每个数据库厂商都需<br>要提供自己的驱动，用来连接自己公司的数据库，也就是说驱动一般都由数据库生成厂商提供。</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/q0CUNd"><img src="https://s1.ax1x.com/2022/03/27/q0CUNd.png" alt="q0CUNd.png"></a></p>
<p><strong>总结</strong></p>
<p> JDBC就是由sun公司定义的一套操作所有关系型数据库的规则(接口)，而数据库厂商需要实现这套接口,提供数据库<br>驱动jar包, 我们可以使用这套接口编程,真正执行的代码是对应驱动包中的实现类。</p>
<h2 id="JDBC开发"><a href="#JDBC开发" class="headerlink" title="JDBC开发"></a>JDBC开发</h2><p>1，将MySQL驱动包添加到jar包库文件夹中，Myjar文件夹,用于存放当前项目需要的所有jar包<br>包：mysql-connector-java-5.1.37-bin.jar</p>
<p>2，在 idea中 配置jar包库的位置</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/q0PcM6"><img src="https://s1.ax1x.com/2022/03/27/q0PcM6.png" alt="q0PcM6.png"></a></p>
<p>3，项目中, 配置jar包库</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/q0PzJs"><img src="https://s1.ax1x.com/2022/03/27/q0PzJs.png" alt="q0PzJs.png"></a></p>
<p><strong>流程</strong></p>
<p><strong>1，注册驱动（可省略）</strong></p>
<p>JDBC规范定义驱动接口： java.sql.Driver<br>MySql驱动包提供了实现类： com.mysql.jdbc.Driver</p>
<table>
<thead>
<tr>
<th>加载注册驱动的方式</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>Class.forName(数据库驱动实现类)</td>
<td>加载和注册数据库驱动,数据库驱动由数据库厂商MySql提供   “com.mysql.jdbc.Driver”</td>
</tr>
</tbody></table>
<p>代码：Class.forName(“com.mysql.jdbc.Driver”);</p>
<p><strong>2，获取连接</strong></p>
<p>Connection 接口，代表一个连接对象 ,具体的实现类由数据库的厂商实现<br>使用 DriverManager类的静态方法,getConnection可以获取数据库的连接</p>
<table>
<thead>
<tr>
<th>DriverManager类的静态方法获取连接</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Connection  getConnection(String url, String user, String password)</td>
<td>通过连接字符串和用户名,密码来获取数据库连接对象</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>连接参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>user</td>
<td>登录用户名</td>
</tr>
<tr>
<td>password</td>
<td>登录密码</td>
</tr>
<tr>
<td>url</td>
<td>mySql  URL的格式   jdbc:mysql://localhost:3306/db4?characterEncoding=UTF-8</td>
</tr>
</tbody></table>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/q0i4mT"><img src="https://s1.ax1x.com/2022/03/27/q0i4mT.png" alt="q0i4mT.png"></a></p>
<p><strong>3，获取语句执行平台Statement</strong></p>
<p>通过Connection 的 createStatement方法 获取sql语句执行对象</p>
<table>
<thead>
<tr>
<th>Connection接口中的方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Statement createStatement()</td>
<td>创建  SQL语句执行对象</td>
</tr>
</tbody></table>
<p><strong>4， 利用语句执行平台Statement，执行语句</strong></p>
<table>
<thead>
<tr>
<th>Statement类 常用方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>int executeUpdate(String sql);</td>
<td>执行insert  update delete语句.返回int类型,代表受影响的行  数</td>
</tr>
<tr>
<td>ResultSet executeQuery(String sql);</td>
<td>执行select语句, 返回ResultSet结果集对象</td>
</tr>
</tbody></table>
<p><strong>5，如果是查询语句，需要对ResultSet结果集处理</strong></p>
<table>
<thead>
<tr>
<th>ResultSet接口方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>boolean next()</td>
<td>1) 游标向下一行   2) 返回 boolean 类型，如果还有下一条记录，返回  true，否则返回 false</td>
</tr>
<tr>
<td>xxx getXxx( String or int)</td>
<td>1) 通过列名，参数是 String 类型。返回不同的类型   2) 通过列号，参数是整数，从 1 开始。返回不同的类型</td>
</tr>
</tbody></table>
<p><strong>6，关闭资源</strong></p>
<p>先开的后关，后开的先关。ResultSet ==&gt; Statement ==&gt; Connection</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    Connection con = <span class="keyword">null</span>;</span><br><span class="line">    Statement statement = <span class="keyword">null</span>;</span><br><span class="line">    ResultSet result = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1，注册驱动（可省略）</span></span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2，获取连接</span></span><br><span class="line">        String s = <span class="string">&quot;jdbc:mysql://localhost:3306/de?characterEncoding=UTF-8&quot;</span>;</span><br><span class="line">        con = DriverManager.getConnection(s, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;root&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3，获取语句执行平台Statement</span></span><br><span class="line">        statement = con.createStatement();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4，通过Statement执行增删改sql语句</span></span><br><span class="line">        String sql = <span class="string">&quot;update account set userName = &#x27;小李&#x27; where id = 1&quot;</span>;</span><br><span class="line">        <span class="keyword">int</span> ia = statement.executeUpdate(sql);</span><br><span class="line">        System.out.println(<span class="string">&quot;受影响的行数：&quot;</span> + ia);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5,通过Statement执行查询sql语句，返回结果集ResultSet</span></span><br><span class="line">        sql = <span class="string">&quot;select * from account&quot;</span>;</span><br><span class="line">        result = statement.executeQuery(sql);</span><br><span class="line">        <span class="comment">//处理ResultSet结果集对象</span></span><br><span class="line">        <span class="keyword">while</span>(result.next())&#123;</span><br><span class="line">            <span class="keyword">int</span> id = result.getInt(<span class="string">&quot;id&quot;</span>);     <span class="comment">//参数为字符串，表示字段名称</span></span><br><span class="line">            String bankNo = result.getString(<span class="string">&quot;bankNo&quot;</span>);</span><br><span class="line">            String userName = result.getString(<span class="number">3</span>);  <span class="comment">//参数为数字，表示字段号</span></span><br><span class="line">            <span class="keyword">int</span> money = result.getInt(<span class="number">4</span>);</span><br><span class="line">            System.out.println(id + <span class="string">&quot;:&quot;</span> + bankNo + <span class="string">&quot;:&quot;</span> + userName + <span class="string">&quot;:&quot;</span> + money);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (ClassNotFoundException | SQLException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//6，关闭资源</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            result.close();</span><br><span class="line">            statement.close();</span><br><span class="line">            con.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>步骤总结</strong></p>
<ol>
<li>   获取驱动(可以省略)</li>
<li>   获取连接</li>
<li>   获取Statement对象</li>
<li>   Statement对象执行sql</li>
<li>   处理结果集(只在查询时处理)</li>
<li>   释放资源</li>
</ol>
<h2 id="JDBC工具类"><a href="#JDBC工具类" class="headerlink" title="JDBC工具类"></a>JDBC工具类</h2><p>如果一个功能经常要用到，我们建议把这个功能做成一个工具类，可以在不同的地方重用。</p>
<p>“获得数据库连接”操作，将在以后的增删改查所有功能中都存在，可以封装工具类JDBCUtils。提供获取连接对象的方法，从而达到代码的重复利用。</p>
<p>工具类包含的内容</p>
<ol>
<li>   可以把几个字符串定义成常量：用户名，密码，URL，驱动类 </li>
<li>   得到数据库的连接：getConnection() </li>
<li>   关闭所有打开的资源：close()，如下</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.Utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*    JDBC的工具类</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1. 定义字符串常量, 记录获取连接所需要的信息</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DRIVERNAME = <span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String URL = <span class="string">&quot;jdbc:mysql://localhost:3306/de?characterEncoding=UTF-8&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String USER = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String PWD = <span class="string">&quot;root&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2，注册驱动，static代码块随着类的加载而加载</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(DRIVERNAME);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取连接</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Connection con = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            con = DriverManager.getConnection(URL, USER, PWD);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> con;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//关闭资源1</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Connection con, Statement statement)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            statement.close();</span><br><span class="line">            con.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//关闭资源2</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Connection con, Statement statement, ResultSet result)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            result.close();</span><br><span class="line">            statement.close();</span><br><span class="line">            con.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">测试JDBC工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCUtilsTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 增删改操作</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@Test</span>  <span class="comment">//@Test标注，可以直接执行该方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateTest</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取连接</span></span><br><span class="line">        Connection con = JDBCUtils.getConnection();</span><br><span class="line">        <span class="comment">//获取Statement</span></span><br><span class="line">        Statement statement = con.createStatement();</span><br><span class="line">        <span class="comment">//Statement执行sql</span></span><br><span class="line">        String sql = <span class="string">&quot;insert into account values (null, &#x27;555&#x27;, &#x27;老丁&#x27;, 1000)&quot;</span>;</span><br><span class="line">        <span class="keyword">int</span> ia = statement.executeUpdate(sql);</span><br><span class="line">        System.out.println(<span class="string">&quot;受影响的行数：&quot;</span> + ia);</span><br><span class="line">        <span class="comment">//关闭资源</span></span><br><span class="line">        JDBCUtils.close(con, statement);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 查询操作</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">queryTest</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取连接</span></span><br><span class="line">        Connection con = JDBCUtils.getConnection();</span><br><span class="line">        <span class="comment">//获取Statement</span></span><br><span class="line">        Statement statement = con.createStatement();</span><br><span class="line">        <span class="comment">//执行sql</span></span><br><span class="line">        String sql = <span class="string">&quot;select * from account&quot;</span>;</span><br><span class="line">        ResultSet result = statement.executeQuery(sql);</span><br><span class="line">        <span class="comment">//处理结果集ResultSet</span></span><br><span class="line">        <span class="keyword">while</span>(result.next())&#123;</span><br><span class="line">            <span class="keyword">int</span> id = result.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">            String bankNo = result.getString(<span class="string">&quot;bankNo&quot;</span>);</span><br><span class="line">            String userName = result.getString(<span class="number">3</span>);</span><br><span class="line">            <span class="keyword">int</span> money = result.getInt(<span class="number">4</span>);</span><br><span class="line">            System.out.println(id + <span class="string">&quot;:&quot;</span> + bankNo + <span class="string">&quot;:&quot;</span> + userName + <span class="string">&quot;:&quot;</span> + money);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//关闭资源</span></span><br><span class="line">        JDBCUtils.close(con, statement, result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="预处理"><a href="#预处理" class="headerlink" title="预处理"></a>预处理</h2><h3 id="sql注入问题"><a href="#sql注入问题" class="headerlink" title="sql注入问题"></a>sql注入问题</h3><p>假设查询用户名tom和密码123</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> jdbc_user <span class="keyword">WHERE</span> username <span class="operator">=</span> <span class="string">&#x27;tom&#x27;</span> <span class="keyword">AND</span> PASSWORD <span class="operator">=</span> <span class="string">&#x27;123&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>用户名和密码都匹配才能查询到该用户的信息，假如代码如下</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> jdbc_user <span class="keyword">WHERE</span> username <span class="operator">=</span> <span class="string">&#x27;随便填&#x27;</span> <span class="keyword">AND</span> PASSWORD <span class="operator">=</span> <span class="string">&#x27;随便填&#x27;</span> <span class="keyword">OR</span> <span class="string">&#x27;1&#x27;</span> <span class="operator">=</span> <span class="string">&#x27;1&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>这样，一定能查询出结果。</p>
<p>如果这是一个登陆操作,那么用户就登陆成功了.显然这不是我们想要看到的结果</p>
<p><strong>sql注入问题案例</strong></p>
<p>需求：用户在控制台上输入用户名和卡号, 然后使用 Statement 字符串拼接的方式 实现用户的登录。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取连接</span></span><br><span class="line">    Connection con = JDBCUtils.getConnection();</span><br><span class="line">    <span class="comment">//获取Statement</span></span><br><span class="line">    Statement statement = con.createStatement();</span><br><span class="line">    <span class="comment">//输入用户名，卡号</span></span><br><span class="line">    System.out.println(<span class="string">&quot;请输入用户名：&quot;</span>);</span><br><span class="line">    Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">    String user = sc.nextLine();</span><br><span class="line">    System.out.println(<span class="string">&quot;请输入卡号：&quot;</span>);    <span class="comment">//1&#x27; or &#x27;1&#x27; = &#x27;1</span></span><br><span class="line">    String bankNo = sc.nextLine();</span><br><span class="line">    <span class="comment">//sql语句由字符串拼接而成，会引发注入问题</span></span><br><span class="line">    String sql = <span class="string">&quot;select * from account where userName = &#x27;&quot;</span> + user + <span class="string">&quot;&#x27; and bankNo = &#x27;&quot;</span> + bankNo + <span class="string">&quot;&#x27;&quot;</span>;</span><br><span class="line">    ResultSet result = statement.executeQuery(sql);</span><br><span class="line">    <span class="comment">//能否查询到</span></span><br><span class="line">    <span class="keyword">if</span>(result.next())&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;登入成功！欢迎使用&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;登入失败！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//关闭资源</span></span><br><span class="line">    JDBCUtils.close(con, statement, result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行程序，输入正确的用户名和卡号，能登入，错误的不能登入。但是用户名随便输入，卡号输入：1’ or ‘1’ = ‘1，依旧能成功登入。因为改变了原来sql的意思。</p>
<h3 id="预处理对象"><a href="#预处理对象" class="headerlink" title="预处理对象"></a>预处理对象</h3><p><strong>PreparedStatement 接口介绍</strong></p>
<ul>
<li>PreparedStatement 是 Statement 接口的子接口，继承于父接口中所有的方法。它是一个预编译的 SQL 语句对象.</li>
<li>预编译:  是指SQL 语句被预编译,并存储在 PreparedStatement 对象中。然后可以使用此对象多次高效地执行该语句</li>
</ul>
<p><strong>PreparedStatement特点</strong></p>
<p>因为有预先编译的功能，提高 SQL 的执行效率。可以有效的防止 SQL 注入的问题，安全性更高</p>
<p><strong>获取PrepareStatement对象</strong></p>
<table>
<thead>
<tr>
<th>Connection  接口中的方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>PreparedStatement  prepareStatement(String sql)</td>
<td>指定预编译的  SQL 语句，   SQL 语句中使用占位符 ? 创建一个语句对象</td>
</tr>
</tbody></table>
<p> <strong>PreparedStatement接口常用方法</strong></p>
<p>设置sql里”?“占位符的值</p>
<table>
<thead>
<tr>
<th>setXxx重载方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>void setDouble(int parameterIndex, double x)</td>
<td>将指定参数设置为给定  Java double 值。</td>
</tr>
<tr>
<td>void setInt(int parameterIndex, int x)</td>
<td>将指定参数设置为给定  Java int 值。</td>
</tr>
<tr>
<td>void setString(int parameterIndex, String x)</td>
<td>将指定参数设置为给定  Java String 值。</td>
</tr>
<tr>
<td>void setObject(int parameterIndex, Object x)</td>
<td>使用给定对象设置指定参数的值。</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>常用方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>int executeUpdate();</td>
<td>执行insert  update delete语句.</td>
</tr>
<tr>
<td>ResultSet executeQuery();</td>
<td>执行select语句. 返回结果集对象  Resulet</td>
</tr>
</tbody></table>
<p>根据上面有sql注入问题的代码进行修改</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取连接</span></span><br><span class="line">    Connection con = JDBCUtils.getConnection();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//获取prepareStatement, ?表示占位符，预输入避免注入问题</span></span><br><span class="line">    String sql = <span class="string">&quot;select * from account where userName = ? and bankNo = ?&quot;</span>;</span><br><span class="line">    PreparedStatement ps = con.prepareStatement(sql);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//输入用户名，卡号</span></span><br><span class="line">    System.out.println(<span class="string">&quot;请输入用户名：&quot;</span>);</span><br><span class="line">    Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">    String user = sc.nextLine();</span><br><span class="line">    System.out.println(<span class="string">&quot;请输入卡号：&quot;</span>);</span><br><span class="line">    String bankNo = sc.nextLine();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//设置占位符的值</span></span><br><span class="line">    ps.setString(<span class="number">1</span>, user);</span><br><span class="line">    ps.setString(<span class="number">2</span>, bankNo);</span><br><span class="line">    <span class="comment">//执行sql</span></span><br><span class="line">    ResultSet result = ps.executeQuery();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//能否查询到</span></span><br><span class="line">    <span class="keyword">if</span>(result.next())&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;登入成功！欢迎使用&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;登入失败！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//关闭资源</span></span><br><span class="line">    JDBCUtils.close(con, ps, result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>原理</strong></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/q0AI78"><img src="https://s1.ax1x.com/2022/03/27/q0AI78.png" alt="q0AI78.png"></a></p>
<p><strong>区别</strong></p>
<p>1，Statement用于执行静态SQL语句，在执行时，必须指定一个事先准备好的SQL语句。</p>
<p>2，PrepareStatement是预编译的SQL语句对象，语句中可以包含动态参数“?”，在执行时可以为“?”动态设置参数值。</p>
<p>3，PrepareStatement可以减少编译次数提高数据库性能</p>
<h2 id="JDBC控制事务"><a href="#JDBC控制事务" class="headerlink" title="JDBC控制事务"></a>JDBC控制事务</h2><p>Connection中的方法实现事务管理</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>void setAutoCommit(boolean autoCommit)</td>
<td>参数是  true 或 false  如果设置为 false，表示关闭自动提交，相当于开启事务</td>
</tr>
<tr>
<td>void commit()</td>
<td>提交事务</td>
</tr>
<tr>
<td>void rollback()</td>
<td>回滚事务</td>
</tr>
</tbody></table>
<p><strong>步骤</strong></p>
<ol>
<li>   获取连接 </li>
<li>   开启事务 </li>
<li>   获取到 PreparedStatement , 执行两次更新操作 </li>
<li>   正常情况下提交事务 </li>
<li>   出现异常回滚事务 </li>
<li>   最后关闭资源 </li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    Connection con = <span class="keyword">null</span>;</span><br><span class="line">    PreparedStatement ps = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//获取连接</span></span><br><span class="line">        con = JDBCUtils.getConnection();</span><br><span class="line">        <span class="comment">//开启事务</span></span><br><span class="line">        con.setAutoCommit(<span class="keyword">false</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//转账1：小李-500</span></span><br><span class="line">        ps = con.prepareStatement(<span class="string">&quot;update account set money=money-? where userName=?&quot;</span>);</span><br><span class="line">        ps.setInt(<span class="number">1</span>,<span class="number">500</span>);</span><br><span class="line">        ps.setString(<span class="number">2</span>, <span class="string">&quot;小李&quot;</span>);</span><br><span class="line">        ps.executeUpdate();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//假设异常</span></span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//转账2：老丁+500</span></span><br><span class="line">        ps = con.prepareStatement(<span class="string">&quot;update account set money=money+? where userName=?&quot;</span>);</span><br><span class="line">        ps.setInt(<span class="number">1</span>, <span class="number">500</span>);</span><br><span class="line">        ps.setString(<span class="number">2</span>, <span class="string">&quot;老丁&quot;</span>);</span><br><span class="line">        ps.executeUpdate();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//提交事务</span></span><br><span class="line">        con.commit();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="comment">//出现异常，回滚事务</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            con.rollback();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException ex) &#123;</span><br><span class="line">            ex.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//关闭资源</span></span><br><span class="line">        JDBCUtils.close(con, ps);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="数据库连接池"><a href="#数据库连接池" class="headerlink" title="数据库连接池"></a>数据库连接池</h1><p>实际开发中“获得连接”或“释放资源”是非常消耗系统资源的两个过程，为了解决此类性能问题，通常情况我们<br>采用连接池技术，来共享连接Connection。这样我们就不需要每次都创建连接、释放连接了，这些操作都交<br>给了连接池.</p>
<p>优点：用池来管理Connection，这样可以重复使用Connection。 当使用完Connection后，调用Connection的<br>close()方法也不会真的关闭Connection，而是把Connection“归还”给池。</p>
<p>区别：</p>
<p>JDBC方式</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/LPFLgU"><img src="https://s1.ax1x.com/2022/04/09/LPFLgU.png" alt="LPFLgU.png"></a></p>
<p>连接池方式</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/LPFxb9"><img src="https://s1.ax1x.com/2022/04/09/LPFxb9.png" alt="LPFxb9.png"></a></p>
<p>Java为数据库连接池提供了公共的接口：<strong>javax.sql.DataSource</strong>，各个厂商需要让自己的连接池实现这个接口。</p>
<p>这样应用程序可以方便的切换不同厂商的连接池！</p>
<p>常见的连接池有 DBCP连接池, C3P0连接池, Druid连接池。</p>
<h2 id="DBCP连接池"><a href="#DBCP连接池" class="headerlink" title="DBCP连接池"></a>DBCP连接池</h2><p> DBCP也是一个开源的连接池，是Apache成员之一，在企业开发中也比较常见，tomcat内置的连接池。</p>
<p><strong>创建项目，导入jar包</strong></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/LPku5t"><img src="https://s1.ax1x.com/2022/04/09/LPku5t.png" alt="LPku5t.png"></a></p>
<p><strong>编写工具类</strong></p>
<p>Java中提供了一个连接池的规则接口 ： DataSource , 它是java中提供的连接池</p>
<p>在DBCP包中提供了DataSource接口的实现类，我们要用的具体的连接池 BasicDataSource 类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*  DBCP数据库连接池的工具类</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBCPUtils</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1.定义常量 保存数据库连接的相关信息</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DRIVERNAME = <span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String URL = <span class="string">&quot;jdbc:mysql://localhost:3306/de?characterEncoding=UTF-8&amp;rewriteBatchedStatements=true&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String USER = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String PWD = <span class="string">&quot;root&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.创建连接池对象 (有DBCP提供的实现类)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BasicDataSource dataSource = <span class="keyword">new</span> BasicDataSource();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.使用静态代码块进行配置</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        dataSource.setDriverClassName(DRIVERNAME);</span><br><span class="line">        dataSource.setUrl(URL);</span><br><span class="line">        dataSource.setUsername(USER);</span><br><span class="line">        dataSource.setPassword(PWD);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4.获取连接的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dataSource.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//5.释放资源方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Connection con, Statement statement)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            statement.close();</span><br><span class="line">            con.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Connection con, Statement statement, ResultSet result)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            result.close();</span><br><span class="line">            statement.close();</span><br><span class="line">            con.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取连接池对象的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DataSource <span class="title">getDataSources</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dataSource;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取连接</span></span><br><span class="line">    Connection con = DBCPUtils.getConnection();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取Statement,并执行sql</span></span><br><span class="line">    PreparedStatement ps = con.prepareStatement(<span class="string">&quot;select * from account where id = ?&quot;</span>);</span><br><span class="line">    ps.setInt(<span class="number">1</span>,<span class="number">4</span>);</span><br><span class="line">    ResultSet resultSet = ps.executeQuery();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//处理结果集</span></span><br><span class="line">    <span class="keyword">while</span>(resultSet.next())&#123;</span><br><span class="line">        String userName = resultSet.getString(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">        System.out.println(userName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//关闭资源</span></span><br><span class="line">    DBCPUtils.close(con, ps, resultSet);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>常见的配置项</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>driverClassName</td>
<td>数据库驱动名称</td>
</tr>
<tr>
<td>url</td>
<td>数据库地址</td>
</tr>
<tr>
<td>username</td>
<td>用户名</td>
</tr>
<tr>
<td>password</td>
<td>密码</td>
</tr>
<tr>
<td>maxActive</td>
<td>最大连接数量</td>
</tr>
<tr>
<td>maxIdle</td>
<td>最大空闲连接</td>
</tr>
<tr>
<td>minIdle</td>
<td>最小空闲连接</td>
</tr>
<tr>
<td>initialSize</td>
<td>初始化连接</td>
</tr>
</tbody></table>
<h2 id="C3P0连接池"><a href="#C3P0连接池" class="headerlink" title="C3P0连接池"></a>C3P0连接池</h2><p>C3P0是一个开源的JDBC连接池,支持JDBC3规范和JDBC2的标准扩展。目前使用它的开源项目有Hibernate、Spring等。</p>
<p><strong>导入jar包</strong></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/LPkbdA"><img src="https://s1.ax1x.com/2022/04/09/LPkbdA.png" alt="LPkbdA.png"></a></p>
<p><strong>导入配置文件 c3p0-confifig.xml</strong></p>
<p>c3p0-config.xml 文件名不可更改</p>
<p>直接放到src下,也可以放到到资源文件夹中，这里我们 在项目下创建一个resource文件夹(专门存放资源文件)，选择文件夹,右键 将resource文件夹指定为资源文件夹，将文件放在resource目录下即可,创建连接池对象的时候会去加载这个配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">c3p0-config</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!--默认配置--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">default-config</span>&gt;</span>  </span><br><span class="line">	</span><br><span class="line">		<span class="comment">&lt;!-- initialPoolSize：初始化时获取三个连接，</span></span><br><span class="line"><span class="comment">			  取值应在minPoolSize与maxPoolSize之间。 --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;initialPoolSize&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">property</span>&gt;</span>  </span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- maxIdleTime：最大空闲时间,60秒内未使用则连接被丢弃。若为0则永不丢弃。--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxIdleTime&quot;</span>&gt;</span>60<span class="tag">&lt;/<span class="name">property</span>&gt;</span>  </span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- maxPoolSize：连接池中保留的最大连接数 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxPoolSize&quot;</span>&gt;</span>100<span class="tag">&lt;/<span class="name">property</span>&gt;</span>  </span><br><span class="line">		<span class="comment">&lt;!-- minPoolSize: 连接池中保留的最小连接数 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;minPoolSize&quot;</span>&gt;</span>10<span class="tag">&lt;/<span class="name">property</span>&gt;</span>  </span><br><span class="line">		</span><br><span class="line">    <span class="tag">&lt;/<span class="name">default-config</span>&gt;</span>  </span><br><span class="line">  </span><br><span class="line">   <span class="comment">&lt;!--配置连接池mysql--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">named-config</span> <span class="attr">name</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span>&gt;</span>jdbc:mysql://localhost:3306/de?characterEncoding=UTF-8<span class="symbol">&amp;amp;</span>rewriteBatchedStatements=true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;initialPoolSize&quot;</span>&gt;</span>10<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxIdleTime&quot;</span>&gt;</span>30<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxPoolSize&quot;</span>&gt;</span>100<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;minPoolSize&quot;</span>&gt;</span>10<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">named-config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置连接池2,可以配置多个--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">c3p0-config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>编写C3P0工具类</strong></p>
<p>C3P0提供的核心工具类ComboPooledDataSource , 如果想使用连接池,就必须创建该类的对象</p>
<p>new ComboPooledDataSource(); 使用 默认配置<br>new ComboPooledDataSource(“mysql”); 使用命名配置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">C3P0Utils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1.创建连接池对象 C3P0对DataSource接口的实现类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ComboPooledDataSource dataSource = <span class="keyword">new</span> ComboPooledDataSource(<span class="string">&quot;mysql&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取连接的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dataSource.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//释放资源</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Connection con, Statement statement)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            statement.close();</span><br><span class="line">            con.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Connection con, Statement statement, ResultSet resultSet)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            resultSet.close();</span><br><span class="line">            statement.close();</span><br><span class="line">            con.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取连接池对象的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DataSource <span class="title">getDataSources</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dataSource;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取连接</span></span><br><span class="line">    Connection con = C3P0Utils.getConnection();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取Statement,并执行sql</span></span><br><span class="line">    PreparedStatement ps = con.prepareStatement(<span class="string">&quot;select * from account where id = ?&quot;</span>);</span><br><span class="line">    ps.setInt(<span class="number">1</span>,<span class="number">4</span>);</span><br><span class="line">    ResultSet resultSet = ps.executeQuery();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//处理结果集</span></span><br><span class="line">    <span class="keyword">while</span>(resultSet.next())&#123;</span><br><span class="line">        String userName = resultSet.getString(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">        System.out.println(userName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//关闭资源</span></span><br><span class="line">    C3P0Utils.close(con, ps, resultSet);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>常见配置</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/LPAYQO"><img src="https://s1.ax1x.com/2022/04/09/LPAYQO.png" alt="LPAYQO.png"></a></p>
<h2 id="Druid连接池"><a href="#Druid连接池" class="headerlink" title="Druid连接池"></a>Druid连接池</h2><p> Druid（德鲁伊）是阿里巴巴开发的号称为监控而生的数据库连接池，Druid是目前最好的数据库连接池。在功<br>能、性能、扩展性方面，都超过其他数据库连接池，同时加入了日志监控，可以很好的监控DB池连接和SQL的执行<br>情况。</p>
<p><strong>导入jar包</strong></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/LPABFI"><img src="https://s1.ax1x.com/2022/04/09/LPABFI.png" alt="LPABFI.png"></a></p>
<p><strong>导入配置文件</strong></p>
<p>是properties形式的<br>可以叫任意名称，可以放在任意目录下,我们统一放到 resources资源目录</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driverClassName</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/de?characterEncoding=UTF-8&amp;rewriteBatchedStatements=true</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">initialSize</span>=<span class="string">5</span></span><br><span class="line"><span class="attr">maxActive</span>=<span class="string">10</span></span><br><span class="line"><span class="attr">maxWait</span>=<span class="string">3000</span></span><br></pre></td></tr></table></figure>

<p><strong>编写Druid工具类</strong></p>
<p>获取数据库连接池对象：</p>
<p>​        通过工厂类来获取, DruidDataSourceFactory类的createDataSource方法<br>​        createDataSource(Properties p) 方法参数可以是一个属性集对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DruidUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1.定义成员变量</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> DataSource dataSource;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.静态代码块</span></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//3.创建属性集对象</span></span><br><span class="line">            Properties p = <span class="keyword">new</span> Properties();</span><br><span class="line">            <span class="comment">//4.加载配置文件 Druid 连接池不能够主动加载配置文件 ,需要指定文件</span></span><br><span class="line">            InputStream inputStream = DruidUtils.class.getClassLoader().getResourceAsStream(<span class="string">&quot;druid.properties&quot;</span>);</span><br><span class="line">            <span class="comment">//5. 使用Properties对象的 load方法 从字节流中读取配置信息</span></span><br><span class="line">            p.load(inputStream);</span><br><span class="line">            <span class="comment">//6. 通过工厂类获取连接池对象</span></span><br><span class="line">            dataSource = DruidDataSourceFactory.createDataSource(p);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取连接的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dataSource.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//释放资源</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Connection con, Statement statement)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            statement.close();</span><br><span class="line">            con.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Connection con, Statement statement, ResultSet resultSet)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            resultSet.close();</span><br><span class="line">            statement.close();</span><br><span class="line">            con.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取连接池对象的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DataSource <span class="title">getDataSources</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dataSource;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取连接</span></span><br><span class="line">    Connection con = DruidUtils.getConnection();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取Statement,并执行sql</span></span><br><span class="line">    PreparedStatement ps = con.prepareStatement(<span class="string">&quot;select * from account where id = ?&quot;</span>);</span><br><span class="line">    ps.setInt(<span class="number">1</span>,<span class="number">4</span>);</span><br><span class="line">    ResultSet resultSet = ps.executeQuery();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//处理结果集</span></span><br><span class="line">    <span class="keyword">while</span>(resultSet.next())&#123;</span><br><span class="line">        String userName = resultSet.getString(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">        System.out.println(userName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//关闭资源</span></span><br><span class="line">    DruidUtils.close(con, ps, resultSet);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="DBUtils"><a href="#DBUtils" class="headerlink" title="DBUtils"></a>DBUtils</h1><p>使用JDBC我们发现冗余的代码太多了,为了简化开发 我们选择使用 DbUtils</p>
<p> Commons DbUtils是Apache组织提供的一个对JDBC进行简单封装的开源工具类库，使用它能够简化JDBC应用程<br>序的开发，同时也不会影响程序的性能。</p>
<p>导入jara包：DBUtils就是JDBC的简化开发工具包。需要项目导入commons-dbutils-1.6.jar。</p>
<p><strong>核心功能</strong></p>
<ol>
<li>QueryRunner 中提供对sql语句操作的API.</li>
<li>ResultSetHandler接口，用于定义select操作后，怎样封装结果集. </li>
<li>DbUtils类,他就是一个工具类,定义了关闭资源与事务处理相关方法.</li>
</ol>
<p><strong>相关知识介绍</strong></p>
<p><strong>表和类之间的关系：</strong></p>
<ul>
<li>整个表可以看做是一个类</li>
<li>表中的一列,对应类中的一个成员属性</li>
<li>表中的一行记录,对应一个类的实例(对象)</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/LPEGAs"><img src="https://s1.ax1x.com/2022/04/09/LPEGAs.png" alt="LPEGAs.png"></a></p>
<p><strong>JavaBean组件</strong></p>
<p>JavaBean 就是一个类, 开发中通常用于封装数据,有一下特点</p>
<ol>
<li>需要实现 序列化接口, Serializable (暂时可以省略)</li>
<li> 提供私有字段: private 类型 变量名; </li>
<li>提供共有的 getter 和 setter</li>
<li>提供 空参构造</li>
</ol>
<p>创建Account类和数据库的Account表对应，我们可以创建一个 entity包,专门用来存放 JavaBean类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * account表对应的JavaBean类</span></span><br><span class="line"><span class="comment"> * 规则：</span></span><br><span class="line"><span class="comment"> * 1. 需要实现 序列化接口, Serializable (暂时可以省略) </span></span><br><span class="line"><span class="comment"> * 2. 提供私有字段: private 类型 变量名; </span></span><br><span class="line"><span class="comment"> * 3. 提供 getter 和 setter</span></span><br><span class="line"><span class="comment"> * 4. 提供 空参构造</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//提供私有字段: private 类型 变量名;</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String bankNo;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> money;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//构造方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Account</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//提供 getter 和 setter</span></span><br><span class="line">	<span class="comment">// ...............</span></span><br><span class="line">    <span class="comment">//...... </span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Account&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, bankNo=&#x27;&quot;</span> + bankNo + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, userName=&#x27;&quot;</span> + userName + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, money=&quot;</span> + money +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="增删改"><a href="#增删改" class="headerlink" title="增删改"></a>增删改</h2><p><strong>QueryRunner核心类</strong></p>
<p>构造方法：</p>
<p>QueryRunner()，手动模式<br>QueryRunner(DataSource ds) ,参数：数据源（连接池对象），DBUtils底层自动维护连接connection，自动模式</p>
<p>常用方法：</p>
<p>update(Connection con, String sql, Object… params) ，用来完成表数据的增加、删除、更新操作</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Connection con</td>
<td>数据库连接对象, 自动模式创建QueryRun  可以不传 ,手动模式必须传递</td>
</tr>
<tr>
<td>String sql</td>
<td>占位符形式的SQL ,使用 ?  号占位符</td>
</tr>
<tr>
<td>Object… param</td>
<td>Object类型的 可变参,用来设置占位符上的参数</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 增</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1，获取QueryRunner对象，手动模式，无参构造方法</span></span><br><span class="line">    QueryRunner qr = <span class="keyword">new</span> QueryRunner();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2，QureyRunner对象的update方法执行增删改sql</span></span><br><span class="line">    <span class="comment">//参数：连接对象</span></span><br><span class="line">    Connection con = DruidUtils.getConnection();</span><br><span class="line">    <span class="comment">//参数：sql语句</span></span><br><span class="line">    String sql = <span class="string">&quot;insert into account values (?, ?, ?, ?)&quot;</span>;</span><br><span class="line">    <span class="comment">//参数：设置sql占位符的参数</span></span><br><span class="line">    Object[] param = &#123;<span class="number">10</span>, <span class="string">&quot;1515&quot;</span>, <span class="string">&quot;老丁&quot;</span>, <span class="number">1500</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//执行</span></span><br><span class="line">    qr.update(con, sql, param);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 删</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1，获取QueryRunner对象，自动模式，有参构造方法，参数:数据库连接池对象</span></span><br><span class="line">    QueryRunner qr = <span class="keyword">new</span> QueryRunner(DruidUtils.getDataSources());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2，QureyRunner对象的update方法执行增删改sql</span></span><br><span class="line">    <span class="comment">//参数：sql语句</span></span><br><span class="line">    String sql = <span class="string">&quot;delete from account where id = ?&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//执行</span></span><br><span class="line">    qr.update(sql, <span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 改</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1，获取QueryRunner对象，自动模式，有参构造方法，参数:数据库连接池对象</span></span><br><span class="line">    QueryRunner qr = <span class="keyword">new</span> QueryRunner(DruidUtils.getDataSources());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2，QureyRunner对象的update方法执行增删改sql</span></span><br><span class="line">    <span class="comment">//参数：sql语句</span></span><br><span class="line">    String sql = <span class="string">&quot;update account set userName = ? where id = ?&quot;</span>;</span><br><span class="line">    <span class="comment">//参数：设置sql占位符的参数</span></span><br><span class="line">    Object[] param = &#123;<span class="string">&quot;老鸟&quot;</span>, <span class="number">10</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//执行</span></span><br><span class="line">    qr.update(sql, param);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="查"><a href="#查" class="headerlink" title="查"></a>查</h2><p>QueryRunner核心类的query(Connection con, String sql, ResultSetHandler<T> rsh, Object… params) 方法，用来完成表数据的查询操作</p>
<p><strong>ResultSetHandler接口</strong></p>
<p>ResultSetHandler可以对查询出来的ResultSet结果集进行处理，达到一些业务上的需求。</p>
<p><strong>ResultSetHandler 结果集处理类</strong></p>
<table>
<thead>
<tr>
<th>ResultSetHandler  实现类</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ArrayHandler</strong></td>
<td>将结果集中的第一条记录封装到一个Object[]数组中，数组中的每一个元素就是这条记录中的每一个字段的值</td>
</tr>
<tr>
<td><strong>ArrayListHandler</strong></td>
<td>将结果集中的每一条记录都封装到一个Object[]数组中，将这些数组在封装到List集合中。</td>
</tr>
<tr>
<td><strong>BeanHandler</strong></td>
<td>将结果集中第一条记录封装到一个指定的javaBean中.</td>
</tr>
<tr>
<td><strong>BeanListHandler</strong></td>
<td>将结果集中每一条记录封装到指定的javaBean中，再将这些javaBean在封装到List  集合中</td>
</tr>
<tr>
<td>ColumnListHandler</td>
<td>将结果集中指定的列的字段值，封装到一个List集合中</td>
</tr>
<tr>
<td>KeyedHandler</td>
<td>将结果集中每一条记录封装到Map&lt;String,Object&gt;,在将这个map集合做为另一个  Map的value,另一个Map集合的key是指定的字段的值。</td>
</tr>
<tr>
<td><strong>MapHandler</strong></td>
<td>将结果集中第一条记录封装到了Map&lt;String,Object&gt;集合中，key就是字段名称，  value就是字段值</td>
</tr>
<tr>
<td>MapListHandler</td>
<td>将结果集中每一条记录封装到了Map&lt;String,Object&gt;集合中，key就是字段名称，  value就是字段值，在将这些Map封装到List集合中。</td>
</tr>
<tr>
<td><strong>ScalarHandler</strong></td>
<td>它是用于封装单个数据。例如  select count(*) from 表操作。</td>
</tr>
</tbody></table>
<p>测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自动模式创建QueryRunner对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> QueryRunner qr = <span class="keyword">new</span> QueryRunner(DruidUtils.getDataSources());</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    <span class="comment">//查询id为5的记录,封装到数组中</span></span><br><span class="line">    String sql = <span class="string">&quot;select * from account where id = ?&quot;</span>;</span><br><span class="line">    Object[] array = qr.query(sql, <span class="keyword">new</span> ArrayHandler(), <span class="number">5</span>);</span><br><span class="line">    <span class="comment">//打印结果</span></span><br><span class="line">    System.out.println(Arrays.toString(array)); <span class="comment">//[5, 119, 李四(买家), 1100]</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    <span class="comment">//查询所有数据,封装到List集合中</span></span><br><span class="line">    String sql = <span class="string">&quot;select * from account&quot;</span>;</span><br><span class="line">    List&lt;Object[]&gt; list = qr.query(sql, <span class="keyword">new</span> ArrayListHandler());</span><br><span class="line">    <span class="comment">//打印结果</span></span><br><span class="line">    <span class="keyword">for</span>(Object[] array : list)&#123;</span><br><span class="line">        System.out.println(Arrays.toString(array));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    <span class="comment">//查询id为5的记录,封装到指定JavaBean中</span></span><br><span class="line">    String sql = <span class="string">&quot;select * from account where id = ?&quot;</span>;</span><br><span class="line">    Account account = qr.query(sql, <span class="keyword">new</span> BeanHandler&lt;Account&gt;(Account.class), <span class="number">5</span>);</span><br><span class="line">    <span class="comment">//打印结果</span></span><br><span class="line">    System.out.println(account);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    <span class="comment">//查询所有数据,封装到JavaBean中再封装到List集合中</span></span><br><span class="line">    String sql = <span class="string">&quot;select * from account&quot;</span>;</span><br><span class="line">    List&lt;Account&gt; list = qr.query(sql,<span class="keyword">new</span> BeanListHandler&lt;Account&gt;(Account.class));</span><br><span class="line">    <span class="comment">//打印结果</span></span><br><span class="line">    <span class="keyword">for</span>(Account account:list)&#123;</span><br><span class="line">        System.out.println(account);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test5</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    <span class="comment">// 查询姓名是 小李的信息,将结果封装到Map集合中</span></span><br><span class="line">    String sql = <span class="string">&quot;select * from account where userName = ?&quot;</span>;</span><br><span class="line">    Map&lt;String, Object&gt; map = qr.query(sql, <span class="keyword">new</span> MapHandler(), <span class="string">&quot;小李&quot;</span>);</span><br><span class="line">    <span class="comment">//打印结果</span></span><br><span class="line">    System.out.println(map);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test6</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    <span class="comment">//查询所有用户的money总合</span></span><br><span class="line">    String sql = <span class="string">&quot;select SUM(money) from account&quot;</span>;</span><br><span class="line">    Object obj = qr.query(sql, <span class="keyword">new</span> ScalarHandler());</span><br><span class="line">    <span class="comment">//打印结果</span></span><br><span class="line">    <span class="keyword">int</span> money = Integer.parseInt(obj.toString());</span><br><span class="line">    System.out.println(money);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="批处理"><a href="#批处理" class="headerlink" title="批处理"></a>批处理</h1><p>批处理指的是一次操作中执行多条SQL语句，批处理相比于一次一次执行效率会提高很多。</p>
<p>当向数据库中添加大量的数据时，需要用到批处理。</p>
<p><strong>实现批处理</strong></p>
<p>Statement和PreparedStatement都支持批处理操作，这里我们介绍一下PreparedStatement的批处理方式：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>void addBatch()</td>
<td>将给定的 SQL 命令添加到此  Statement 对象的当前命令列表中。   通过调用方法 executeBatch  可以批量执行此列表中的命令。</td>
</tr>
<tr>
<td>int[] executeBatch()</td>
<td>每次提交一批命令到数据库中执行，如果所有的命令都成功执行了，那么返回一个数组，这个数组是说明每条命令所影响的行数</td>
</tr>
</tbody></table>
<p>mysql 批处理是默认关闭的，所以需要加一个参数才打开mysql 数据库批处理，在url中添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rewriteBatchedStatements=true </span><br><span class="line">例如: url=jdbc:mysql://127.0.0.1:3306/db5?characterEncoding=UTF-8&amp;rewriteBatchedStatements=true</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取连接</span></span><br><span class="line">    Connection con = DruidUtils.getConnection();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取prepareStatement</span></span><br><span class="line">    PreparedStatement ps = con.prepareStatement(<span class="string">&quot;insert into testbatch (uname) values (?)&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置占位符，并添加到批处理</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">1</span>; i&lt;=<span class="number">10000</span>; i++)&#123;</span><br><span class="line">        ps.setString(<span class="number">1</span>, <span class="string">&quot;小强&quot;</span>+i);</span><br><span class="line">        ps.addBatch();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//执行批处理</span></span><br><span class="line">    ps.executeBatch();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">    System.out.println(end-start);    <span class="comment">//103</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="元数据"><a href="#元数据" class="headerlink" title="元数据"></a>元数据</h1><p>除了表之外的数据都是元数据,可以分为三类</p>
<ul>
<li>查询结果信息： UPDATE 或 DELETE语句 受影响的记录数。</li>
<li>数据库和数据表的信息： 包含了数据库及数据表的结构信息。</li>
<li>MySQL服务器信息： 包含了数据库服务器的当前状态，版本号等。</li>
</ul>
<p><strong>获取mysql元数据相关命令</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 元数据相关的命令介绍 </span></span><br><span class="line"><span class="keyword">select</span> version(); 获取mysql服务器的版本信息</span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> status; 查看服务器的状态信息</span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> columns <span class="keyword">from</span> table_name; 显示表的字段信息等，和<span class="keyword">desc</span> table_name一样</span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> index <span class="keyword">from</span> table_name; 显示数据表的详细索引信息，包括<span class="keyword">PRIMARY</span> KEY（主键）</span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> databases:列出所有数据库</span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> tables : 显示当前数据库的所有表</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> database(): 获取当前的数据库名</span><br></pre></td></tr></table></figure>

<h2 id="使用JDBC获取元数据"><a href="#使用JDBC获取元数据" class="headerlink" title="使用JDBC获取元数据"></a>使用JDBC获取元数据</h2><p>通过JDBC 也可以获取到元数据,比如数据库的相关信息,或者当我们使用程序查询一个不熟悉的表时, 我们可以通过<br>获取元素据信息,了解表中有多少个字段,字段的名称 和 字段的类型.</p>
<p><strong>JDBC中描述元数据的类</strong></p>
<table>
<thead>
<tr>
<th>元数据类</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>DatabaseMetaData</td>
<td>描述数据库的元数据对象</td>
</tr>
<tr>
<td>ResultSetMetaData</td>
<td>描述结果集的元数据对象</td>
</tr>
</tbody></table>
<p><strong>获取元数据类对象的方法</strong></p>
<p>getMetaData ()</p>
<p>connection 连接对象, 调用 getMetaData () 方法,获取的是DatabaseMetaData 数据库元数据对象<br>PrepareStatement 预处理对象调用 getMetaData () , 获取的是ResultSetMetaData , 结果集元数据对象</p>
<h2 id="DatabaseMetaData"><a href="#DatabaseMetaData" class="headerlink" title="DatabaseMetaData"></a>DatabaseMetaData</h2><table>
<thead>
<tr>
<th>方法说明</th>
</tr>
</thead>
<tbody><tr>
<td>getURL() : 获取数据库的URL</td>
</tr>
<tr>
<td>getUserName(): 获取当前数据库的用户名</td>
</tr>
<tr>
<td>getDatabaseProductName(): 获取数据库的产品名称</td>
</tr>
<tr>
<td>getDatabaseProductVersion(): 获取数据的版本号</td>
</tr>
<tr>
<td>getDriverName():  返回驱动程序的名称</td>
</tr>
<tr>
<td>isReadOnly():  判断数据库是否只允许只读 true 代表只读</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDatabaseMetaData</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取连接</span></span><br><span class="line">    Connection con = DruidUtils.getConnection();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//连接对象获取数据元getMetaData()，将会是DatabaseMetaData对象</span></span><br><span class="line">    DatabaseMetaData metaData = con.getMetaData();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取元数据相关信息</span></span><br><span class="line">    System.out.println(<span class="string">&quot;数据库的url: &quot;</span> + metaData.getURL());</span><br><span class="line">    System.out.println(<span class="string">&quot;数据库用户名：&quot;</span> + metaData.getUserName());</span><br><span class="line">    System.out.println(<span class="string">&quot;数据库版本好：&quot;</span> + metaData.getDatabaseProductVersion());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ResultSetMetaData"><a href="#ResultSetMetaData" class="headerlink" title="ResultSetMetaData"></a>ResultSetMetaData</h2><table>
<thead>
<tr>
<th>方法说明</th>
</tr>
</thead>
<tbody><tr>
<td>getColumnCount()  : 当前结果集共有多少列</td>
</tr>
<tr>
<td>getColumnName(int  i) : 获取指定列号的列名, 参数是整数 从1开始</td>
</tr>
<tr>
<td>getColumnTypeName(int  i): 获取指定列号列的类型, 参数是整数 从1开始</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testResultSetMetaData</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取连接</span></span><br><span class="line">    Connection con = DruidUtils.getConnection();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取prepareStatement预处理</span></span><br><span class="line">    PreparedStatement ps = con.prepareStatement(<span class="string">&quot;select * from account&quot;</span>);</span><br><span class="line">    ps.executeQuery();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//PrepaerdStatement对象获取的元数据getMetaData()，将是ResultSetMetaData对象</span></span><br><span class="line">    ResultSetMetaData metaData = ps.getMetaData();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取元数据相关信息</span></span><br><span class="line">    <span class="keyword">int</span> count = metaData.getColumnCount();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;=count; i++)&#123;</span><br><span class="line">        String name = metaData.getColumnName(i);</span><br><span class="line">        String nameType = metaData.getColumnTypeName(i);</span><br><span class="line">        System.out.println(<span class="string">&quot;列名：&quot;</span> + name + <span class="string">&quot;，类型：&quot;</span> + nameType);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="XML"><a href="#XML" class="headerlink" title="XML"></a>XML</h1><p>XML即可扩展标记语言（Extensible Markup Language）</p>
<p>W3C在1998年2月发布1.0版本，2004年2月又发布1.1版本，但因为1.1版本不能向下兼容1.0版<br>本，所以1.1没有人用。同时，在2004年2月W3C又发布了1.0版本的第三版。我们要学习的还是<br>1.0版本 !</p>
<p><strong>特点</strong>：</p>
<p>可扩展的, 标签都是自定义的<br>语法十分严格</p>
<p><strong>作用：</strong></p>
<table>
<thead>
<tr>
<th><strong>功能</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td>存储数据</td>
<td>通常，我们在数据库中存储数据。不过，如果希望数据的可移植性更强，我们可以把数据存储  XML 文件中</td>
</tr>
<tr>
<td><strong>配置文件</strong></td>
<td>作为各种技术框架的配置文件使用 (多)</td>
</tr>
<tr>
<td>在网络中传输</td>
<td>客户端可以使用XML格式向服务器端发送数据,服务器接收到xml格式数据,进行解析</td>
</tr>
</tbody></table>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p><strong>XML文档声明格式</strong></p>
<p>文档声明必写在第一行；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br></pre></td></tr></table></figure>

<p>versioin：指定XML文档版本。必须属性，因为我们不会选择1.1，只会选择1.0；<br>encoding：指定当前文档的编码。可选属性，默认值是utf-8；</p>
<p><strong>元素</strong></p>
<p>Element 元素: 是XML文档中最重要的组成部分</p>
<p>元素的命名规则</p>
<ul>
<li>不能使用空格，不能使用冒号</li>
<li>xml 标签名称区分大小写</li>
<li>XML 必须有且只有一个根元素</li>
</ul>
<p>语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;users&gt;&lt;/users&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;close/&gt;</span><br></pre></td></tr></table></figure>

<p>元素体内部可以是元素，也可以是文本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;hello&gt; </span><br><span class="line">	&lt;a&gt;你好&lt;/a&gt; </span><br><span class="line">&lt;/hello&gt;</span><br></pre></td></tr></table></figure>



<p><strong>属性</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;&quot; class=&quot;&quot;&gt; &lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>属性是元素的一部分，它必须出现在元素的开始标签中</li>
<li>属性的定义格式：属性名=属性值，其中属性值必须使用单引或双引</li>
<li>一个元素可以有0~N个属性，但一个元素中不能出现同名属性</li>
<li>属性名不能使用空格、冒号等特殊字符，且必须以字母开头</li>
</ol>
<p><strong>注释</strong></p>
<p>XML的注释，以<code>&lt;!--</code>开始，以<code>--&gt;</code>结束。注释内容会被XML解析器忽略！</p>
<p><strong>例如使用xml描述表中的数据</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">users</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">user</span> <span class="attr">id</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>李四<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">age</span>&gt;</span>15<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sex</span>&gt;</span>男<span class="tag">&lt;/<span class="name">sex</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">user</span> <span class="attr">id</span>=<span class="string">&quot;2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>老六<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">age</span>&gt;</span>60<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sex</span>&gt;</span>女<span class="tag">&lt;/<span class="name">sex</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">user</span> <span class="attr">id</span>=<span class="string">&quot;3&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>王五<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">age</span>&gt;</span>18<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sex</span>&gt;</span>男<span class="tag">&lt;/<span class="name">sex</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">users</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="XML约束"><a href="#XML约束" class="headerlink" title="XML约束"></a>XML约束</h2><p>在XML技术里，可以编写一个文档来约束一个XML文档的书写规范，这称之为XML约束。</p>
<p>常见的xml约束：</p>
<ul>
<li><p>DTD</p>
</li>
<li><p>Schema</p>
</li>
</ul>
<p>作为程序员只要掌握两点：</p>
<ul>
<li>会阅读约束文档</li>
<li>会引入约束文档</li>
<li>根据约束文档规范编写xml</li>
<li>不用自己编写约束文档</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/LIsre1"><img src="https://s1.ax1x.com/2022/04/25/LIsre1.png" alt="LIsre1.png"></a></p>
<h3 id="DTD约束"><a href="#DTD约束" class="headerlink" title="DTD约束"></a>DTD约束</h3><p>DTD（Document Type Defifinition），文档类型定义，用来约束XML文档。规定XML文档中元素的名<br>称，子元素的名称及顺序，元素的属性等。</p>
<p>开发中，我们不会自己编写DTD约束文档。<br>常情况我们都是通过框架提供的DTD约束文档，编写对应的XML文档。常见框架使用DTD约束有：<br>Struts2、hibernate等。</p>
<p>例子：</p>
<p>DTD约束student1.dtd如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;!ELEMENT students (student+) &gt;</span><br><span class="line">        &lt;!ELEMENT student (name,age,sex)&gt;</span><br><span class="line">        &lt;!ELEMENT name (#PCDATA)&gt;</span><br><span class="line">        &lt;!ELEMENT age (#PCDATA)&gt;</span><br><span class="line">        &lt;!ELEMENT sex (#PCDATA)&gt;</span><br><span class="line">        &lt;!ATTLIST student number ID #REQUIRED&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--</span><br><span class="line">    1，ELEMENT: 用来定义元素</span><br><span class="line">    students (student+):表示根元素是students，并且有多个student子元素</span><br><span class="line">    student (name,age,sex):表示student元素的子元素有name,age,sex</span><br><span class="line">    name (#PCDATA):name元素的内容是文本</span><br><span class="line"></span><br><span class="line">    2，ATTLIST：用来定义属性</span><br><span class="line">    student number ID #REQUIRED：student元素有number属性，</span><br><span class="line">    ID：唯一 值只能是字母或者下划线开头</span><br><span class="line">    #REQUIRED：非空</span><br><span class="line">--&gt;</span><br></pre></td></tr></table></figure>

<p>本地引入DTD约束并编写XML</p>
<p>引入语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE 根元素名 SYSTEM &quot;约束文档路径&quot;&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">students</span> <span class="meta-keyword">SYSTEM</span> <span class="meta-string">&quot;student1.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">students</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">student</span> <span class="attr">number</span>=<span class="string">&quot;a&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>老王<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">age</span>&gt;</span>18<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sex</span>&gt;</span>女<span class="tag">&lt;/<span class="name">sex</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">student</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">student</span> <span class="attr">number</span>=<span class="string">&quot;b&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>老李<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">age</span>&gt;</span>60<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sex</span>&gt;</span>女<span class="tag">&lt;/<span class="name">sex</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">student</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">students</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="Schema约束"><a href="#Schema约束" class="headerlink" title="Schema约束"></a>Schema约束</h3><ul>
<li>Schema是新的XML文档约束, 比DTD强大很多，是DTD 替代者；</li>
<li>Schema本身也是XML文档，但Schema文档的扩展名为xsd，而不是xml。 </li>
<li> Schema 功能更强大，内置多种简单和复杂的数据类型</li>
<li>Schema 支持命名空间 (一个XML中可以引入多个约束文档)</li>
</ul>
<p>例子：</p>
<p>Schema约束文档 ”student2.xsd“ 如下</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">xsd:schema</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.de.com/xml&quot;</span>                    </span></span><br><span class="line"><span class="tag">            <span class="attr">xmlns:xsd</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">targetNamespace</span>=<span class="string">&quot;http://www.de.com/xml&quot;</span> <span class="attr">elementFormDefault</span>=<span class="string">&quot;qualified&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">xsd:element</span> <span class="attr">name</span>=<span class="string">&quot;students&quot;</span> <span class="attr">type</span>=<span class="string">&quot;studentsType&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xsd:complexType</span> <span class="attr">name</span>=<span class="string">&quot;studentsType&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">xsd:sequence</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">xsd:element</span> <span class="attr">name</span>=<span class="string">&quot;student&quot;</span> <span class="attr">type</span>=<span class="string">&quot;studentType&quot;</span> <span class="attr">minOccurs</span>=<span class="string">&quot;0&quot;</span> <span class="attr">maxOccurs</span>=<span class="string">&quot;unbounded&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">xsd:sequence</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xsd:complexType</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xsd:complexType</span> <span class="attr">name</span>=<span class="string">&quot;studentType&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">xsd:sequence</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">xsd:element</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">type</span>=<span class="string">&quot;xsd:string&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">xsd:element</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">type</span>=<span class="string">&quot;ageType&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">xsd:element</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">type</span>=<span class="string">&quot;sexType&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">xsd:sequence</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">xsd:attribute</span> <span class="attr">name</span>=<span class="string">&quot;number&quot;</span> <span class="attr">type</span>=<span class="string">&quot;numberType&quot;</span> <span class="attr">use</span>=<span class="string">&quot;required&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xsd:complexType</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xsd:simpleType</span> <span class="attr">name</span>=<span class="string">&quot;sexType&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">xsd:restriction</span> <span class="attr">base</span>=<span class="string">&quot;xsd:string&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">xsd:enumeration</span> <span class="attr">value</span>=<span class="string">&quot;male&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">xsd:enumeration</span> <span class="attr">value</span>=<span class="string">&quot;female&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">xsd:restriction</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xsd:simpleType</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xsd:simpleType</span> <span class="attr">name</span>=<span class="string">&quot;ageType&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">xsd:restriction</span> <span class="attr">base</span>=<span class="string">&quot;xsd:integer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">xsd:minInclusive</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">xsd:maxInclusive</span> <span class="attr">value</span>=<span class="string">&quot;200&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">xsd:restriction</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xsd:simpleType</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">xsd:simpleType</span> <span class="attr">name</span>=<span class="string">&quot;numberType&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">xsd:restriction</span> <span class="attr">base</span>=<span class="string">&quot;xsd:string&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">xsd:pattern</span> <span class="attr">value</span>=<span class="string">&quot;hehe_\d&#123;4&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">xsd:restriction</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">xsd:simpleType</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">xsd:schema</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/LIccF0"><img src="https://s1.ax1x.com/2022/04/25/LIccF0.png" alt="LIccF0.png"></a></p>
<p><strong>XML引入Schema约束步骤：</strong></p>
<p>1，查看schema文档，找到根元素，在xml中写出来</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">students</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">students</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2，根元素来自哪个命名空间。使用<strong>xmlns</strong>指令来声明，引入 w3c的标准命名空间, 复制即可</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">students</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns</span>=<span class="string">&quot;http://www.de.com/xml&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns:xsd</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">students</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>完整代码如下</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">students</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns</span>=<span class="string">&quot;http://www.de.com/xml&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns:xsd</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">student</span> <span class="attr">number</span>=<span class="string">&quot;hehe_0001&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>老李<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">age</span>&gt;</span>50<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sex</span>&gt;</span>female<span class="tag">&lt;/<span class="name">sex</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">student</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">student</span> <span class="attr">number</span>=<span class="string">&quot;hehe_0002&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>老六<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">age</span>&gt;</span>200<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sex</span>&gt;</span>male<span class="tag">&lt;/<span class="name">sex</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">student</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">students</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="XML解析"><a href="#XML解析" class="headerlink" title="XML解析"></a>XML解析</h2><p>当将数据存储在XML后，我们就希望通过程序获得XML的内容。如果我们使用Java基础所学习的IO知<br>识是可以完成的，不过你需要非常繁琐的操作才可以完成，且开发中会遇到不同问题（只读、读写）。<br>人们为不同问题提供不同的解析方式，并提交对应的解析器，方便开发人员操作XML。</p>
<p><strong>XML解析方式</strong></p>
<ul>
<li>DOM：要求解析器把整个XML文档装载到内存，并解析成一个Document对象。<ul>
<li>优点：元素与元素之间保留结构关系，故可以进行增删改查操作。</li>
<li>缺点：XML文档过大，可能出现内存溢出显现。</li>
</ul>
</li>
<li>SAX：是一种速度更快，更有效的方法。它逐行扫描文档，一边扫描一边解析。并以事件驱动的方<br>式进行具体解析，每执行一行，都将触发对应的事件。（了解）<ul>
<li>优点：占用内存少 处理速度快，可以处理大文件</li>
<li>缺点：只能读，逐行后将释放资源。</li>
</ul>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/LI2Z8K"><img src="https://s1.ax1x.com/2022/04/25/LI2Z8K.png" alt="LI2Z8K.png"></a></p>
<p><strong>常见的解析器</strong></p>
<p>解析器：就是根据不同的解析方式提供的具体实现。有的解析器操作过于繁琐，为了方便开发人员，<br>有提供易于操作的解析开发包</p>
<ul>
<li>JAXP：sun公司提供的解析器，支持DOM和SAX两种思想</li>
<li><strong>DOM4J</strong>：一款非常优秀的解析器 , Dom4j是一个易用的、开源的库，用于XML，XPath和XSLT。<br>它应用于Java平台，采用了Java集合框架并完全支持DOM，SAX和JAXP。</li>
<li>Jsoup：jsoup 是一款Java 的HTML解析器 ,也可以解析XML</li>
<li>PULL：Android内置的XML解析方式，类似SAX。</li>
</ul>
<h3 id="DOM4J的使用"><a href="#DOM4J的使用" class="headerlink" title="DOM4J的使用"></a>DOM4J的使用</h3><p><strong>导入包</strong></p>
<p>dom4j-1.6.1.jar</p>
<p><strong>API的使用</strong></p>
<p>使用核心类SaxReader加载xml文档获得Document，通过Document 对象获得文档的根元素，然后就<br>可以操作了</p>
<ul>
<li>SaxReader对象：<br>read(…) 加载执行xml文档</li>
<li>Document对象：<br>getRootElement() 获得根元素</li>
<li>Element对象：<br>elements(…) 获得指定名称的所有子元素。可以不指定名称<br>element(…) 获得指定名称的第一个子元素。可以不指定名称<br>getName() 获得当前元素的元素名<br>attributeValue(…) 获得指定属性名的属性值<br>elementText(…) 获得指定名称子元素的文本值<br>getText() 获得当前元素的文本内容</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> <span class="keyword">throws</span> DocumentException </span>&#123;</span><br><span class="line">    <span class="comment">//1.获取XML解析对象</span></span><br><span class="line">    SAXReader sr = <span class="keyword">new</span> SAXReader();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.解析XML 获取 文档对象 document</span></span><br><span class="line">    Document document = sr.read(<span class="string">&quot;D:\\projects\\JDBC_work\\src\\org\\de\\Test4\\student2.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.获取根元素</span></span><br><span class="line">    Element rootElement = document.getRootElement();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取元素名</span></span><br><span class="line">    System.out.println(rootElement.getName());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取所有子元素</span></span><br><span class="line">    List&lt;Element&gt; elements = rootElement.elements();</span><br><span class="line">    <span class="keyword">for</span>(Element element : elements)&#123;</span><br><span class="line">        System.out.println(element.getName());</span><br><span class="line">        System.out.println(element.attributeValue(<span class="string">&quot;number&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="xpath读取xml"><a href="#xpath读取xml" class="headerlink" title="xpath读取xml"></a>xpath读取xml</h3><p>XPath 是一门在 XML 文档中查找信息的语言。 可以是使用xpath查找xml中的内容。</p>
<p>优点：</p>
<p>由于DOM4J在解析XML时只能一层一层解析，所以当XML文件层数过多时使用会很不方便，结合<br>XPATH就可以直接获取到某个元素</p>
<p><strong>导入包</strong><br>jaxen-1.1-beta-6.jar</p>
<p><strong>基本语法，路径表达式</strong></p>
<table>
<thead>
<tr>
<th><strong>语法</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td>/AAA/DDD/BBB</td>
<td>表示一层一层的，AAA下面  DDD下面的BBB</td>
</tr>
<tr>
<td>//BBB</td>
<td>表示和这个名称相同，表示只要名称是BBB，都得到</td>
</tr>
<tr>
<td>//*</td>
<td>所有元素</td>
</tr>
<tr>
<td>BBB[1] ,  BBB[last()]</td>
<td>第一种表示第一个BBB元素, 第二种表示  后一个BBB元素</td>
</tr>
<tr>
<td>//BBB[@id]</td>
<td>表示只要BBB元素上面有id属性，都得到</td>
</tr>
<tr>
<td>//BBB[@id=’b1’]</td>
<td>表示元素名称是BBB,在BBB上面有id属性，并且id的属性值是b1</td>
</tr>
</tbody></table>
<p><strong>API介绍</strong></p>
<ul>
<li>selectSingleNode(query): 查找和 XPath 查询匹配的一个节点。<br>参数是Xpath 查询串。</li>
<li>selectNodes(query): 得到的是xml根节点下的所有满足 xpath 的节点；<br>参数是Xpath 查询串。</li>
<li>Node: 节点对象</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> <span class="keyword">throws</span> DocumentException </span>&#123;</span><br><span class="line">    <span class="comment">//1.获取XML解析对象</span></span><br><span class="line">    SAXReader sr = <span class="keyword">new</span> SAXReader();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.解析XML 获取 文档对象 document</span></span><br><span class="line">    Document document = sr.read(<span class="string">&quot;D:\\projects\\JDBC_work\\src\\org\\de\\Test4\\student1.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.获取单个节点，第二个学生的信息</span></span><br><span class="line">    Node nodeNumber = document.selectSingleNode(<span class="string">&quot;/students/student[2]/attribute::number&quot;</span>);</span><br><span class="line">    System.out.println(nodeNumber.getText());</span><br><span class="line">    </span><br><span class="line">    Node nodeName = document.selectSingleNode(<span class="string">&quot;/students/student[2]/name&quot;</span>);</span><br><span class="line">    System.out.println(nodeName.getText());</span><br><span class="line">    </span><br><span class="line">    Node nodeAge = document.selectSingleNode(<span class="string">&quot;/students/student[2]/age&quot;</span>);</span><br><span class="line">    System.out.println(nodeAge.getText());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> <span class="keyword">throws</span> DocumentException </span>&#123;</span><br><span class="line">    <span class="comment">//1.获取XML解析对象</span></span><br><span class="line">    SAXReader sr = <span class="keyword">new</span> SAXReader();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.解析XML 获取 文档对象 document</span></span><br><span class="line">    Document document = sr.read(<span class="string">&quot;D:\\projects\\JDBC_work\\src\\org\\de\\Test4\\student1.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.获取多个节点,第一个学生的信息</span></span><br><span class="line">    List&lt;Node&gt; nodes = document.selectNodes(<span class="string">&quot;/students/student[1]/*&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(Node node : nodes)&#123;</span><br><span class="line">        System.out.println(node.getName() + <span class="string">&quot; = &quot;</span> + node.getText());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="JDBC自定义XML"><a href="#JDBC自定义XML" class="headerlink" title="JDBC自定义XML"></a>JDBC自定义XML</h2><p>原来我们写JDBCUtils工具类时，数据库的配置信息是直接保存在工具类中，现在我们将数据库的配置信息保存在xml文件中。</p>
<p>1，创建自定义xml 文件, 保存 数据库连接信息，jdbc-config.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">jdbc</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;DRIVERNAME&quot;</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;URL&quot;</span>&gt;</span>jdbc:mysql://localhost:3306/de?characterEncoding=UTF-8<span class="symbol">&amp;amp;</span>rewriteBatchedStatements=true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;USER&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;PASSWORD&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">jdbc</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2，编写工具类 ,使用xpath 读取xml文件中的数据库配置信息</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCUtils2</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1,定义成员变量存放配置信息</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String DRIVERNAME;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String URL;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String USER;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String PASSWORD;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2，在静态代码块中，解析xml文件的配置信息</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//1,解析xml文件</span></span><br><span class="line">            SAXReader sr = <span class="keyword">new</span> SAXReader();</span><br><span class="line">            Document document = sr.read(<span class="string">&quot;D:\\projects\\JDBC_work\\resources\\jdbc-config.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">            Node node = document.selectSingleNode(<span class="string">&quot;/jdbc/property[@name=&#x27;DRIVERNAME&#x27;]&quot;</span>);</span><br><span class="line">            DRIVERNAME = node.getText();</span><br><span class="line">            node = document.selectSingleNode(<span class="string">&quot;/jdbc/property[@name=&#x27;URL&#x27;]&quot;</span>);</span><br><span class="line">            URL = node.getText();</span><br><span class="line">            node = document.selectSingleNode(<span class="string">&quot;/jdbc/property[@name=&#x27;USER&#x27;]&quot;</span>);</span><br><span class="line">            USER = node.getText();</span><br><span class="line">            node = document.selectSingleNode(<span class="string">&quot;/jdbc/property[@name=&#x27;PASSWORD&#x27;]&quot;</span>);</span><br><span class="line">            PASSWORD = node.getText();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//2，注册驱动</span></span><br><span class="line">            Class.forName(DRIVERNAME);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取连接的方法</span></span><br><span class="line">    <span class="comment">//.....</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//关闭资源的方法</span></span><br><span class="line">    <span class="comment">//.....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="综合案例"><a href="#综合案例" class="headerlink" title="综合案例"></a>综合案例</h1><h2 id="商城案例表设计"><a href="#商城案例表设计" class="headerlink" title="商城案例表设计"></a>商城案例表设计</h2><p>通过对商城项目的部分表关系进行分析,完成数据库表的设计</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/L7RS3t"><img src="https://s1.ax1x.com/2022/04/26/L7RS3t.png" alt="L7RS3t.png"></a></p>
<p><strong>建库,建表</strong></p>
<ol>
<li>创建名为 store的数据库, 对应商城项目</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database db6 character set utf8;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>创建用户表</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE user (</span><br><span class="line">  uid varchar(32) PRIMARY KEY,	-- 用户ID</span><br><span class="line">  username varchar(20) , -- 用户名</span><br><span class="line">  password varchar(20) , -- 密码</span><br><span class="line">  telephone varchar(20) , -- 电话</span><br><span class="line">  birthday date , -- 生日</span><br><span class="line">  sex varchar(10) -- 性别</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO USER VALUES </span><br><span class="line">(&#x27;001&#x27;,&#x27;渣渣辉&#x27;,&#x27;123456&#x27;,&#x27;13511112222&#x27;,&#x27;2015-11-04&#x27;,&#x27;男&#x27;),</span><br><span class="line">(&#x27;002&#x27;,&#x27;药水哥&#x27;,&#x27;123456&#x27;,&#x27;13533334444&#x27;,&#x27;1990-02-01&#x27;,&#x27;男&#x27;),</span><br><span class="line">(&#x27;003&#x27;,&#x27;大明白&#x27;,&#x27;123456&#x27;,&#x27;13544445555&#x27;,&#x27;2015-11-03&#x27;,&#x27;男&#x27;),</span><br><span class="line">(&#x27;004&#x27;,&#x27;长海&#x27;,&#x27;123456&#x27;,&#x27;13566667777&#x27;,&#x27;2000-02-01&#x27;,&#x27;男&#x27;),</span><br><span class="line">(&#x27;005&#x27;,&#x27;乔杉&#x27;,&#x27;123456&#x27;,&#x27;13588889999&#x27;,&#x27;2000-02-01&#x27;,&#x27;男&#x27;);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>创建订单表</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE orders (</span><br><span class="line">  oid varchar(32)   PRIMARY KEY, -- 订单id</span><br><span class="line">  ordertime datetime ,	-- 下单时间 </span><br><span class="line">  total double , -- 总金额</span><br><span class="line">  name varchar(20), -- 收货人姓名</span><br><span class="line">  telephone varchar(20) , -- 电话</span><br><span class="line">  address varchar(30) , -- 地址</span><br><span class="line">  state int(11) ,  -- 订单状态</span><br><span class="line">  uid varchar(32), -- 外键字段 对应用户表id</span><br><span class="line">  CONSTRAINT ofk_0001 FOREIGN KEY (uid) REFERENCES user (uid)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- 插入一条订单数据</span><br><span class="line">INSERT INTO orders </span><br><span class="line">VALUES(&#x27;order001&#x27;,&#x27;2019-10-11&#x27;,5500,&#x27;乔杉&#x27;,&#x27;15512342345&#x27;,&#x27;皇家洗浴&#x27;,0,&#x27;001&#x27;);</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>创建商品分类表</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE category (</span><br><span class="line">  cid varchar(32) PRIMARY KEY,</span><br><span class="line">  cname varchar(20)</span><br><span class="line">); </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO `category` VALUES (&#x27;1&#x27;,&#x27;手机数码&#x27;),(&#x27;2&#x27;,&#x27;电脑办公&#x27;),(&#x27;3&#x27;,&#x27;运动鞋服&#x27;),(&#x27;4&#x27;,&#x27;图书音像&#x27;);</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>创建商品表</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE product (</span><br><span class="line">  pid varchar(32)  PRIMARY KEY,	-- 商品id</span><br><span class="line">  pname varchar(50) , -- 商品名称 </span><br><span class="line">  price double, -- 商品价格</span><br><span class="line">  pdesc varchar(255), -- 商品描述</span><br><span class="line">  pflag int(11) , -- 商品状态 1 上架 ,0 下架</span><br><span class="line">  cid varchar(32) , -- 外键对应 分类表id</span><br><span class="line">  KEY sfk_0001 (cid), </span><br><span class="line">  CONSTRAINT sfk_0001 FOREIGN KEY (cid) REFERENCES category (cid)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO `product` VALUES </span><br><span class="line">(&#x27;1&#x27;,&#x27;小米6&#x27;,2200,&#x27;小米 移动联通电信4G手机 双卡双待&#x27;,0,&#x27;1&#x27;),</span><br><span class="line">(&#x27;2&#x27;,&#x27;华为Mate9&#x27;,2599,&#x27;华为 双卡双待 高清大屏&#x27;,0,&#x27;1&#x27;),</span><br><span class="line">(&#x27;3&#x27;,&#x27;OPPO11&#x27;,3000,&#x27;移动联通 双4G手机&#x27;,0,&#x27;1&#x27;),</span><br><span class="line">(&#x27;4&#x27;,&#x27;华为荣耀&#x27;,1499,&#x27;3GB内存标准版 黑色 移动4G手机&#x27;,0,&#x27;1&#x27;),</span><br><span class="line">(&#x27;5&#x27;,&#x27;华硕台式电脑&#x27;,5000,&#x27;爆款直降，满千减百&#x27;,0,&#x27;2&#x27;),</span><br><span class="line">(&#x27;6&#x27;,&#x27;MacBook&#x27;,6688,&#x27;128GB 闪存&#x27;,0,&#x27;2&#x27;),</span><br><span class="line">(&#x27;7&#x27;,&#x27;ThinkPad&#x27;,4199,&#x27;轻薄系列1)&#x27;,0,&#x27;2&#x27;),</span><br><span class="line">(&#x27;8&#x27;,&#x27;联想小新&#x27;,4499,&#x27;14英寸超薄笔记本电脑&#x27;,0,&#x27;2&#x27;),</span><br><span class="line">(&#x27;9&#x27;,&#x27;李宁音速6&#x27;,500,&#x27;实战篮球鞋&#x27;,0,&#x27;3&#x27;),</span><br><span class="line">(&#x27;10&#x27;,&#x27;AJ11&#x27;,3300,&#x27;乔丹实战系列&#x27;,0,&#x27;3&#x27;),</span><br><span class="line">(&#x27;11&#x27;,&#x27;AJ1&#x27;,5800,&#x27;精神小伙系列&#x27;,0,&#x27;3&#x27;);</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>订单项表 (中间表)</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- 订单项表</span><br><span class="line">CREATE TABLE orderitem (</span><br><span class="line">  itemid VARCHAR(32) PRIMARY KEY, -- 订单项ID</span><br><span class="line">  pid VARCHAR(32),  -- 外键 对应商品表 id</span><br><span class="line">  oid VARCHAR(32), -- 外键 对应订单表 id</span><br><span class="line">  KEY fk_0001 (pid),</span><br><span class="line">  KEY fk_0002 (oid),</span><br><span class="line">  CONSTRAINT fk_0001 FOREIGN KEY (pid) REFERENCES product (pid),</span><br><span class="line">  CONSTRAINT fk_0002 FOREIGN KEY (oid) REFERENCES orders (oid)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- 向中间表中插入两条数据</span><br><span class="line">INSERT INTO orderitem VALUES(&#x27;item001&#x27;,&#x27;1&#x27;,&#x27;order001&#x27;);</span><br><span class="line">INSERT INTO orderitem VALUES(&#x27;item002&#x27;,&#x27;11&#x27;,&#x27;order001&#x27;);</span><br></pre></td></tr></table></figure>

<h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app, 测试包 用于对DAO代码进行测试</span><br><span class="line">dao, dao包  数据访问层,包含所有对数据库的相关操作的类</span><br><span class="line">entity, 实体包 保存根据数据库表 对应创建的JavaBean类</span><br><span class="line">utils, 工具包</span><br></pre></td></tr></table></figure>

<h2 id="JavaBean类创建"><a href="#JavaBean类创建" class="headerlink" title="JavaBean类创建"></a>JavaBean类创建</h2><h3 id="3-1-设计用户与订单"><a href="#3-1-设计用户与订单" class="headerlink" title="3.1 设计用户与订单"></a>3.1 设计用户与订单</h3><h4 id="3-1-1-一对多关系分析"><a href="#3-1-1-一对多关系分析" class="headerlink" title="3.1.1 一对多关系分析"></a>3.1.1 一对多关系分析</h4><ul>
<li>在Java一对多的数据关系中，需要遵循以下设计原则：</li>
<li><ol>
<li>Java类的名称 = 实体表的名称</li>
<li>Java类的属性 = 实体表的字段</li>
<li>Java类的一个对象 = 表的一行记录</li>
<li>外键关系 = 引用配置</li>
</ol>
</li>
<li>一个用户拥有多个订单,所以 用户是一的一方, 订单是多的一方</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/L7WWWR"><img src="https://s1.ax1x.com/2022/04/26/L7WWWR.png" alt="L7WWWR.png"></a></p>
<h4 id="3-1-2-User类"><a href="#3-1-2-User类" class="headerlink" title="3.1.2 User类"></a>3.1.2 User类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *    用户表 对应 User类</span></span><br><span class="line"><span class="comment"> *   `uid` VARCHAR(32) NOT NULL,</span></span><br><span class="line"><span class="comment"> *   `username` VARCHAR(20) DEFAULT NULL,</span></span><br><span class="line"><span class="comment"> *   `password` VARCHAR(20) DEFAULT NULL,</span></span><br><span class="line"><span class="comment"> *   `telephone` VARCHAR(20) DEFAULT NULL,</span></span><br><span class="line"><span class="comment"> *   `birthday` DATE DEFAULT NULL,</span></span><br><span class="line"><span class="comment"> *   `sex` VARCHAR(10) DEFAULT NULL,</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String uid;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String telephone;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String birthday;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">//提供 get set toString方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-1-3-Orders类"><a href="#3-1-3-Orders类" class="headerlink" title="3.1.3 Orders类"></a>3.1.3 Orders类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *   订单表</span></span><br><span class="line"><span class="comment"> *   `oid` VARCHAR(32) NOT NULL,</span></span><br><span class="line"><span class="comment"> *   `ordertime` DATETIME DEFAULT NULL,</span></span><br><span class="line"><span class="comment"> *   `total` DOUBLE DEFAULT NULL,</span></span><br><span class="line"><span class="comment"> *   `name` VARCHAR(20) DEFAULT NULL,</span></span><br><span class="line"><span class="comment"> *   `telephone` VARCHAR(20) DEFAULT NULL,</span></span><br><span class="line"><span class="comment"> *   `address` VARCHAR(30) DEFAULT NULL,</span></span><br><span class="line"><span class="comment"> *   `state` INT(11) DEFAULT NULL,</span></span><br><span class="line"><span class="comment"> *   `uid` VARCHAR(32) DEFAULT NULL,</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Orders</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String oid; <span class="comment">//订单号</span></span><br><span class="line">    <span class="keyword">private</span> String ordertime; <span class="comment">//下单时间</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> total; <span class="comment">//订单的总金额</span></span><br><span class="line">    <span class="keyword">private</span> String name; <span class="comment">//收货人姓名</span></span><br><span class="line">    <span class="keyword">private</span> String telephone; <span class="comment">//收货人电话</span></span><br><span class="line">    <span class="keyword">private</span> String address;  <span class="comment">//收货人地址</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> state; <span class="comment">//订单状态 1 代表已支付 , 0 代表未支付</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//订单属于哪个用户呢 ?</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//提供 get set toString方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-1-4-Orders类设计分析"><a href="#3-1-4-Orders类设计分析" class="headerlink" title="3.1.4 Orders类设计分析"></a>3.1.4 Orders类设计分析</h4><ul>
<li><p>第一种方式</p>
<ul>
<li><p>根据两张表关系的描述  我们可以在 订单类中 添加一个uid 成员变量,表示订单属于哪个用户</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String uid;</span><br></pre></td></tr></table></figure></li>
<li><p>但是这样设计会存在一些问题,比如 我要查询的是订单是属于哪个用户的用户名 ? 但是我们只有一个uid</p>
</li>
</ul>
</li>
<li><p>第二种方式</p>
<ul>
<li><p>Java类表示一对多关系,可以在多的一方添加一个成员变量,这个成员变量的类型 就是一的一方的类型.</p>
</li>
<li><p>再在订单表中 添加一个 User对象,User对象中 ,保存该订单关联的用户的所有信息</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String uid;</span><br><span class="line"><span class="keyword">private</span> User user;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="3-1-4-修改Orders类"><a href="#3-1-4-修改Orders类" class="headerlink" title="3.1.4 修改Orders类"></a>3.1.4 修改Orders类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Orders</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String oid; <span class="comment">//订单号</span></span><br><span class="line">    <span class="keyword">private</span> String ordertime; <span class="comment">//下单时间</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> total; <span class="comment">//订单的总金额</span></span><br><span class="line">    <span class="keyword">private</span> String name; <span class="comment">//收货人姓名</span></span><br><span class="line">    <span class="keyword">private</span> String telephone; <span class="comment">//收货人电话</span></span><br><span class="line">    <span class="keyword">private</span> String address;  <span class="comment">//收货人地址</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> state; <span class="comment">//订单状态 1 代表已支付 , 0 代表未支付</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//订单属于哪个用户呢 ?</span></span><br><span class="line">    <span class="keyword">private</span> String uid; <span class="comment">//表示外键</span></span><br><span class="line">    <span class="keyword">private</span> User user; <span class="comment">//用来保存订单对应的详细的用户信息</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//提供 get set toString方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-设计商品与分类"><a href="#3-2-设计商品与分类" class="headerlink" title="3.2 设计商品与分类"></a>3.2 设计商品与分类</h3><p>分类与商品 同样是一对多关系,  我们可以在多的一方进行操作 添加一个成员变量 类型是一的一方的类型</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/L7fQk4"><img src="https://s1.ax1x.com/2022/04/26/L7fQk4.png" alt="L7fQk4.png"></a></p>
<h4 id="3-2-1-Category类"><a href="#3-2-1-Category类" class="headerlink" title="3.2.1 Category类"></a>3.2.1 Category类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Category</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String cid;</span><br><span class="line">    <span class="keyword">private</span> String cname;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//提供 get set toString方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-2-2-Product类"><a href="#3-2-2-Product类" class="headerlink" title="3.2.2 Product类"></a>3.2.2 Product类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String pid;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String pname;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> price;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String pdesc;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> pflag; <span class="comment">//是否上架 1 上架 ,0 下架</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String cid; <span class="comment">//外键 对应分类表主键</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Category category; <span class="comment">//用于保存Category的详细数据</span></span><br><span class="line">    </span><br><span class="line">     <span class="comment">//提供 get set toString方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-3-设计订单项"><a href="#3-3-设计订单项" class="headerlink" title="3.3 设计订单项"></a>3.3 设计订单项</h3><h4 id="3-3-1-多对多关系分析"><a href="#3-3-1-多对多关系分析" class="headerlink" title="3.3.1 多对多关系分析"></a>3.3.1 多对多关系分析</h4><p>商品与订单是多对多关系, 一个订单上可以有多个商品, 一个商品可以出现在多个订单中.</p>
<p>多对多建表原则 需要一张中间表,中间表中至少有两个字段,作为中间表的外键分别指向另外两张表的主键</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/L7f1h9"><img src="https://s1.ax1x.com/2022/04/26/L7f1h9.png" alt="L7f1h9.png"></a></p>
<h4 id="3-3-2-创建OrderItem"><a href="#3-3-2-创建OrderItem" class="headerlink" title="3.3.2 创建OrderItem"></a>3.3.2 创建OrderItem</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *   订单项表(中间表)</span></span><br><span class="line"><span class="comment"> *   `itemid` VARCHAR(32) NOT NULL,</span></span><br><span class="line"><span class="comment"> *   `pid` VARCHAR(32) DEFAULT NULL,</span></span><br><span class="line"><span class="comment"> *   `oid` VARCHAR(32) DEFAULT NULL,</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderItem</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//订单项 指的是中间表中的一条数据</span></span><br><span class="line">    <span class="keyword">private</span> String itemid; <span class="comment">//订单项的id</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String pid; <span class="comment">//外键 指向商品表主键</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String oid; <span class="comment">//外键 指向订单表的主键</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> Product product;<span class="comment">//订单项内部的商品详细信息</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Orders orders;<span class="comment">//订单项属于哪个订单</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="4-编写DAO类"><a href="#4-编写DAO类" class="headerlink" title="4.编写DAO类"></a>4.编写DAO类</h2><h3 id="4-1-UserDao"><a href="#4-1-UserDao" class="headerlink" title="4.1 UserDao"></a>4.1 UserDao</h3><ul>
<li>需求一: 编写一个注册用户的方法,接收的参数是一个User对象</li>
<li>需求二: 编写一个 用户登录的方法,接收的参数是 用户名 和密码, 返回值是User对象</li>
</ul>
<h4 id="4-1-1-编写UserDao"><a href="#4-1-1-编写UserDao" class="headerlink" title="4.1.1 编写UserDao"></a>4.1.1 编写UserDao</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 注册用户</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">register</span><span class="params">(User user)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.获取QueryRunner</span></span><br><span class="line">        QueryRunner qr = <span class="keyword">new</span> QueryRunner(DruidUtils.getDataSource());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.编写SQL</span></span><br><span class="line">        String sql = <span class="string">&quot;insert into user values(?,?,?,?,?,?)&quot;</span>;</span><br><span class="line"></span><br><span class="line">        Object[] param = &#123;user.getUid(), user.getUsername(), user.getPassword(),</span><br><span class="line">                user.getTelephone(), user.getBirthday(), user.getSex()&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.执行插入操作</span></span><br><span class="line">        <span class="keyword">int</span> update = qr.update(sql,param);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.返回受影响的行数</span></span><br><span class="line">        <span class="keyword">return</span> update;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户注册</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">login</span><span class="params">(String username , String password)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">        QueryRunner qr = <span class="keyword">new</span> QueryRunner(DruidUtils.getDataSource());</span><br><span class="line"></span><br><span class="line">        String sql = <span class="string">&quot;select * from user where username = ? and password = ?&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//返回的是一个User对象 使用BeanHandler将结果集的第一条和数据封装到一个Javabean中</span></span><br><span class="line">        User user = qr.query(sql, <span class="keyword">new</span> BeanHandler&lt;User&gt;(User.class), username, password);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-1-2-测试注册与登录功能"><a href="#4-1-2-测试注册与登录功能" class="headerlink" title="4.1.2 测试注册与登录功能"></a>4.1.2 测试注册与登录功能</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestUserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建UserDao</span></span><br><span class="line">    UserDao userDao = <span class="keyword">new</span> UserDao();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//测试注册功能</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testRegister</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1. 创建User对象</span></span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 对User对象进行赋值</span></span><br><span class="line">        user.setUid(UUIDUtils.getUUID());</span><br><span class="line">        user.setUsername(<span class="string">&quot;大郎&quot;</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;654321&quot;</span>);</span><br><span class="line">        user.setTelephone(<span class="string">&quot;15052005200&quot;</span>);</span><br><span class="line">        user.setSex(<span class="string">&quot;男&quot;</span>);</span><br><span class="line">        user.setBirthday(DateUtils.getDateFormart());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.执行注册</span></span><br><span class="line">        <span class="keyword">int</span> register = userDao.register(user);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.判断注册是否成功</span></span><br><span class="line">        <span class="keyword">if</span>(register &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;注册成功,欢迎您: &quot;</span> + user.getUsername());</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;注册失败! !&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//测试登录功能</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testLogin</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//调用UserDao的 login方法,传入用户名密码</span></span><br><span class="line">        User user = userDao.login(<span class="string">&quot;大郎&quot;</span>, <span class="string">&quot;654321&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//判断user不为空 登录成功</span></span><br><span class="line">        <span class="keyword">if</span>(user != <span class="keyword">null</span>)&#123;</span><br><span class="line">            System.out.println(user.getUsername() +<span class="string">&quot; 欢迎您!&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;用户名或者密码错误! !&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>其他工具类如下</strong></p>
<p>UUIDUtils工具类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.de.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * UUID是指在一台机器上生成的数字，它保证对在同一时空中的所有机器都是唯一的。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * UUID由以下几部分的组合：</span></span><br><span class="line"><span class="comment"> *  1.当前日期和时间，UUID的第一个部分与时间有关，如果你在生成一个UUID之后，过几秒又生成一个UUID，则第一个部分不同，其余相同。</span></span><br><span class="line"><span class="comment"> *  2.时钟序列。</span></span><br><span class="line"><span class="comment"> *  3.全局唯一的IEEE机器识别号，如果有网卡，从网卡MAC地址获得，没有网卡以其他方式获得。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UUIDUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取UUID的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getUUID</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> UUID.randomUUID().toString().replace(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>DateUtils工具类</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package org.de.utils;</span><br><span class="line"></span><br><span class="line">import java.text.SimpleDateFormat;</span><br><span class="line">import java.util.Date;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 获取日期对象 格式化后的字符串</span><br><span class="line"> */</span><br><span class="line">public class DateUtils &#123;</span><br><span class="line"></span><br><span class="line">    public static String getDateFormat()&#123;</span><br><span class="line"></span><br><span class="line">        Date date = new Date();</span><br><span class="line"></span><br><span class="line">        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);</span><br><span class="line"></span><br><span class="line">        String s = sdf.format(date);</span><br><span class="line"></span><br><span class="line">        return s;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-ProductDao"><a href="#4-2-ProductDao" class="headerlink" title="4.2 ProductDao"></a>4.2 ProductDao</h3><ul>
<li><p>需求1: 根据商品ID 获取商品名称 ,商品价格 以及商品所属分类的名称</p>
<ul>
<li>参数 pid, 返回值 product对象</li>
</ul>
</li>
<li><p>需求2: 根据分类ID 获取商品分类信息</p>
<ul>
<li>参数 cid , 返回值 category对象</li>
</ul>
</li>
<li><p>需求3: 查询指定分类ID 下的商品个数</p>
<ul>
<li>参数 cid , 返回值 int类型 商品个数</li>
</ul>
</li>
<li><p>需求4: 查询指定分类ID 下的所有商品信息</p>
<ul>
<li>参数分类ID ,返回值 List集合 集合中保存商品对象</li>
</ul>
</li>
</ul>
<h4 id="4-2-1-编写-ProductDao"><a href="#4-2-1-编写-ProductDao" class="headerlink" title="4.2.1 编写 ProductDao"></a>4.2.1 编写 ProductDao</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1.根据商品ID 获取商品名称 ,商品价格 以及商品所属分类的名称</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Product <span class="title">findProductById</span><span class="params">(String pid)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">        QueryRunner qr = <span class="keyword">new</span> QueryRunner(DruidUtils.getDataSource());</span><br><span class="line"></span><br><span class="line">        String sql = <span class="string">&quot;select * from product where pid = ?&quot;</span>;</span><br><span class="line"></span><br><span class="line">        Product product = qr.query(sql, <span class="keyword">new</span> BeanHandler&lt;Product&gt;(Product.class), pid);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//调用 findCategoryById()方法, 传递外键cid 获取商品对应 的分类信息</span></span><br><span class="line">        Category category = findCategoryById(product.getCid());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//将category保存到商品对象中</span></span><br><span class="line">        product.setCategory(category);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> product;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.根据分类ID 获取商品分类信息</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Category <span class="title">findCategoryById</span><span class="params">(String cid)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">        QueryRunner qr = <span class="keyword">new</span> QueryRunner(DruidUtils.getDataSource());</span><br><span class="line"></span><br><span class="line">        String sql = <span class="string">&quot;select * from category where cid = ?&quot;</span>;</span><br><span class="line"></span><br><span class="line">        Category category = qr.query(sql, <span class="keyword">new</span> BeanHandler&lt;Category&gt;(Category.class),cid);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> category;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.查询指定分类ID 下的商品个数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">(String cid)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        QueryRunner qr = <span class="keyword">new</span> QueryRunner(DruidUtils.getDataSource());</span><br><span class="line"></span><br><span class="line">        String sql = <span class="string">&quot;select count(*) from product where cid = ?&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取的单列数据 ,使用ScalarHandler 封装</span></span><br><span class="line">        Long count = (Long)qr.query(sql,<span class="keyword">new</span> ScalarHandler&lt;&gt;(),cid);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//将Lang类型转换为 int 类型,并返回</span></span><br><span class="line">        <span class="keyword">return</span> count.intValue();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//4.查询指定分类下的所有商品信息</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Product&gt; <span class="title">findProductByCid</span><span class="params">(String cid)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        </span><br><span class="line">        QueryRunner qr = <span class="keyword">new</span> QueryRunner(DruidUtils.getDataSource());</span><br><span class="line">        </span><br><span class="line">        String sql = <span class="string">&quot;select * from product where cid = ?&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//查询结果是一个List集合, 使用BeanListHandler 封装结果集</span></span><br><span class="line">        List&lt;Product&gt; list = qr.query(sql, <span class="keyword">new</span> BeanListHandler&lt;Product&gt;(Product.class), cid);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="4-2-2-测试-ProductDao"><a href="#4-2-2-测试-ProductDao" class="headerlink" title="4.2.2 测试 ProductDao"></a>4.2.2 测试 ProductDao</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestProductDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    ProductDao productDao = <span class="keyword">new</span> ProductDao();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1.测试 根据商品ID 获取商品名称 ,商品价格 以及商品所属分类的名称</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindProductById</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">        Product product = productDao.findProductById(<span class="string">&quot;1&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;商品名称: &quot;</span>+product.getPname()+ <span class="string">&quot;, 商品价格: &quot;</span> + product.getPrice() +</span><br><span class="line">                <span class="string">&quot;, 商品所属分类: &quot;</span>+ product.getCategory().getCname());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.测试 查询指定分类ID下的商品数</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testGetCount</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//查询 cid为3的分类下有多少个商品</span></span><br><span class="line">        <span class="keyword">int</span> count = productDao.getCount(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;分类ID为3的分类下商品个数: &quot;</span> + count);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.测试 查询指定分类下的所有商品信息</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindProductByCid</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//查询cid为 2的分类下 所有的商品信息</span></span><br><span class="line">        List&lt;Product&gt; list = productDao.findProductByCid(<span class="string">&quot;2&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Product product : list) &#123;</span><br><span class="line">            System.out.println(product);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-OrdersDao"><a href="#4-3-OrdersDao" class="headerlink" title="4.3 OrdersDao"></a>4.3 OrdersDao</h3><h4 id="4-3-1-多对一分析"><a href="#4-3-1-多对一分析" class="headerlink" title="4.3.1 多对一分析"></a>4.3.1 多对一分析</h4><p>OrderItem表与Orders表的关系是 多对一</p>
<p>之前我们一直是在描述一对多,那么我们再反向描述一下 多对一</p>
<p>方式是在Orders中应该有一个 集合用来保存订单中的订单项信息</p>
<p>在Orders类中添加 订单项的集合</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//该订单中有多少订单项</span></span><br><span class="line">  List&lt;OrderItem&gt; orderItems = <span class="keyword">new</span> ArrayList&lt;OrderItem&gt;();</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> List&lt;OrderItem&gt; <span class="title">getOrderItems</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> orderItems;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOrderItems</span><span class="params">(List&lt;OrderItem&gt; orderItems)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.orderItems = orderItems;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>



<h4 id="4-3-2-创建OrdersDao"><a href="#4-3-2-创建OrdersDao" class="headerlink" title="4.3.2 创建OrdersDao"></a>4.3.2 创建OrdersDao</h4><ul>
<li><p>需求1: 获取 uid为 001 的用户的所有订单信息</p>
</li>
<li><p>参数 uid, 返回值 LIst<Orders> 订单集合 </p>
</li>
<li><p>需求2: 获取订单编号为 order001的订单中的所有商品信息</p>
<ul>
<li>参数 oid, 返回值List<Product> 商品集合</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 获取订单编号为: order001的订单中的所有商品信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1.查询订单项表中 oid是order001的 所有商品信息</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">	oi.pid</span><br><span class="line"><span class="keyword">FROM</span> orderitem oi <span class="keyword">WHERE</span> oid <span class="operator">=</span> <span class="string">&#x27;order001&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.将上面的查询语句作为in函数的条件, 查询product表</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> product <span class="keyword">WHERE</span> pid <span class="keyword">IN</span></span><br><span class="line">(<span class="keyword">SELECT</span> </span><br><span class="line">	oi.pid</span><br><span class="line"><span class="keyword">FROM</span> orderitem oi <span class="keyword">WHERE</span> oid <span class="operator">=</span> <span class="string">&#x27;order001&#x27;</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrdersDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//需求1: 获取 uid为 001 的用户的所有订单信息</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Orders&gt;  <span class="title">findAllOrders</span><span class="params">(String uid)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">        QueryRunner qr = <span class="keyword">new</span> QueryRunner(DruidUtils.getDataSource());</span><br><span class="line"></span><br><span class="line">        String sql = <span class="string">&quot;select * from orders where uid = ?&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//一个用户所有的订单信息</span></span><br><span class="line">        List&lt;Orders&gt; ordersList = qr.query(sql, <span class="keyword">new</span> BeanListHandler&lt;Orders&gt;(Orders.class), uid);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ordersList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//需求2: 获取订单编号为 order001的订单中的所有商品信息</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Product&gt; <span class="title">findOrderById</span><span class="params">(String oid)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">        QueryRunner qr = <span class="keyword">new</span> QueryRunner(DruidUtils.getDataSource());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.查询订单项表 获取订单项表中 订单ID为order001的数据</span></span><br><span class="line">        String sql = <span class="string">&quot;SELECT * FROM orderitem WHERE oid = ? &quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.查询的结果是 多条订单项数据</span></span><br><span class="line">        List&lt;OrderItem&gt; list = qr.query(sql, <span class="keyword">new</span> BeanListHandler&lt;OrderItem&gt;(OrderItem.class), oid);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.创建集合保存商品信息</span></span><br><span class="line">        List&lt;Product&gt; productList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        ProductDao productDao = <span class="keyword">new</span> ProductDao();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.遍历订单项集合 获取Pid</span></span><br><span class="line">        <span class="keyword">for</span> (OrderItem orderItem : list) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//4.1从orderitem中获取 pid</span></span><br><span class="line">            String pid = orderItem.getPid();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//4.2 调用productDao</span></span><br><span class="line">            Product product = productDao.findProductById(pid);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//4.3 保存到集合</span></span><br><span class="line">            productList.add(product);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//返回 订单中对应的商品信息</span></span><br><span class="line">        <span class="keyword">return</span> productList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-3-3-测试OrdersDao"><a href="#4-3-3-测试OrdersDao" class="headerlink" title="4.3.3 测试OrdersDao"></a>4.3.3 测试OrdersDao</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestOrderDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    OrdersDao ordersDao = <span class="keyword">new</span> OrdersDao();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1.获取 uid为 001 的用户的所有订单信息</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindAllOrders</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;Orders&gt; allOrders = ordersDao.findAllOrders(<span class="string">&quot;001&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//遍历打印订单信息</span></span><br><span class="line">        <span class="keyword">for</span> (Orders order : allOrders) &#123;</span><br><span class="line">            System.out.println(order);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//测试 获取订单编号为: order001的订单中的所有商品信息</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindOrderById</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;Product&gt; list = ordersDao.findOrderById(<span class="string">&quot;order001&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;订单编号为order001中的商品有: &quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (Product product : list) &#123;</span><br><span class="line">            System.out.println(product);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
































































    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>感谢老铁的支持！</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.jpg" alt="唧唧歪歪 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="/images/alipay.jpg" alt="唧唧歪歪 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/MySQL/" rel="tag"><i class="fa fa-tag"></i> MySQL</a>
              <a href="/tags/java/" rel="tag"><i class="fa fa-tag"></i> java</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/03/09/MySQL/" rel="prev" title="MySQL">
                  <i class="fa fa-chevron-left"></i> MySQL
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/04/29/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0/" rel="next" title="前端学习">
                  前端学习 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments" id="lv-container" data-id="city" data-uid="MTAyMC81MzYzOC8zMDExMQ=="></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">唧唧歪歪</span>
</div>
<div class="busuanzi-count">
</div>

<!--
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div> -->

    </div>
  </footer>

  
  <script size="300" alpha="0.6" zIndex="-1" src="https://cdn.jsdelivr.net/npm/ribbon.js@1.0.2/dist/ribbon.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  



  <script class="next-config" data-name="nprogress" type="application/json">{"enable":true,"spinner":true}</script>
  <script src="/js/third-party/nprogress.js"></script>

  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<script src="/js/third-party/comments/livere.js"></script>

</body>
</html>
