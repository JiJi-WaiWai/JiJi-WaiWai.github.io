<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.css" integrity="sha256-no0c5ccDODBwp+9hSmV5VvPpKwHCpbVzXHexIkupM6U=" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.js" integrity="sha256-a5YRB27CcBwBFcT5EF/f3E4vzIqyHrSR878nseNYw64=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"jiji-waiwai.github.io","root":"/","images":"/images","scheme":"Gemini","version":"8.6.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"livere","storage":true,"lazyload":false,"nav":null,"activeClass":"livere"},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="一篇关于java web的笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="javaWeb">
<meta property="og:url" content="https://jiji-waiwai.github.io/2022/06/14/javaWeb/index.html">
<meta property="og:site_name" content="De&#39;s Blog">
<meta property="og:description" content="一篇关于java web的笔记">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s1.ax1x.com/2022/06/14/X4F1PJ.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/06/14/X4FNqK.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/06/14/X4nHV1.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/06/14/X43Paj.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/06/29/jmYtC4.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/06/29/jmNYc9.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/06/29/jmNx4U.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/06/29/jnlTYj.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/07/05/jNSU0O.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/07/05/jNEE9S.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/07/05/jNE6jH.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/07/05/jNZOhV.png">
<meta property="article:published_time" content="2022-06-14T05:33:56.000Z">
<meta property="article:modified_time" content="2022-07-14T01:32:09.176Z">
<meta property="article:author" content="唧唧歪歪">
<meta property="article:tag" content="java">
<meta property="article:tag" content="web">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s1.ax1x.com/2022/06/14/X4F1PJ.png">


<link rel="canonical" href="https://jiji-waiwai.github.io/2022/06/14/javaWeb/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://jiji-waiwai.github.io/2022/06/14/javaWeb/","path":"2022/06/14/javaWeb/","title":"javaWeb"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>javaWeb | De's Blog</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>
  <a target="_blank" rel="noopener" href="https://GitHub.com/JiJi-WaiWai" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#FD6C6C; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">De's Blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Servlet%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%EF%BC%88%E4%B8%8A%EF%BC%89"><span class="nav-number">1.</span> <span class="nav-text">Servlet核心技术（上）</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-number">1.1.</span> <span class="nav-text">基本概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Tomcat%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">1.2.</span> <span class="nav-text">Tomcat服务器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Servlet"><span class="nav-number">1.3.</span> <span class="nav-text">Servlet</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Servlet%E7%BC%96%E7%A8%8B%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.3.1.</span> <span class="nav-text">Servlet编程步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Servlet%E6%8E%A5%E5%8F%A3"><span class="nav-number">1.3.2.</span> <span class="nav-text">Servlet接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GenericServlet%E7%B1%BB"><span class="nav-number">1.3.3.</span> <span class="nav-text">GenericServlet类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HttpServlet%E7%B1%BB"><span class="nav-number">1.3.4.</span> <span class="nav-text">HttpServlet类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Servlet%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">1.3.5.</span> <span class="nav-text">Servlet生命周期</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#POST%E5%92%8CGET%E8%AF%B7%E6%B1%82"><span class="nav-number">1.3.6.</span> <span class="nav-text">POST和GET请求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ServletRequest%E6%8E%A5%E5%8F%A3"><span class="nav-number">1.3.7.</span> <span class="nav-text">ServletRequest接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HttpServletRequest%E6%8E%A5%E5%8F%A3"><span class="nav-number">1.3.8.</span> <span class="nav-text">HttpServletRequest接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ServletResponse%E6%8E%A5%E5%8F%A3"><span class="nav-number">1.3.9.</span> <span class="nav-text">ServletResponse接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HttpServletResponse%E6%8E%A5%E5%8F%A3"><span class="nav-number">1.3.10.</span> <span class="nav-text">HttpServletResponse接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ServletConfig%E6%8E%A5%E5%8F%A3"><span class="nav-number">1.3.11.</span> <span class="nav-text">ServletConfig接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ServletContext%E6%8E%A5%E5%8F%A3"><span class="nav-number">1.3.12.</span> <span class="nav-text">ServletContext接口</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Servlet-%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%EF%BC%88%E4%B8%8B%EF%BC%89"><span class="nav-number">2.</span> <span class="nav-text">Servlet 核心技术（下）</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Servlet-JDBC%E5%BA%94%E7%94%A8"><span class="nav-number">2.1.</span> <span class="nav-text">Servlet+JDBC应用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">2.2.</span> <span class="nav-text">重定向</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BD%AC%E5%8F%91"><span class="nav-number">2.3.</span> <span class="nav-text">转发</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Serblet%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8"><span class="nav-number">2.4.</span> <span class="nav-text">Serblet线程安全</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="nav-number">2.5.</span> <span class="nav-text">状态管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Cookie"><span class="nav-number">2.6.</span> <span class="nav-text">Cookie</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Session"><span class="nav-number">2.7.</span> <span class="nav-text">Session</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JSP"><span class="nav-number">3.</span> <span class="nav-text">JSP</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#jsp%E8%AF%AD%E6%B3%95%E8%A7%A3%E6%9E%84"><span class="nav-number">3.1.</span> <span class="nav-text">jsp语法解构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A3%B0%E6%98%8E%E5%8C%BA"><span class="nav-number">3.2.</span> <span class="nav-text">声明区</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A8%8B%E5%BA%8F%E4%BB%A3%E7%A0%81%E5%8C%BA"><span class="nav-number">3.3.</span> <span class="nav-text">程序代码区</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">3.4.</span> <span class="nav-text">表达式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8%E9%87%8A"><span class="nav-number">3.5.</span> <span class="nav-text">注释</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%87%E4%BB%A4"><span class="nav-number">3.6.</span> <span class="nav-text">指令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8A%A8%E4%BD%9C"><span class="nav-number">3.7.</span> <span class="nav-text">动作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSP%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="nav-number">3.8.</span> <span class="nav-text">JSP内置对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#out%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="nav-number">3.8.1.</span> <span class="nav-text">out内置对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#request%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="nav-number">3.8.2.</span> <span class="nav-text">request内置对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#response%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="nav-number">3.8.3.</span> <span class="nav-text">response内置对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#session%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="nav-number">3.8.4.</span> <span class="nav-text">session内置对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#application%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="nav-number">3.8.5.</span> <span class="nav-text">application内置对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pageContext%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="nav-number">3.8.6.</span> <span class="nav-text">pageContext内置对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#exception%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="nav-number">3.8.7.</span> <span class="nav-text">exception内置对象</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JavaBean%E7%BB%84%E4%BB%B6"><span class="nav-number">3.9.</span> <span class="nav-text">JavaBean组件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MVC%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="nav-number">4.</span> <span class="nav-text">MVC设计模式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#EL"><span class="nav-number">5.</span> <span class="nav-text">EL</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="nav-number">5.1.</span> <span class="nav-text">访问内置对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="nav-number">5.2.</span> <span class="nav-text">访问请求参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BF%E9%97%AEBean%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="nav-number">5.3.</span> <span class="nav-text">访问Bean对象的属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E9%9B%86%E5%90%88%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="nav-number">5.4.</span> <span class="nav-text">访问集合中的数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="nav-number">5.5.</span> <span class="nav-text">常用内置对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">5.6.</span> <span class="nav-text">常用运算符</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JSTL"><span class="nav-number">6.</span> <span class="nav-text">JSTL</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="nav-number">6.1.</span> <span class="nav-text">使用方式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E6%A0%B8%E5%BF%83%E6%A0%87%E7%AD%BE"><span class="nav-number">6.2.</span> <span class="nav-text">常用核心标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0%E6%A0%87%E7%AD%BE"><span class="nav-number">6.3.</span> <span class="nav-text">常用函数标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%A0%87%E7%AD%BE"><span class="nav-number">6.4.</span> <span class="nav-text">常用格式化标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%87%E7%AD%BE"><span class="nav-number">6.5.</span> <span class="nav-text">自定义标签</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Filter"><span class="nav-number">7.</span> <span class="nav-text">Filter</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F-1"><span class="nav-number">7.1.</span> <span class="nav-text">使用方式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Filter%E6%8E%A5%E5%8F%A3"><span class="nav-number">7.2.</span> <span class="nav-text">Filter接口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FilterConfig%E6%8E%A5%E5%8F%A3"><span class="nav-number">7.3.</span> <span class="nav-text">FilterConfig接口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E4%B8%AA%E8%BF%87%E6%BB%A4%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">7.4.</span> <span class="nav-text">多个过滤器的使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%87%E6%BB%A4%E5%99%A8%E4%BC%98%E7%82%B9"><span class="nav-number">7.5.</span> <span class="nav-text">过滤器优点</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Listener"><span class="nav-number">8.</span> <span class="nav-text">Listener</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%91%E5%90%AC%E5%99%A8%E8%AF%A6%E8%A7%A3"><span class="nav-number">8.1.</span> <span class="nav-text">监听器详解</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B"><span class="nav-number">8.2.</span> <span class="nav-text">案例</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="唧唧歪歪"
      src="/images/1.jpg">
  <p class="site-author-name" itemprop="name">唧唧歪歪</p>
  <div class="site-description" itemprop="description">踏上新征程----go！！！</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">15</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/JiJi-WaiWai" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;JiJi-WaiWai" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:1753645532@qq.com" title="E-Mail → mailto:1753645532@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://tool.gljlw.com/qq/?qq=1753645532" title="http:&#x2F;&#x2F;tool.gljlw.com&#x2F;qq&#x2F;?qq&#x3D;1753645532" rel="noopener" target="_blank">加qq</a>
        </li>
    </ul>
  </div>

          </div>
        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jiji-waiwai.github.io/2022/06/14/javaWeb/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/1.jpg">
      <meta itemprop="name" content="唧唧歪歪">
      <meta itemprop="description" content="踏上新征程----go！！！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="De's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          javaWeb
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-06-14 13:33:56" itemprop="dateCreated datePublished" datetime="2022-06-14T13:33:56+08:00">2022-06-14</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-07-14 09:32:09" itemprop="dateModified" datetime="2022-07-14T09:32:09+08:00">2022-07-14</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/javaWeb/" itemprop="url" rel="index"><span itemprop="name">javaWeb</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>一篇关于java web的笔记</p>
<span id="more"></span>

<h1 id="Servlet核心技术（上）"><a href="#Servlet核心技术（上）" class="headerlink" title="Servlet核心技术（上）"></a>Servlet核心技术（上）</h1><h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><p><strong>C/S架构</strong></p>
<ul>
<li><p>C/S架构（Client/Server，客户端/服务器模式），是一种比较早的软件体系结构，也是生活中很常见的结构。这种结构将需要处理的业务合理地分配到客户端和服务器端，客户端通常负责完成与用户的交互任务，服务器通常负责数据的管理。</p>
</li>
<li><p>C/S架构的主要优点如下：<br>客户端的界面和功能可以很丰富。<br>应用服务器的负荷较轻。<br>响应速度较快。</p>
</li>
<li><p>C/S架构的主要缺点如下：<br>适用面窄，用户群固定。<br>维护和升级的成本高，所有的客户端都需要更新版本。</p>
</li>
</ul>
<p><strong>B/S架构</strong></p>
<ul>
<li><p>B/S架构（Browser/Server，浏览器/服务器模式），是互联网兴起后的软件体系结构，该结构将系统功能实现的主要业务逻辑集中到服务器端，极少数业务逻辑在浏览器实现，浏览器通常负责完<br>成与用户的交互任务，服务器通常负责数据的管理。</p>
</li>
<li><p>B/S架构的主要优点如下：<br>无需安装客户端，只要有浏览器即可。<br>适用面广，用户群不固定。<br>通过权限控制实现多客户访问的目的，交互性较强。<br>维护和升级的成本低，无需更新所有客户端版本。</p>
</li>
<li><p>B/S架构的主要缺点如下：<br>应用服务器的负荷较重。<br>浏览器的界面和功能想要达到客户端的丰富程度需要花费大量的成本。<br>在跨浏览器上不尽如人意，适配比较麻烦。</p>
</li>
</ul>
<p><strong>java web</strong></p>
<ul>
<li><p>Web本意为网页的含义，这里表示互联网上供外界访问的资源。</p>
</li>
<li><p>互联网上供外界访问的资源主要分为以下两种：<br>静态资源：主要指Web页面中供人们浏览的数据始终是不变。<br>动态资源：主要指Web页面中供人们浏览的数据由程序产生，不同时间点访问页面看到的内容各不相同。</p>
</li>
<li><p>JavaWeb主要指使用Java语言进行动态Web资源开发技术的统称，是解决相关Web互联网领域的技术总和。</p>
</li>
<li><p>早期B/S架构<br><a target="_blank" rel="noopener" href="https://imgtu.com/i/X4F1PJ"><img src="https://s1.ax1x.com/2022/06/14/X4F1PJ.png" alt="X4F1PJ.png"></a></p>
</li>
<li><p>后来的B/S架构<br><a target="_blank" rel="noopener" href="https://imgtu.com/i/X4FNqK"><img src="https://s1.ax1x.com/2022/06/14/X4FNqK.png" alt="X4FNqK.png"></a></p>
</li>
</ul>
<p><strong>HTTP协议</strong></p>
<ul>
<li><p>HTTP协议（HyperText Transfer Protocol，超文本传输协议）是由W3C（万维网联盟）组织制定的一种应用层协议，是用来规范浏览器与Web服务器之间如何通讯的数据格式，主要涉及浏览器的发请求格式和服务器的响应格式。</p>
</li>
<li><p>HTTP协议通常承载于TCP协议之上，而承载于TLS或SSL协议层之上的协议就是常说的HTTPS协议。</p>
</li>
<li><p>HTTP默认的端口号为80，HTTPS默认的端口号为443。</p>
</li>
<li><p>HTTP协议请求格式：<br>客户端发送一个HTTP请求到服务器的请求消息主要包括：请求行、请求头、空白行和请求体。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1,请求行用来说明请求类型和要访问的资源以及所使用的HTTP版本，格式如下： </span><br><span class="line">	请求类型 请求的路径 协议的版本(1.1) </span><br><span class="line">2,请求头是紧接着请求行（即第一行）之后的部分，用来说明服务器要使用的附加信息，格式 （key:value）： 	主机 请求长度 请求的浏览器相关信息 </span><br><span class="line">2,空白行就是请求头部的空行，即使后面的请求数据为空则必须有空行。 </span><br><span class="line">4,请求体也叫请求数据，可以添加任意的其他数据。</span><br></pre></td></tr></table></figure>

<p>举例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">POST /task01_demo01/demo1.html HTTP/1.1 </span><br><span class="line">Host: localhost:8088 </span><br><span class="line">Content-Length: 21 </span><br><span class="line">Cache-Control: max-age=0 </span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64)</span><br><span class="line"></span><br><span class="line">name=scott&amp;pwd=123456</span><br></pre></td></tr></table></figure></li>
<li><p>HTTP响应格式:<br>通常情况下服务器接收并处理客户端发过来的请求后会返回一个HTTP的响应消息，主要包括：响应行、响应头、空白行和响应体。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1,响应行用来说明HTTP协议版本号和状态码以及状态消息，格式如下： </span><br><span class="line">	协议的版本(1.0 1.1) 状态码 (200 成功 404 路径错误 500 服务错误) 状态信息 </span><br><span class="line">2,响应头用来说明客户端要使用的一些附加信息，格式（key:value）。 </span><br><span class="line">3,空白行就是响应头部的空行，即使后面的请求数据为空则必须有空行。 </span><br><span class="line">3,响应体用来服务器返回给客户端的文本信息。</span><br></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK </span><br><span class="line">Content-Type: text/html </span><br><span class="line">Content-Length: 588 </span><br><span class="line">Date: Thu, 08 Sep 2021 12:59:54 GMT </span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head&gt;&lt;title&gt;示例1&lt;/title&gt;&lt;/head&gt; </span><br><span class="line">	&lt;body&gt;&lt;h1&gt;这是一个HTML页面&lt;/h1&gt;&lt;/body&gt; </span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="Tomcat服务器"><a href="#Tomcat服务器" class="headerlink" title="Tomcat服务器"></a>Tomcat服务器</h2><ul>
<li>Tomcat本意为公猫的含义，最初是由Sun公司的软件架构师詹姆斯·邓肯·戴维森开发的，后来他帮助将其变为开源项目并由Sun公司贡献给Apache软件基金会。</li>
<li>Tomcat 服务器是一个开源的轻量级Web应用服务器，在中小型系统和并发量小的场合下被普遍使用，是开发和调试Servlet、JSP 程序的首选。</li>
</ul>
<p>下载地址：<a target="_blank" rel="noopener" href="http://tomcat.apache.org/">http://tomcat.apache.org/</a></p>
<p><strong>目录解构</strong></p>
<p>bin 主要存放二进制可执行文件和脚本。<br>conf 主要存放各种配置文件。<br>lib 主要用来存放Tomcat运行需要加载的jar包。<br>logs 主要存放Tomcat在运行过程中产生的日志文件。<br>temp 主要存放Tomcat在运行过程中产生的临时文件。<br>webapps 主要存放应用程序，当Tomcat启动时会去加载该目录下的应用程序。<br>work 主要存放tomcat在运行时的编译后文件，例如JSP编译后的文件。</p>
<p><strong>启动和关闭</strong></p>
<p>启动：使用bin目录下的批处理文件startup.bat来启动Tomcat服务器，若出现一个毫秒数说明启动成功。</p>
<p>关闭：使用bin目录下的批处理文件shutdown.bat来关闭Tomcat服务器。 </p>
<p>注意：1，启动之前首先安装JDK并配置环境变量JAVA_HOME。<br>2，若希望Tomcat服务器可以在任意路径启动，则需要配置环境变量CATALINA_HOME。</p>
<p><strong>配置文件</strong></p>
<ul>
<li><p>启动信息乱码的处理方式：logging.properties文件修改为java.util.logging.ConsoleHandler.encoding = GBK</p>
</li>
<li><p>server.xml文件是服务器的主配置文件，可以设置端口号、设置域名或IP、默认加载的项目、请求编码等。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">&quot;8888&quot;</span> </span></span><br><span class="line"><span class="tag"><span class="attr">protocol</span>=<span class="string">&quot;HTTP/1.1&quot;</span> </span></span><br><span class="line"><span class="tag"><span class="attr">connectionTimeout</span>=<span class="string">&quot;20000&quot;</span> </span></span><br><span class="line"><span class="tag"><span class="attr">redirectPort</span>=<span class="string">&quot;8443&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>tomcat-users.xml文件用来配置管理Tomcat服务器的用户与权限 。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">role</span> <span class="attr">rolename</span>=<span class="string">&quot;manager-gui&quot;</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">user</span> <span class="attr">username</span>=<span class="string">&quot;admin&quot;</span> <span class="attr">password</span>=<span class="string">&quot;123456&quot;</span> <span class="attr">roles</span>=<span class="string">&quot;manager-gui&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>IDEA创建java web项目</strong></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/X4nHV1"><img src="https://s1.ax1x.com/2022/06/14/X4nHV1.png" alt="X4nHV1.png"></a></p>
<h2 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h2><ul>
<li>Servlet（Server Applet）是Java Servlet的简称，称为小服务程序或服务连接器，是Java语言编写的服务器端程序，换句话说，Servlet就是运行在服务器上的Java类。</li>
<li>Servlet用来完成B/S架构下客户端请求的响应处理，也就是交互式地浏览和生成数据，生成动态Web内容。</li>
</ul>
<h3 id="Servlet编程步骤"><a href="#Servlet编程步骤" class="headerlink" title="Servlet编程步骤"></a>Servlet编程步骤</h3><ul>
<li><p>建立一个Java Web Application项目并配置Tomcat服务器。</p>
</li>
<li><p>自定义类实现Servlet接口，或继承GenericServlet类，或继承 HttpServlet类（推荐） 。</p>
</li>
<li><p>将自定义类的信息配置到 web.xml文件并启动项目，配置方式如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置Servlet --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!-- HelloServlet是Servlet类的别名 --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span> HelloServlet <span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!-- com.lagou.task01.HelloServlet是包含路径的真实的Servlet类名 --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span> com.lagou.task01.HelloServlet <span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 映射Servlet --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!-- HelloServlet是Servlet类的别名，与上述名称必须相同 --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span> HelloServlet <span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!-- /hello是供浏览器使用的地址 --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span> /hello <span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>在浏览器访问地址：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/工程路径/hello</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Servlet接口"><a href="#Servlet接口" class="headerlink" title="Servlet接口"></a>Servlet接口</h3><p>javax.servlet.Servlet接口用于定义所有servlet必须实现的方法。</p>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>void init(ServletConfig config)</td>
<td>由servlet容器调用，以向servlet指示servlet正在  被放入服务中</td>
</tr>
<tr>
<td>void service(ServletRequest req, ServletResponse res)</td>
<td>由servlet容器调用，以允许servlet响应请求</td>
</tr>
<tr>
<td>ServletConfig getServletConfig()</td>
<td>返回ServletConfig对象，该对象包含此servlet的初始化和启动参数</td>
</tr>
<tr>
<td>String getServletInfo()</td>
<td>返回有关servlet的信息，如作者、版本和版权</td>
</tr>
<tr>
<td>void destroy()</td>
<td>由servlet容器调用，以向servlet指示该servlet正  在退出服务</td>
</tr>
</tbody></table>
<h3 id="GenericServlet类"><a href="#GenericServlet类" class="headerlink" title="GenericServlet类"></a>GenericServlet类</h3><ul>
<li>javax.servlet.GenericServlet抽象类主要用于定义一个通用的、与协议无关的servlet，该类实现了Servlet接口。</li>
<li>若编写通用servlet，只需重写service抽象方法即可。</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>abstract void service(ServletRequest req, ServletResponse  res)</td>
<td>由servlet容器调用允许servlet响应  请求</td>
</tr>
</tbody></table>
<h3 id="HttpServlet类"><a href="#HttpServlet类" class="headerlink" title="HttpServlet类"></a>HttpServlet类</h3><ul>
<li>javax.servlet.http.HttpServlet类是个抽象类并继承了GenericServlet类。</li>
<li>用于创建适用于网站的HTTP Servlet，该类的子类必须至少重写一个方法。</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>void doGet(HttpServletRequest req, HttpServletResponse  resp)</td>
<td>处理客户端的GET请求</td>
</tr>
<tr>
<td>void doPost(HttpServletRequest req, HttpServletResponse  resp)</td>
<td>处理客户端的POST请求</td>
</tr>
<tr>
<td>void init()</td>
<td>进行初始化操作</td>
</tr>
<tr>
<td>void service(HttpServletRequest req, HttpServletResponse  resp)</td>
<td>根据请求决定调用doGet还是 doPost方法</td>
</tr>
<tr>
<td>void destroy()</td>
<td>删除实例时释放资源</td>
</tr>
</tbody></table>
<h3 id="Servlet生命周期"><a href="#Servlet生命周期" class="headerlink" title="Servlet生命周期"></a>Servlet生命周期</h3><p><a target="_blank" rel="noopener" href="https://imgtu.com/i/X43Paj"><img src="https://s1.ax1x.com/2022/06/14/X43Paj.png" alt="X43Paj.png"></a></p>
<p>构造方法只被调用一次，当第一次请求Servlet时调用构造方法来创建Servlet的实例。</p>
<p>init方法只被调用一次，当创建好Servlet实例后立即调用该方法实现Servlet的初始化。</p>
<p>service方法被多次调用，每当有请求时都会调用service方法来用于请求的响应。</p>
<p>destroy方法只被调用一次，当该Servlet实例所在的Web应用被卸载前调用该方法来释放当前占用的资源。</p>
<h3 id="POST和GET请求"><a href="#POST和GET请求" class="headerlink" title="POST和GET请求"></a>POST和GET请求</h3><p>发出GET请求的主要方式： </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">（1）在浏览器输入URL按回车 </span><br><span class="line">（2）点击&lt;a&gt;超链接 </span><br><span class="line">（3）点击submit按钮，提交 &lt;form method=“get”&gt;表单 </span><br><span class="line">GET请求特点： 会将请求数据添加到请求URL地址的后面，只能提交少量的数据、不安全</span><br></pre></td></tr></table></figure>

<p>发出POST请求的方法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> (1)点击submit按钮，提交 &lt;form method=“post”&gt;表单 </span><br><span class="line">POST请求的特点： 请求数据添加到HTTP协议体中，可提交大量数据、安全性好</span><br></pre></td></tr></table></figure>

<h3 id="ServletRequest接口"><a href="#ServletRequest接口" class="headerlink" title="ServletRequest接口"></a>ServletRequest接口</h3><ul>
<li>javax.servlet.ServletRequest接口主要用于向servlet提供客户端请求信息，可以从中获取到任何请求信息。</li>
<li>Servlet容器创建一个ServletRequest对象，并将其作为参数传递给Servlet的service方法。</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>String getParameter(String name)</td>
<td>以字符串形式返回请求参数的值，如果该参数不存在，则返回空值</td>
</tr>
<tr>
<td>String[] getParameterValues( String name)</td>
<td>返回一个字符串对象数组，其中包含给定请求参数所具有的所有值，如果该参数不存在，则返回空值</td>
</tr>
<tr>
<td>Enumeration getParameterNames()</td>
<td>返回包含此请求中包含的参数名称的字符串对象的枚举。如果请求没有参数，则方法返回空枚举</td>
</tr>
<tr>
<td>Map&lt;String, String[]&gt; getParameterMap()</td>
<td>返回请求参数的键值对，一个键可以对应多个值</td>
</tr>
<tr>
<td>String getRemoteAddr()</td>
<td>返回发送请求的客户端或最后一个代理的IP地址</td>
</tr>
<tr>
<td>int getRemotePort()</td>
<td>返回发送请求的客户端或最后一个代理的端口号</td>
</tr>
</tbody></table>
<h3 id="HttpServletRequest接口"><a href="#HttpServletRequest接口" class="headerlink" title="HttpServletRequest接口"></a>HttpServletRequest接口</h3><ul>
<li>javax.servlet.http.HttpServletRequest接口是ServletRequest接口的子接口，主要用于提供HTTP请求信息的功能。</li>
<li>不同于表单数据，在发送HTTP请求时，HTTP请求头直接由浏览器设置。</li>
<li>可直接通过HttpServletRequest对象提供的一系列get方法获取请求头数据。</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>String getRequestURI()</td>
<td>返回此请求的资源路径信息</td>
</tr>
<tr>
<td>StringBuffer getRequestURL()</td>
<td>返回此请求的完整路径信息</td>
</tr>
<tr>
<td>String getMethod()</td>
<td>返回发出此请求的HTTP方法的名称，例如GET、POST</td>
</tr>
<tr>
<td>String getQueryString()</td>
<td>返回路径后面请求中附带的参数</td>
</tr>
<tr>
<td>String getServletPath()</td>
<td>返回此请求中调用servlet的路径部分</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloServlet6</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        String user = request.getParameter(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;用户名是：&quot;</span> + user);</span><br><span class="line"></span><br><span class="line">        String[] values = request.getParameterValues(<span class="string">&quot;hobby&quot;</span>);</span><br><span class="line">        System.out.print(<span class="string">&quot;爱好：&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(String value:values)&#123;</span><br><span class="line">            System.out.print(value + <span class="string">&quot;, &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        Enumeration&lt;String&gt; names = request.getParameterNames();</span><br><span class="line">        System.out.print(<span class="string">&quot;参数名：&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span>(names.hasMoreElements())&#123;</span><br><span class="line">            System.out.print(names.nextElement() + <span class="string">&quot;, &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        Map&lt;String, String[]&gt; map = request.getParameterMap();</span><br><span class="line">        Set&lt;Map.Entry&lt;String, String[]&gt;&gt; set = map.entrySet();</span><br><span class="line">        <span class="keyword">for</span>(Map.Entry&lt;String, String[]&gt; me : set)&#123;</span><br><span class="line">            System.out.print(me.getKey() + <span class="string">&quot;对应的值是：&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span>(String i:me.getValue())&#123;</span><br><span class="line">                System.out.print(i+<span class="string">&quot;, &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;客户端IP地址&quot;</span> + request.getRemoteAddr());</span><br><span class="line">        System.out.println(<span class="string">&quot;客户端端口号&quot;</span> + request.getRemotePort());</span><br><span class="line">        System.out.println(<span class="string">&quot;资源路径&quot;</span> + request.getRequestURI());</span><br><span class="line">        System.out.println(<span class="string">&quot;资源完整路径&quot;</span> + request.getRequestURL());</span><br><span class="line">        System.out.println(<span class="string">&quot;请求方式&quot;</span> + request.getMethod());</span><br><span class="line">        System.out.println(<span class="string">&quot;请求附带参数&quot;</span> + request.getQueryString());</span><br><span class="line">        System.out.println(<span class="string">&quot;servlet的路径部分&quot;</span> + request.getServletPath());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><strong>解决请求乱码</strong></p>
<p>post请求乱码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接收之前设置编码方式： </span></span><br><span class="line">request.setCharacterEncoding(“utf-<span class="number">8</span>”) </span><br><span class="line"><span class="comment">//提示：必须在调用request.getParameter(“name”)之前设置</span></span><br></pre></td></tr></table></figure>

<p>get请求乱码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将接收到的中文乱码重新编码: </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 接收到get请求的中文字符串 </span></span><br><span class="line">String name = request.getParameter(<span class="string">&quot;name&quot;</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// 将中文字符重新编码，默认编码为ISO-8859-1 </span></span><br><span class="line">String userName = <span class="keyword">new</span> String(name.getBytes(“ISO-<span class="number">8859</span>-<span class="number">1</span>”),“utf-<span class="number">8</span><span class="string">&quot;);</span></span><br></pre></td></tr></table></figure>

<h3 id="ServletResponse接口"><a href="#ServletResponse接口" class="headerlink" title="ServletResponse接口"></a>ServletResponse接口</h3><ul>
<li>javax.servlet.ServletResponse接口用于定义一个对象来帮助Servlet向客户端发送响应。</li>
<li>Servlet容器创建ServletResponse对象，并将其作为参数传递给servlet的service方法。</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>PrintWriter getWriter()</td>
<td>返回可向客户端发送字符文本的PrintWriter对象</td>
</tr>
<tr>
<td>String  getCharacterEncoding()</td>
<td>获取响应内容的编码方式</td>
</tr>
<tr>
<td>void  setContentType(String type)</td>
<td>如果尚未提交响应，则设置发送到客户端响应的内容类型。内容类型可以包括字符编码规范，例如text/html;charset=UTF-8</td>
</tr>
</tbody></table>
<h3 id="HttpServletResponse接口"><a href="#HttpServletResponse接口" class="headerlink" title="HttpServletResponse接口"></a>HttpServletResponse接口</h3><ul>
<li>javax.servlet.http.HttpServletResponse接口继承ServletResponse接口，以便在发送响应时提供特定于HTTP的功能。</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>void  sendRedirect(String location)</td>
<td>使用指定的重定向位置URL向客户端发送临时重定向响应</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//设置编码方式</span></span><br><span class="line">    response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">	<span class="comment">//查看编码方式</span></span><br><span class="line">    System.out.println(<span class="string">&quot;编码方式：&quot;</span> + response.getCharacterEncoding());</span><br><span class="line">	</span><br><span class="line">    <span class="comment">//获取输出流</span></span><br><span class="line">    PrintWriter out = response.getWriter();</span><br><span class="line">    <span class="comment">//利用输出流输出信息</span></span><br><span class="line">    out.println(<span class="string">&quot;&lt;h1&gt;你好呀&lt;h1&gt;&quot;</span>);</span><br><span class="line">    out.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ServletConfig接口"><a href="#ServletConfig接口" class="headerlink" title="ServletConfig接口"></a>ServletConfig接口</h3><p>javax.servlet.ServletConfifig接口用于描述Servlet本身的相关配置信息，在初始化期间用于将信息传递给Servlet配置对象。</p>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>String getServletName()</td>
<td>返回Servlet的别名</td>
</tr>
<tr>
<td>String  getInitParameter(String  name)</td>
<td>返回包含初始化参数值的字符串，如果该参数不存在，则返回null</td>
</tr>
<tr>
<td>Enumeration  getInitParameterNames()</td>
<td>将servlet的初始化参数的名称作为字符串对象的枚举返回，如果 servlet没有初始化参数，则返回空枚举</td>
</tr>
<tr>
<td>ServletContext getServletContext()</td>
<td>返回对调用方正在其中执行的ServletContext的引用</td>
</tr>
</tbody></table>
<p>注意每个Servlet有自己的ServletConfig</p>
<p>配置方式</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 在web.xml中配置ServletConfig初始化参数 --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>actionservlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.lagou.demo01.ActionServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!-- 配置 Serlvet 的初始化参数 --&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 参数名 --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>name<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 参数值 --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>zhangSan<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    </span><br><span class="line">    ServletConfig servletConfig = getServletConfig();</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;别名&quot;</span> + servletConfig.getServletName());</span><br><span class="line"></span><br><span class="line">    String name = servletConfig.getInitParameter(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;name：&quot;</span> + name);</span><br><span class="line"></span><br><span class="line">    Enumeration&lt;String&gt; names = servletConfig.getInitParameterNames();</span><br><span class="line">    <span class="keyword">while</span>(names.hasMoreElements())&#123;</span><br><span class="line">        System.out.print(names.nextElement() + <span class="string">&quot;, &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ServletContext servletContext = servletConfig.getServletContext();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ServletContext接口"><a href="#ServletContext接口" class="headerlink" title="ServletContext接口"></a>ServletContext接口</h3><ul>
<li>javax.servlet.ServletContext接口主要用于定义一组方法，Servlet使用这些方法与它的Servlet容器通信。</li>
<li>服务器容器在启动时会为每个项目创建唯一的一个ServletContext对象，用于实现多个Servlet之间的信息共享和通信。</li>
<li>在Servlet中通过this.getServletContext()方法可以获得ServletContext对象。</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>String  getInitParameter(String  name)</td>
<td>返回包含初始化参数值的字符串，如果该参数不存在，则返回  null</td>
</tr>
<tr>
<td>Enumeration  getInitParameterNames()</td>
<td>将servlet的初始化参数的名称作为字符串对象的枚举返回，如果servlet没有初始化参数，则返回空枚举</td>
</tr>
<tr>
<td>String getRealPath(String path)</td>
<td>返回包含给定虚拟路径的实际路径的字符串</td>
</tr>
<tr>
<td>String getContextPath()</td>
<td>返回与此上下文关联的主路径</td>
</tr>
<tr>
<td>InputStream  getResourceAsStream(String path)</td>
<td>将位于指定路径的资源作为InputStream对象返回</td>
</tr>
<tr>
<td>void setAttribute(String name, Object object)</td>
<td>将指定的属性名和属性值绑定到当前对象</td>
</tr>
<tr>
<td>Object getAttribute(String name)</td>
<td>根据执行的属性名获取属性值</td>
</tr>
<tr>
<td>void removeAttribute(String name)</td>
<td>删除指定的属性名信息</td>
</tr>
</tbody></table>
<p>注意，所有Servlet共享一个ServletContext</p>
<p>配置方式</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--在web.xml中配置ServletContext初始化参数 --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>name<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>liShi<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>age<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>21<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    </span><br><span class="line">    ServletContext servletContext = getServletContext();</span><br><span class="line"></span><br><span class="line">    String name = servletContext.getInitParameter(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;name:&quot;</span> + name);</span><br><span class="line"></span><br><span class="line">    Enumeration&lt;String&gt; names = servletContext.getInitParameterNames();</span><br><span class="line">    <span class="keyword">while</span>(names.hasMoreElements())&#123;</span><br><span class="line">        System.out.print(names.nextElement() + <span class="string">&quot;, &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println();</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;实际部署的路径&quot;</span> + servletContext.getRealPath(<span class="string">&quot;/&quot;</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;工程的路径&quot;</span> + servletContext.getContextPath());</span><br><span class="line"></span><br><span class="line">    servletContext.setAttribute(<span class="string">&quot;name&quot;</span> , <span class="string">&quot;王五&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;属性name的值为&quot;</span> + servletContext.getAttribute(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">    servletContext.removeAttribute(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Servlet-核心技术（下）"><a href="#Servlet-核心技术（下）" class="headerlink" title="Servlet 核心技术（下）"></a>Servlet 核心技术（下）</h1><h2 id="Servlet-JDBC应用"><a href="#Servlet-JDBC应用" class="headerlink" title="Servlet+JDBC应用"></a>Servlet+JDBC应用</h2><ul>
<li>在Servlet中可以使用JDBC技术访问数据库，常见功能如下：<br>查询DB数据，然后生成显示页面，例如：列表显示功能。<br>接收请求参数，然后对DB操作，例如：注册、登录、修改密码等功能。</li>
<li>为了方便重用和便于维护等目的，经常会采用DAO（Data Access Object）模式对数据库操作进行独立封装。<br><a target="_blank" rel="noopener" href="https://imgtu.com/i/jmYtC4"><img src="https://s1.ax1x.com/2022/06/29/jmYtC4.png" alt="jmYtC4.png"></a></li>
<li>DAO工厂(工厂模式)<br>工厂类：封装了对象的创建细节，为调用者提供符合要求的对象。</li>
</ul>
<p><strong>注册案例</strong></p>
<p>register.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>注册页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;register&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>用户:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;userName&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>密码:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;登入&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>model.User模型类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String userName, String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userName = userName;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//提供共有的get和set方法。。。。</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>until.JDBCUntil工具类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCUntil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DRIVERNAME = <span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String URL = <span class="string">&quot;jdbc:mysql://localhost:3306/de?characterEncoding=UTF-8&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String USER = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String PWD = <span class="string">&quot;root&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(DRIVERNAME);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取连接的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        Connection connection = DriverManager.getConnection(URL, USER, PWD);</span><br><span class="line">        <span class="keyword">return</span> connection;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//关闭资源的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Connection con, PreparedStatement ps)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ps.close();</span><br><span class="line">            con.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>dao.UserDao类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">register</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement ps = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUntil.getConnection();</span><br><span class="line">            String sql = <span class="string">&quot;insert into user (userName, password) value (?,?)&quot;</span>;</span><br><span class="line">            ps = connection.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">1</span>, user.getUserName());</span><br><span class="line">            ps.setString(<span class="number">2</span>,user.getPassword());</span><br><span class="line">            <span class="keyword">int</span> i = ps.executeUpdate();</span><br><span class="line">            <span class="keyword">return</span> i;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCUntil.close(connection, ps);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>test.UserDaoTest测试类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">        UserDao userDao = <span class="keyword">new</span> UserDao();</span><br><span class="line">        <span class="keyword">int</span> i = userDao.register(<span class="keyword">new</span> User(<span class="string">&quot;admin&quot;</span>, <span class="string">&quot;12555&quot;</span>));</span><br><span class="line">        <span class="keyword">if</span>(i==<span class="number">1</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;注册成功！&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;注册失败！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>servlet.RegisterServlet类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegisterServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        String userName = request.getParameter(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">        String password = request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;用户名：&quot;</span> + userName + <span class="string">&quot;, 密码：&quot;</span> + password);</span><br><span class="line"></span><br><span class="line">        User user = <span class="keyword">new</span> User(userName, password);</span><br><span class="line">        UserDao userDao = <span class="keyword">new</span> UserDao();</span><br><span class="line">        <span class="keyword">int</span> i = userDao.register(user);</span><br><span class="line"></span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        PrintWriter writer = response.getWriter();</span><br><span class="line">        <span class="keyword">if</span>(i==<span class="number">1</span>)&#123;</span><br><span class="line">            writer.print(<span class="string">&quot;&lt;h1&gt;注册成功！&quot;</span> + userName + <span class="string">&quot;&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            writer.print(<span class="string">&quot;&lt;h1&gt;注册失败&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        writer.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>web.xml配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>RegisterServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.de.servlet.RegisterServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>RegisterServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/register<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>导入数据库jar包省略。。。</p>
<h2 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h2><p>首先客户浏览器发送http请求，当web服务器接受后发送302状态码响应及对应新的location给客户浏览器，客户浏览器发现是302响应，则自动再发送一个新的http请求，请求url是新的location地址，服务器根据此请求寻找资源并发送给客户。</p>
<ul>
<li>实现重定向需要借助javax.servlet.http.HttpServletResponse接口中的以下方法：</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>void sendRedirect(String location)</td>
<td>使用指定的重定向位置URL向客户端发送临时重定向响应</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.sendRedirect(<span class="string">&quot;https://www.baidu.com&quot;</span>);</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/jmNYc9"><img src="https://s1.ax1x.com/2022/06/29/jmNYc9.png" alt="jmNYc9.png"></a></p>
<p><strong>特点</strong></p>
<p>重定向之后，浏览器地址栏的URL会发生改变。<br>重定向过程中会将前面Request对象销毁，然后创建一个新的Request对象。<br>重定向的URL可以是其它项目工程。</p>
<h2 id="转发"><a href="#转发" class="headerlink" title="转发"></a>转发</h2><p>一个Web组件（Servlet/JSP）将未完成的处理通过容器转交给另外一个Web组件继续处理，转发的各个组件会共享Request和Response对象。</p>
<ul>
<li>request中获取转发器对象</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>RequestDispatcher   getRequestDispatcher(String  path)</td>
<td>返回一个RequestDispatcher对象，该对象充当位于给定路径上的资源的包装器</td>
</tr>
</tbody></table>
<ul>
<li>转发器对象转发操作</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th></th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>void forward(ServletRequest request,  ServletResponse response)</td>
<td></td>
<td>将请求从一个servlet转发到服务器上的另一个资源（Servlet、JSP文件或HTML文件）</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RequestDispatcher zhuanServlet = request.getRequestDispatcher(<span class="string">&quot;zhuanServlet&quot;</span>);</span><br><span class="line">zhuanServlet.forward(request, response);</span><br></pre></td></tr></table></figure>

<p><strong>特点</strong></p>
<p>转发之后浏览器地址栏的URL不会发生改变。<br>转发过程中共享Request对象。<br>转发的URL不可以是其它项目工程。</p>
<p>重定向和转发区别</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/jmNx4U"><img src="https://s1.ax1x.com/2022/06/29/jmNx4U.png" alt="jmNx4U.png"></a></p>
<h2 id="Serblet线程安全"><a href="#Serblet线程安全" class="headerlink" title="Serblet线程安全"></a>Serblet线程安全</h2><ul>
<li>服务器在收到请求之后，会启动一个线程来进行相应的请求处理。</li>
<li>默认情况下，服务器为每个Servlet只创建一个对象实例。当多个请求访问同一个Servlet时，会有多个线程访问同一个Servlet对象，此时就可能发生线程安全问题。</li>
<li>多线程并发逻辑，需要使用synchronized对代码加锁处理，但尽量避免使用。</li>
</ul>
<p>html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">width</span>=<span class="string">&quot;600px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100px&quot;</span> <span class="attr">src</span>=<span class="string">&quot;threadServlet?name=&#x27;zhangfei&#x27;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span>		<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">width</span>=<span class="string">&quot;600px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100px&quot;</span> <span class="attr">src</span>=<span class="string">&quot;threadServlet?name=&#x27;liubei&#x27;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">width</span>=<span class="string">&quot;600px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100px&quot;</span> <span class="attr">src</span>=<span class="string">&quot;threadServlet?name=&#x27;guanyu&#x27;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>servlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreadServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">            name = request.getParameter(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">            System.out.println(name);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">            PrintWriter writer = response.getWriter();</span><br><span class="line">            writer.print(name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="状态管理"><a href="#状态管理" class="headerlink" title="状态管理"></a>状态管理</h2><ul>
<li>Web程序基于HTTP协议通信，而HTTP协议是”无状态”的协议，一旦服务器响应完客户的请求之后，就断开连接，而同一个客户的下一次请求又会重新建立网络连接。</li>
<li>服务器程序有时是需要判断是否为同一个客户发出的请求，比如客户的多次选购商品。因此，有必要跟踪同一个客户发出的一系列请求。</li>
<li>把浏览器与服务器之间多次交互作为一个整体，将多次交互所涉及的数据保存下来，即状态管理。</li>
<li>多次交互的数据状态可以在客户端保存，也可以在服务器端保存。状态管理主要分为以下两类：<br>客户端管理：将状态保存在客户端。基于Cookie技术实现。<br>服务器管理：将状态保存在服务器端。基于Session技术实现。</li>
</ul>
<h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><ul>
<li>Cookie本意为”饼干“的含义，在这里表示客户端以“名-值”形式进行保存的一种技术。</li>
<li>浏览器向服务器发送请求时，服务器将数据以Set-Cookie消息头的方式响应给浏览器，然后<strong>浏览器</strong>会将这些数据以文本文件的方式<strong>保存</strong>起来。</li>
<li>当浏览器再次访问服务器时，会将这些数据以Cookie消息头的方式发送给服务器。</li>
</ul>
<p><strong>相关方法</strong></p>
<ul>
<li>使用javax.servlet.http.Cookie类的构造方法实现Cookie的创建。</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>Cookie(String name, String value)</td>
<td>根据参数指定数值构造对象</td>
</tr>
</tbody></table>
<ul>
<li>使用javax.servlet.http.HttpServletResponse接口的成员方法实现Cookie的添加，响应。</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>void addCookie(Cookie cookie)</td>
<td>添加参数指定的对象到响应</td>
</tr>
</tbody></table>
<ul>
<li>使用javax.servlet.http.HttpServletRequest接口的成员方法实现Cookie对象的获取。</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>Cookie[] getCookies()</td>
<td>返回此请求中包含的所有Cookie对象</td>
</tr>
</tbody></table>
<ul>
<li>使用javax.servlet.http.Cookie类的构造方法实现Cookie对象中属性的获取和修改。</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>String getName()</td>
<td>返回此Cookie对象中的名字</td>
</tr>
<tr>
<td>String getValue()</td>
<td>返回此Cookie对象的数值</td>
</tr>
<tr>
<td>void setValue(String newValue)</td>
<td>设置Cookie的数值</td>
</tr>
</tbody></table>
<ul>
<li>Cookie生命周期，通过Cookie类的成员方法实现。</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>int getMaxAge()</td>
<td>返回cookie的最长使用期限（以秒为单位）</td>
</tr>
<tr>
<td>void setMaxAge(int expiry)</td>
<td>设置cookie的最长保留时间（秒），负数表示关闭浏览器失效，0表示立马失效，正数表示多少秒后失效</td>
</tr>
</tbody></table>
<ul>
<li>Cookie的路径问题  <ul>
<li>浏览器在访问服务器时，会比较Cookie的路径与请求路径是否匹配，只有匹配的Cookie才会发送给服务器。</li>
<li>Cookie的默认路径等于添加这个Cookie信息时的组件路径，例如：/项目名/目录/add.do请求添加了一个Cookie信息，则该Cookie的路径是 /项目名/目录。</li>
<li>访问的请求地址必须符合Cookie的路径或者其子路径时，浏览器才会发送Cookie信息。</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>void setPath(String uri)</td>
<td>设置cookie的路径信息</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建并发送cookie给浏览器</span></span><br><span class="line"></span><br><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;zhangfei&quot;</span>);</span><br><span class="line"><span class="comment">//cookie.setMaxAge(-1);</span></span><br><span class="line"><span class="comment">//cookie.setPath(request.getContextPath() + &quot;/hello&quot;);</span></span><br><span class="line">response.addCookie(cookie);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接收浏览器的cookie</span></span><br><span class="line"></span><br><span class="line">Cookie[] cookies = request.getCookies();</span><br><span class="line"><span class="keyword">for</span>(Cookie cookie : cookies)&#123;</span><br><span class="line">    System.out.println( cookie.getName() );</span><br><span class="line">    System.out.println( cookie.getValue() );</span><br><span class="line">    cookie.setValue(<span class="string">&quot;liubei&quot;</span>);</span><br><span class="line">    System.out.println( cookie.getMaxAge() );</span><br><span class="line">    System.out.println( cookie.getPath() );</span><br><span class="line">    response.addCookie(cookie);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>Cookie特点</strong></p>
<p>Cookie技术不适合存储所有数据，程序员只用于存储少量、非敏感信息，原因如下：</p>
<p>将状态数据保存在浏览器端，不安全。<br>保存数据量有限制，大约4KB左右。<br>只能保存字符串信息。<br>可以通过浏览器设置为禁止使用。</p>
<h2 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h2><ul>
<li>Session本意为”会话”的含义，是用来维护一个客户端和服务器关联的一种技术。</li>
<li>浏览器访问服务器时，服务器会为每一个浏览器都在服务器端的内存中分配一个空间，用于创建一个Session对象，该对象有一个id属性且该值唯一，我们称为SessionId，并且服务器会将这个SessionId以Cookie方式发送给浏览器存储。</li>
<li>浏览器再次访问服务器时会将SessionId发送给服务器，服务器可以依据SessionId查找相对应的Session对象</li>
</ul>
<p><strong>相关方法</strong></p>
<ul>
<li>使用javax.servlet.http.HttpServletRequest接口的成员方法实现Session的获取。</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>HttpSession getSession()</td>
<td>返回此请求关联的当前Session，若此请求没有则创建一个</td>
</tr>
</tbody></table>
<ul>
<li>使用javax.servlet.http.HttpSession接口的成员方法实现判断和获取。</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>boolean isNew()</td>
<td>判断是否为新创建的Session</td>
</tr>
<tr>
<td>String getId()</td>
<td>获取Session的编号</td>
</tr>
</tbody></table>
<ul>
<li>使用javax.servlet.http.HttpSession接口的成员方法实现属性的管理。</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>Object getAttribute(String name)</td>
<td>返回在此会话中用指定名称绑定的对象，如果没有对象在该名称下绑定，则返回空值</td>
</tr>
<tr>
<td>void setAttribute(String name,  Object value)</td>
<td>使用指定的名称将对象绑定到此会话</td>
</tr>
<tr>
<td>void removeAttribute(String name)</td>
<td>从此会话中删除与指定名称绑定的对象</td>
</tr>
</tbody></table>
<ul>
<li>Session的生命周期<ul>
<li>为了节省服务器内存空间资源，服务器会将空闲时间过长的Session对象自动清除掉，服务器默认的超时限制一般是30分钟。</li>
<li>使用javax.servlet.http.HttpSession接口的成员方法实现失效实现的获取和设置。</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>int getMaxInactiveInterval()</td>
<td>获取失效时间  （秒）</td>
</tr>
<tr>
<td>void setMaxInactiveInterval(int interval)</td>
<td>设置失效时间  （秒）</td>
</tr>
</tbody></table>
<ul>
<li>可以配置web.xml文件修改失效时间。（分）</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>30<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HttpSession session = request.getSession();</span><br><span class="line">System.out.println( session.isNew() ? <span class="string">&quot;新创建的&quot;</span> : <span class="string">&quot;不是新创建的&quot;</span>);</span><br><span class="line">System.out.println( <span class="string">&quot;session的id：&quot;</span> + session.getId() );</span><br><span class="line">session.setAttribute(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;liubei&quot;</span>);</span><br><span class="line">session.setMaxInactiveInterval(<span class="number">60</span> * <span class="number">60</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HttpSession session = request.getSession();</span><br><span class="line">System.out.println( session.getAttribute(<span class="string">&quot;name&quot;</span>) );  <span class="comment">//liubei</span></span><br><span class="line">System.out.println( session.getMaxInactiveInterval() ); <span class="comment">//3600</span></span><br></pre></td></tr></table></figure>



<p><strong>Session特点</strong></p>
<p>数据比较安全。<br>能够保存的数据类型丰富，而Cookie只能保存字符串。<br>能够保存更多的数据，而Cookie大约保存4KB。<br>数据保存在服务器端会占用服务器的内存空间，如果存储信息过多、用户量过大，会严重影响服务器的性能。</p>
<h1 id="JSP"><a href="#JSP" class="headerlink" title="JSP"></a>JSP</h1><ul>
<li>JSP是Java Server Pages的简称，跟Servlet一样可以动态生成HTML响应， JSP文件命名为xxx.jsp。 </li>
<li>与Servlet不同，JSP文件以HTML标记为主，然后内嵌Java代码段，用于处理动态内容。</li>
</ul>
<p>jsp和servlet关系：</p>
<p>客户端–&gt;jsp页面–&gt;转译，编译成Serblet–&gt;响应</p>
<h2 id="jsp语法解构"><a href="#jsp语法解构" class="headerlink" title="jsp语法解构"></a>jsp语法解构</h2><p>声明区</p>
<p>程序代码区</p>
<p>表达式</p>
<p>注释</p>
<p>指令和动作</p>
<p>内置对象</p>
<h2 id="声明区"><a href="#声明区" class="headerlink" title="声明区"></a>声明区</h2><p>基本语法：<code>&lt;%!  %&gt;</code></p>
<p>说明：可以定义全局变量、方法、类。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;%! </span><br><span class="line">    <span class="keyword">int</span> i; </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">()</span></span>&#123;… …&#125; </span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>

<h2 id="程序代码区"><a href="#程序代码区" class="headerlink" title="程序代码区"></a>程序代码区</h2><p>基本语法：<code>&lt;%    %&gt;</code></p>
<p>说明：可以定义局部变量以及放入任何的Java程序代码。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;% </span><br><span class="line">    <span class="keyword">int</span> j; </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;<span class="number">10</span>; k++) &#123; … … &#125; </span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>

<h2 id="表达式"><a href="#表达式" class="headerlink" title="表达式"></a>表达式</h2><p>基本语法：<code>&lt;%=  %&gt;</code></p>
<p>说明：可以输出一个变量或一个具体内容，但=后面必须是字符串变量或者可以被转换成字符串的表达式。</p>
<p>注意：不需要以;结束，只有一行</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%= “hello world” %&gt; </span><br><span class="line">&lt;%= i+<span class="number">1</span> %&gt;</span><br></pre></td></tr></table></figure>



<p>案例：使用for循环输出一个html语言的表格，： </p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;table&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;id&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;name&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;age&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;salary&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">    &lt;% <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">5</span>; i++)&#123; %&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;&lt;%=i%&gt;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;&lt;%=i%&gt;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;&lt;%=i%&gt;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;&lt;%=i%&gt;&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">&lt;/table&gt;</span><br></pre></td></tr></table></figure>

<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">格式： </span><br><span class="line">&lt;!--… …--&gt; HTML文件的注释，浏览器可以查看到 </span><br><span class="line">&lt;%--… …--%&gt; JSP文件的注释，浏览器看不到 </span><br><span class="line">&lt;% //… … %&gt; Java语言中的单行注释，浏览器看不到 </span><br><span class="line">&lt;% /*… …*/ %&gt; Java语言中的多行注释，浏览器看不到 </span><br><span class="line"></span><br><span class="line">注释的内容不会被执行</span><br></pre></td></tr></table></figure>

<h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><ul>
<li>指令格式：<code>&lt;%@ 指令 属性=&quot;属性值&quot; %&gt;</code></li>
<li>指令的属性可以设定多个。</li>
<li>JSP常用指令有：page、taglib、include。 </li>
</ul>
<p><strong>page指令</strong></p>
<p>page指令用于导包和设置一些页面属性，常用属性如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import        导入相应的包，惟一允许在同一文档中多次出现的属性 </span><br><span class="line">contentType   设置Content-Type响应报头，标明即将发送到浏览器的文档类型 </span><br><span class="line">pageEncoding  设置页面的编码 </span><br><span class="line">language      指定页面使用的语言 </span><br><span class="line">session       控制页面是否参与HTTP会话 </span><br><span class="line">errorPage     处理当前页面中抛出但未被捕获的任何异常 </span><br><span class="line">isErrorPage   当前页是否可以作为其他页面的错误处理页面</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.List&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>



<p><strong>taglib指令</strong></p>
<p>taglib指令用来扩展JSP程序的标签元素，引入其他功能的标签库文件。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- uri属性用于指定库的标识 --&gt; </span><br><span class="line">&lt;!-- prefix属性用于指定库前缀 --&gt; </span><br><span class="line"></span><br><span class="line">&lt;%@ taglib uri=“tagLibary” prefix=“prefix” %&gt;</span><br></pre></td></tr></table></figure>



<p><strong>include指令</strong></p>
<p>include指令用于引入另一个JSP程序或HTML文件等</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ include file=<span class="string">&quot;被包含的文件地址&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<p>JSP引擎会在JSP文件的转换时期先把file属性设定的文件包含进来，然后开始执行转换及编译的工作。</p>
<h2 id="动作"><a href="#动作" class="headerlink" title="动作"></a>动作</h2><p><strong>jsp:include / jsp:param</strong></p>
<p>jsp:include动作用于引入另一个JSP程序或HTML文件等。<br>执行到include时，被include的文件才会被编译。<br>如果include的是jsp文件，那它不会被转换成Servlet文件。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:include page=“URLSpec” flush=“<span class="keyword">true</span>”/&gt; </span><br><span class="line"></span><br><span class="line">&lt;jsp:include page=“URLSpec” flush=“<span class="keyword">true</span>”&gt; </span><br><span class="line">    &lt;jsp:param name=“key” value=“value”/&gt; </span><br><span class="line">&lt;/jsp:include&gt;</span><br></pre></td></tr></table></figure>

<p>include指令和include动作的区别：</p>
<p>1，include指令是在JSP程序的转换时期就将fifile属性所指定的程序内容嵌入再编译执行（静态包含）。</p>
<p>2，include动作在转换时期是不会被编译的，只有在客户端请求时期被执行到才会被动态的编译载入（动态包含，推荐）。</p>
<p><strong>jsp:forward / jsp:param</strong></p>
<p>forward动作用于在JSP中实现转发，将请求转发到另一个指定的JSP程序或者Servlet中处理。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:forward page=“urlSpec” flush=“<span class="keyword">true</span>”/&gt; </span><br><span class="line"></span><br><span class="line">&lt;jsp:forward page=“urlSpec”&gt; </span><br><span class="line">    &lt;!-- 用于指定参数和其对应的值 --&gt; </span><br><span class="line">    &lt;jsp:param name=“key” value=“value”/&gt; </span><br><span class="line">&lt;/jsp:forward&gt;</span><br></pre></td></tr></table></figure>

<h2 id="JSP内置对象"><a href="#JSP内置对象" class="headerlink" title="JSP内置对象"></a>JSP内置对象</h2><ul>
<li>在JSP程序中有9个内置对象由容器为用户进行实例化，程序员可以不用定义就直接使用这些变量。</li>
<li>在JSP转换成Servlet后，会自动追加这些变量的定义，使用内置对象可以简化JSP的开发。</li>
</ul>
<table>
<thead>
<tr>
<th>对象变量</th>
<th>对象类型</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>out</td>
<td>JSPWriter</td>
<td>输出流</td>
</tr>
<tr>
<td>request</td>
<td>HttpServletRequest</td>
<td>请求信息</td>
</tr>
<tr>
<td>response</td>
<td>HttpServletResponse</td>
<td>响应信息</td>
</tr>
<tr>
<td>session</td>
<td>HttpSession</td>
<td>会话</td>
</tr>
<tr>
<td>application</td>
<td>ServletContext</td>
<td>全局的上下文对象</td>
</tr>
<tr>
<td>pageContext</td>
<td>PageContext</td>
<td>JSP页面上下文</td>
</tr>
<tr>
<td>page</td>
<td>Object</td>
<td>JSP页面本身</td>
</tr>
<tr>
<td>config</td>
<td>ServletConfig</td>
<td>Servlet配置对象</td>
</tr>
<tr>
<td>exception</td>
<td>Throwable</td>
<td>捕获网页异常</td>
</tr>
</tbody></table>
<h3 id="out内置对象"><a href="#out内置对象" class="headerlink" title="out内置对象"></a>out内置对象</h3><p>out内置对象是一个缓冲的输出流，用来给客户端输出信息。</p>
<p>常用方法：</p>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>void println(String x)</td>
<td>向客户端输出各种类型数据</td>
</tr>
<tr>
<td>void newLine()</td>
<td>输出一个换行符</td>
</tr>
<tr>
<td>void close()</td>
<td>关闭输出流</td>
</tr>
<tr>
<td>int getBufferSize()</td>
<td>返回缓冲区的大小</td>
</tr>
<tr>
<td>int getRemaining()</td>
<td>返回缓冲区中未使用的字节数</td>
</tr>
<tr>
<td>void flush()</td>
<td>输出缓冲区里的数据</td>
</tr>
<tr>
<td>void clearBuffer()</td>
<td>清除缓冲区里的数据，同时把数据输出到客户端</td>
</tr>
<tr>
<td>void clear()</td>
<td>清除缓冲区里的数据，但不把数据输出到客户端</td>
</tr>
</tbody></table>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    String s = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    out.println(<span class="string">&quot;&lt;h1&gt;&quot;</span>+s+<span class="string">&quot;&lt;h1&gt;&quot;</span>);</span><br><span class="line">    out.newLine();</span><br><span class="line">    out.println( <span class="string">&quot;缓存大小：&quot;</span> + out.getBufferSize() );</span><br><span class="line">    out.println( <span class="string">&quot;未使用的缓存大小：&quot;</span> + out.getRemaining() );</span><br><span class="line">    out.println( <span class="string">&quot;已使用的缓存大小&quot;</span> + (out.getBufferSize() - out.getRemaining()) );</span><br><span class="line">    <span class="comment">//out.flush();</span></span><br><span class="line">    <span class="comment">//out.clear();</span></span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>

<h3 id="request内置对象"><a href="#request内置对象" class="headerlink" title="request内置对象"></a>request内置对象</h3><ul>
<li>request对象封装的是调用JSP页面的请求信息，它是HttpServletRequest接口的一个实例。</li>
<li>该对象的属性值只在一个请求中保存。</li>
</ul>
<p>常用方法：</p>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>String getMethod()</td>
<td>返回客户端向服务器端传送数据的方式</td>
</tr>
<tr>
<td>String getParameter(String name)</td>
<td>返回客户端向服务器端传送的参数值</td>
</tr>
<tr>
<td>String[] getParameterValues( String name)</td>
<td>获得指定参数的所有值</td>
</tr>
<tr>
<td>String getRequestURI()</td>
<td>获得请求地址</td>
</tr>
<tr>
<td>String getRemoteAddr()</td>
<td>返回发送请求的客户端或最后一个代理的IP地址</td>
</tr>
<tr>
<td>int getRemotePort()</td>
<td>返回发送请求的客户端或最后一个代理的端口号</td>
</tr>
<tr>
<td>String getServerName()</td>
<td>获取服务器的名字</td>
</tr>
<tr>
<td>int getServerPort()</td>
<td>获取服务器端的端口</td>
</tr>
<tr>
<td>void setAttribute(String name,Object o)</td>
<td>在此请求中存储属性。属性在请求之间重置</td>
</tr>
<tr>
<td>Object getAttribute(String name)</td>
<td>将指定属性的值作为对象返回，若不存在则返回空值</td>
</tr>
</tbody></table>
<h3 id="response内置对象"><a href="#response内置对象" class="headerlink" title="response内置对象"></a>response内置对象</h3><ul>
<li>response对象用于给客户端相应输出处理结果，它是HttpServletResponse接口的一个实例。</li>
<li>经常用于设置HTTP标题，添加cookie、设置响应内容的类型和状态、发送HTTP重定向和编码URL。</li>
</ul>
<p>常用方法：</p>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>void addCookie(Cookie cookie)</td>
<td>添加一个Cookie对象，用于在客户端保存特定的信息</td>
</tr>
<tr>
<td>void addHeader(String name, String value)</td>
<td>添加HTTP头信息，该Header信息将发送到客户端</td>
</tr>
<tr>
<td>boolean containsHeader(String name)</td>
<td>判断指定名字的HTTP文件头是否存在</td>
</tr>
<tr>
<td>void sendRedirect(String location)</td>
<td>重定向JSP文件</td>
</tr>
<tr>
<td>void setContentType(String type)</td>
<td>设置类型与编码方式</td>
</tr>
</tbody></table>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    response.addHeader(<span class="string">&quot;refresh&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">    Date date = <span class="keyword">new</span> Date();</span><br><span class="line">    SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd  HH:mm:ss&quot;</span>);</span><br><span class="line">    out.println(<span class="string">&quot;&lt;h1&gt;&quot;</span> + sdf.format(date) + <span class="string">&quot;&lt;h1&gt;&quot;</span>);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>

<h3 id="session内置对象"><a href="#session内置对象" class="headerlink" title="session内置对象"></a>session内置对象</h3><ul>
<li>session对象表示浏览器和服务器之间的一次会话，一次会话可以包含多次请求，在多次请求之间可以借助session对象存储信息，它是HttpSession类型的一个实例。</li>
<li>该对象的属性值在一次会话范围中保存，保存在服务器端，只要不关闭浏览器，默认半个小时内都可以访问。</li>
</ul>
<p>常用方法:</p>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>void setAttribute(String name, Object value)</td>
<td>使用指定的名称将对象绑定到此会话</td>
</tr>
<tr>
<td>Object getAttribute(String name)</td>
<td>返回在此会话中用指定名称绑定的对象，如果没有对象在该名称下绑定则返回空值</td>
</tr>
</tbody></table>
<h3 id="application内置对象"><a href="#application内置对象" class="headerlink" title="application内置对象"></a>application内置对象</h3><ul>
<li>application对象是一个web程序的全局变量，它是ServletContext类型的一个实例。</li>
<li>在整个服务器上保存数据，所有用户共享。</li>
</ul>
<p>常用方法:</p>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>void setAttribute(String name, Object object)</td>
<td>将对象绑定到此servlet上下文中的给定属性名</td>
</tr>
<tr>
<td>Object getAttribute(String name)</td>
<td>返回给定名称的servlet容器属性，若没有该名称的属性返回null</td>
</tr>
</tbody></table>
<h3 id="pageContext内置对象"><a href="#pageContext内置对象" class="headerlink" title="pageContext内置对象"></a>pageContext内置对象</h3><ul>
<li>pageContext对象是PageContext类型的对象，可以使用这个对象来管理其他的隐含对象。</li>
<li>只在一个页面中保存数据。</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>void setAttribute(String name, Object value, int scope)</td>
<td>使用适当的作用域设置指定的名称和值</td>
</tr>
<tr>
<td>Object getAttribute(String name, int scope)</td>
<td>返回指定作用域中名称关联的对象，若找不到则返回null</td>
</tr>
<tr>
<td>ServletRequest getRequest()</td>
<td>获取请求对象</td>
</tr>
<tr>
<td>ServletResponse getResponse()</td>
<td>获取响应对象</td>
</tr>
<tr>
<td>HttpSession getSession()</td>
<td>获取会话对象</td>
</tr>
<tr>
<td>ServletConfig getServletConfig()</td>
<td>获取配置对象</td>
</tr>
<tr>
<td>JspWriter getOut()</td>
<td>获取输出对象</td>
</tr>
<tr>
<td>Object getPage()</td>
<td>获取页面对象</td>
</tr>
<tr>
<td>Exception getException()</td>
<td>获取异常对象</td>
</tr>
</tbody></table>
<h3 id="exception内置对象"><a href="#exception内置对象" class="headerlink" title="exception内置对象"></a>exception内置对象</h3><ul>
<li>exception 对象是Throwable的实例，表示的是JSP的异常信息。</li>
<li>如果要使用它，必须将对应页面page指令的isErrorPage属性设置成true，表示异常处理页面。</li>
</ul>
<p>error.jsp</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page isErrorPage=<span class="string">&quot;true&quot;</span> %&gt;  &lt;%-- 可以为其他页面处理异常的页面 --%&gt;</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;处理其他页面异常的页面&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">        <span class="keyword">if</span>(exception != <span class="keyword">null</span>)&#123;</span><br><span class="line">            out.println(<span class="string">&quot;错误内容为：&quot;</span> + exception.getMessage() );</span><br><span class="line">        &#125;</span><br><span class="line">    %&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>某个页面的异常需要交给异常处理页面处理，需要指定：</p>
<p>1，单个页面的处理方式：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page errorPage=<span class="string">&quot;error.jsp&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<p>2，在web.xml中配置统一的异常处理页面：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">exception-type</span>&gt;</span>java.lang.Throwable<span class="tag">&lt;/<span class="name">exception-type</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/error.jsp<span class="tag">&lt;/<span class="name">location</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="JavaBean组件"><a href="#JavaBean组件" class="headerlink" title="JavaBean组件"></a>JavaBean组件</h2><ul>
<li>JavaBean 是使用 Java 语言开发的一个可重用的组件，在 JSP 开发中可以使用 JavaBean 减少重复代码，使整个 JSP 代码的开发更加简洁。</li>
<li>JavaBean本质上就是Java类，通常要求如下：<br>1，属性：全部私有化，通过get和set方法进行访问。<br>2，方法：必须是public关键字修饰。<br>3，构造器 ：必须有无参构造方法。</li>
</ul>
<p><strong>常规方式操作对象</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setName(<span class="string">&quot;zhang&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">18</span>);</span><br><span class="line">    out.println(user.getName());</span><br><span class="line">    out.println(user.getAge());</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>



<p><strong>使用组件操作对象</strong></p>
<ul>
<li>使用jsp:useBean的方式创建javaBean实例</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=“对象名” scope=“保存范围 <span class="class"><span class="keyword">class</span></span>=“包名.类名” /&gt; </span><br><span class="line"></span><br><span class="line">保存范围有：page|request|sessin|application，默认为page范围。</span><br></pre></td></tr></table></figure>

<ul>
<li>使用jsp:setProperty的方式设置javaBean的属性值</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:setProperty name=<span class="string">&quot;对象名&quot;</span> property=<span class="string">&quot;属性名&quot;</span> value=<span class="string">&quot;属性值&quot;</span> param=<span class="string">&quot;参数名&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用jsp:getProperty的方式获取javaBean的属性值</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:getProperty name=<span class="string">&quot;对象名&quot;</span> property=<span class="string">&quot;属性名&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>删除某范围内的javaBean实例</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;% 内置对象.removeAttribute(“JavaBean的对象名”); %&gt;</span><br></pre></td></tr></table></figure>



<p>例如在test1.jsp文件中创建user1：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=<span class="string">&quot;user1&quot;</span> scope=<span class="string">&quot;session&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;com.de.User&quot;</span>/&gt;</span><br><span class="line">&lt;jsp:setProperty name=<span class="string">&quot;user1&quot;</span> property=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;zhang&quot;</span>/&gt;</span><br><span class="line">&lt;jsp:setProperty name=<span class="string">&quot;user1&quot;</span> property=<span class="string">&quot;age&quot;</span> value=<span class="string">&quot;12&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>

<p>在test2.jsp文件中可以访问得到：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=<span class="string">&quot;user1&quot;</span> scope=<span class="string">&quot;session&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;com.de.User&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">user的姓名：&lt;jsp:getProperty name=<span class="string">&quot;user1&quot;</span> property=<span class="string">&quot;name&quot;</span>/&gt;</span><br><span class="line">&lt;br&gt;&lt;br&gt;</span><br><span class="line">user的年龄：&lt;jsp:getProperty name=<span class="string">&quot;user1&quot;</span> property=<span class="string">&quot;age&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">	session.removeAttribute(<span class="string">&quot;user1&quot;</span>);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>

<h1 id="MVC设计模式"><a href="#MVC设计模式" class="headerlink" title="MVC设计模式"></a>MVC设计模式</h1><ul>
<li>MVC是模型(Model)和视图(View)以及控制器(Controller)的简写，是一种将数据、界面显示和业务逻辑进行分离的组织方式，这样在改进界面及用户交互时，不需要重新编写业务逻辑，从而提高了代码的可维护性。</li>
<li>M：主要用于封装业务数据的JavaBean(Bean) 和 业务逻辑的JavaBean(Service)及访问数据库的DAO对象。</li>
<li>V：主要负责数据收集 和 数据展现，通常由JSP文件完成。</li>
<li>C：主要负责流程控制 和 页面跳转，通常由Servlet完成。</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/jnlTYj"><img src="https://s1.ax1x.com/2022/06/29/jnlTYj.png" alt="jnlTYj.png"></a></p>
<p><strong>登入案例</strong></p>
<p>login.jsp登入页面</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;用户登入&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;loginServlet&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        &lt;p&gt;用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;userName&quot;</span>&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;密&amp;nbsp;&amp;nbsp;&amp;nbsp;码：&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span>&gt;&lt;/p&gt;</span><br><span class="line">        &lt;span style=<span class="string">&quot;color:red&quot;</span>&gt;&lt;%=</span><br><span class="line">        request.getAttribute(<span class="string">&quot;error&quot;</span>)==<span class="keyword">null</span>?<span class="string">&quot;&quot;</span>:request.getAttribute(<span class="string">&quot;error&quot;</span>)</span><br><span class="line">        %&gt;&lt;/span&gt;</span><br><span class="line">        &lt;p&gt;&lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;登入&quot;</span>&gt;&lt;/p&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>bean.User或model.User模型类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String userName, String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userName = userName;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//公有的get和set方法.....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>until.JDBCUntil工具类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCUntil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DRIVERNAME = <span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String URL = <span class="string">&quot;jdbc:mysql://localhost:3306/de?characterEncoding=UTF-8&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String USER = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String PWD = <span class="string">&quot;root&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(DRIVERNAME);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> DriverManager.getConnection(URL, USER, PWD);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Connection con, PreparedStatement ps)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        ps.close();</span><br><span class="line">        con.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>dao.UserDao</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">loginDao</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line">        Connection con = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement ps = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            con = JDBCUntil.getConnection();</span><br><span class="line">            String sql = <span class="string">&quot;select * from user where userName=? and password=?&quot;</span>;</span><br><span class="line">            ps = con.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">1</span>, user.getUserName());</span><br><span class="line">            ps.setString(<span class="number">2</span>, user.getPassword());</span><br><span class="line">            ResultSet resultSet = ps.executeQuery();</span><br><span class="line">            <span class="keyword">while</span>(resultSet.next())&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> User(resultSet.getString(<span class="string">&quot;userName&quot;</span>) , resultSet.getString(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                JDBCUntil.close(con, ps);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>test.UserDaoTest测试类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loginDaoTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">        UserDao userDao = <span class="keyword">new</span> UserDao();</span><br><span class="line">        User user = userDao.loginDao(<span class="keyword">new</span> User(<span class="string">&quot;admin&quot;</span>, <span class="string">&quot;123456&quot;</span>));</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>factory.UserDaoFactory工厂类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> UserDao <span class="title">getUserDao</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> UserDao();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>service.UserService，降低servlet和dao的耦合度</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UserService</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userDao = UserDaoFactory.getUserDao();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">loginService</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.loginDao(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>LoginServlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        String userName = request.getParameter(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">        String password = request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        System.out.println(userName + <span class="string">&quot;,  &quot;</span> + password);</span><br><span class="line"></span><br><span class="line">        UserService userService = <span class="keyword">new</span> UserService();</span><br><span class="line">        User user = userService.loginService( <span class="keyword">new</span> User(userName, password) );</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(user != <span class="keyword">null</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;登入成功！&quot;</span>);</span><br><span class="line">            request.getSession().setAttribute(<span class="string">&quot;user&quot;</span>, user);</span><br><span class="line">            response.sendRedirect(<span class="string">&quot;home.jsp&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;用户或密码错误！&quot;</span>);</span><br><span class="line">            request.setAttribute(<span class="string">&quot;error&quot;</span>, <span class="string">&quot;用户名或密码错误！&quot;</span>);</span><br><span class="line">            RequestDispatcher requestDispatcher = request.getRequestDispatcher(<span class="string">&quot;login.jsp&quot;</span>);</span><br><span class="line">            requestDispatcher.forward(request, response);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>web.xml配置servlet</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>LoginServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.de.servlet.LoginServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>LoginServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/loginServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意：导入相关jar包。创建相关数据库。</p>
<h1 id="EL"><a href="#EL" class="headerlink" title="EL"></a>EL</h1><p>EL（Expression Language）表达式提供了在JSP中简化表达式的方法，可以方便地访问各种数据并输出。</p>
<p>即 &lt;%= 表达式 %&gt; 的写法，简化成${  }</p>
<p><strong>功能</strong></p>
<p>依次访问pageContext、request、session和application作用域对象存储的数据。<br>获取请求参数值。<br>访问Bean对象的属性。<br>访问集合中的数据。<br>输出简单的运算结果。</p>
<h2 id="访问内置对象"><a href="#访问内置对象" class="headerlink" title="访问内置对象"></a>访问内置对象</h2><ul>
<li>&lt;%= request.getAttribute(“ varName”) %&gt;</li>
<li>用EL实现: ${ varName }</li>
</ul>
<p>执行流程：依次访问pageContext、request、session和application作用域对象存储的数据。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--  原始方式  --%&gt;</span><br><span class="line">&lt;%= request.getAttribute(<span class="string">&quot;name&quot;</span>) %&gt;</span><br><span class="line">&lt;%= session.getAttribute(<span class="string">&quot;age&quot;</span>) %&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--   EL   --%&gt;</span><br><span class="line">$&#123; name &#125;</span><br><span class="line">$&#123; age &#125;</span><br></pre></td></tr></table></figure>

<h2 id="访问请求参数"><a href="#访问请求参数" class="headerlink" title="访问请求参数"></a>访问请求参数</h2><ul>
<li>在EL之前使用下列方式访问请求参数的数据<br>request.getParameter(name);<br>request.getParameterValues(name);</li>
<li>在EL中使用下列方式访问请求参数的数据<br>${ param.参数 }：接收的参数只有一个值。<br>${ paramValues.参数 }：接受的参数有多个值。</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--原始方式--%&gt;</span><br><span class="line">&lt;%= request.getParameter(<span class="string">&quot;name&quot;</span>) %&gt;</span><br><span class="line">&lt;%= Arrays.toString( request.getParameterValues(<span class="string">&quot;hobby&quot;</span>) ) %&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--EL--%&gt;</span><br><span class="line">$&#123; param.name &#125;</span><br><span class="line">$&#123; paramValues.hobby[<span class="number">0</span>] &#125;</span><br></pre></td></tr></table></figure>

<h2 id="访问Bean对象的属性"><a href="#访问Bean对象的属性" class="headerlink" title="访问Bean对象的属性"></a>访问Bean对象的属性</h2><p>方式一： $ { 对象名 . 属性名 }，例如：${ user.name }</p>
<p>方式二： $ { 对象名 [“属性名”] }，例如：${ user[“name”] }</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--原始方式--%&gt;</span><br><span class="line">&lt;%= ((Person)request.getAttribute(<span class="string">&quot;person&quot;</span>)).getName() %&gt;</span><br><span class="line">&lt;%= ((Person)request.getAttribute(<span class="string">&quot;person&quot;</span>)).getAge() %&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--EL--%&gt;</span><br><span class="line">$&#123; person.name &#125;</span><br><span class="line">$&#123; person[<span class="string">&quot;age&quot;</span>] &#125;</span><br></pre></td></tr></table></figure>

<p>两种方式区别：</p>
<ul>
<li>当要存取的属性名中包含一些特殊字符，如： . 或 ,等并非字母或数字的符号，就一定要使用 [ ]而不是.的方式</li>
<li>使用[]的方式可以动态取值，具体方式如下：</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">	request.setAttribute(<span class="string">&quot;var&quot;</span>, <span class="string">&quot;age&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">    $&#123; person[<span class="keyword">var</span>] &#125;   相当于     $&#123; person[<span class="string">&quot;age&quot;</span>] &#125;</span><br></pre></td></tr></table></figure>

<h2 id="访问集合中的数据"><a href="#访问集合中的数据" class="headerlink" title="访问集合中的数据"></a>访问集合中的数据</h2><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--  原始方式  --%&gt;</span><br><span class="line">&lt;%= ( (List)request.getAttribute(<span class="string">&quot;list&quot;</span>) ).get(<span class="number">0</span>) %&gt;</span><br><span class="line">&lt;%= ( (Map)request.getAttribute(<span class="string">&quot;map&quot;</span>) ).get(<span class="string">&quot;one&quot;</span>) %&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--  EL  --%&gt;</span><br><span class="line">$&#123; list[<span class="number">0</span>] &#125;</span><br><span class="line">$&#123; map[<span class="string">&quot;one&quot;</span>] &#125;</span><br></pre></td></tr></table></figure>

<h2 id="常用内置对象"><a href="#常用内置对象" class="headerlink" title="常用内置对象"></a>常用内置对象</h2><table>
<thead>
<tr>
<th>类别</th>
<th>标识符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>JSP</td>
<td>pageContext</td>
<td>PageContext  处理当前页面</td>
</tr>
<tr>
<td>作用域</td>
<td>pageScope</td>
<td>同页面作用域属性名称和值有关的Map类</td>
</tr>
<tr>
<td></td>
<td>requestScope</td>
<td>同请求作用域属性的名称和值有关的Map类</td>
</tr>
<tr>
<td></td>
<td>sessionScope</td>
<td>同会话作用域属性的名称和值有关的Map类</td>
</tr>
<tr>
<td></td>
<td>applicationScope</td>
<td>同应用程序作用域属性的名称和值有关的Map类</td>
</tr>
<tr>
<td>请求参数</td>
<td>param</td>
<td>根据名称存储请求参数的值的Map类</td>
</tr>
<tr>
<td></td>
<td>paramValues</td>
<td>把请求参数的所有值作为一个String数组来存储的Map类</td>
</tr>
<tr>
<td>请求头</td>
<td>header</td>
<td>根据名称存储请求头主要值的Map类</td>
</tr>
<tr>
<td></td>
<td>headerValues</td>
<td>把请求头的所有值作为一个String数组来存储的Map类</td>
</tr>
<tr>
<td>Cookie</td>
<td>cookie</td>
<td>根据名称存储请求附带的cookie的Map类</td>
</tr>
<tr>
<td>初始化参数</td>
<td>initParam</td>
<td>根据名称存储Web应用程序上下文初始化参数的Map类</td>
</tr>
</tbody></table>
<h2 id="常用运算符"><a href="#常用运算符" class="headerlink" title="常用运算符"></a>常用运算符</h2><p><strong>算术运算符</strong></p>
<table>
<thead>
<tr>
<th>算术运算符</th>
<th>说 明</th>
<th>范 例</th>
<th>运算结果</th>
</tr>
</thead>
<tbody><tr>
<td>+</td>
<td>加</td>
<td>${1+2}</td>
<td>3</td>
</tr>
<tr>
<td>－</td>
<td>减</td>
<td>${2-1}</td>
<td>1</td>
</tr>
<tr>
<td>*</td>
<td>乘</td>
<td>${2*3}</td>
<td>6</td>
</tr>
<tr>
<td>/ 或  div</td>
<td>除</td>
<td>${16/5}或${16div5}</td>
<td>3.2</td>
</tr>
<tr>
<td>% 或  mod</td>
<td>取余</td>
<td>${16%5}或${16mod5}</td>
<td>1</td>
</tr>
</tbody></table>
<p><strong>关系运算符</strong></p>
<table>
<thead>
<tr>
<th>关系运算符</th>
<th>说 明</th>
<th>范 例</th>
<th>运算结果</th>
</tr>
</thead>
<tbody><tr>
<td>==或eq</td>
<td>等于</td>
<td>${1==2}或${1 eq 2}</td>
<td>false</td>
</tr>
<tr>
<td>!= 或ne</td>
<td>不等于</td>
<td>${2!=1}或${1 ne 2}</td>
<td>true</td>
</tr>
<tr>
<td>&lt; 或lt</td>
<td>小于</td>
<td>${2&lt;3}或${2 lt 3 }</td>
<td>true</td>
</tr>
<tr>
<td>&gt; 或  gt</td>
<td>大于</td>
<td>${16&gt;5}或${16 gt 5}</td>
<td>true</td>
</tr>
<tr>
<td>&lt;= 或  le</td>
<td>小于等于</td>
<td>${16&lt;=5}或${16 le 5}</td>
<td>false</td>
</tr>
<tr>
<td>&gt;= 或  ge</td>
<td>大于等于</td>
<td>${16&gt;=5}或${16 ge 5}</td>
<td>true</td>
</tr>
</tbody></table>
<p><strong>逻辑运算符</strong></p>
<table>
<thead>
<tr>
<th>逻辑运算符</th>
<th>说 明</th>
<th>范 例</th>
<th>运算结果</th>
</tr>
</thead>
<tbody><tr>
<td>&amp;&amp; 或  and</td>
<td>与运算</td>
<td>${true&amp;&amp;true}或${true and true}</td>
<td>true</td>
</tr>
<tr>
<td>|| 或or</td>
<td>或运算</td>
<td>${true||false}或${true or false}</td>
<td>true</td>
</tr>
<tr>
<td>! 或not</td>
<td>非运算</td>
<td>${!true}或${not true }</td>
<td>false</td>
</tr>
</tbody></table>
<p><strong>条件运算符</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123; 条件表达式 ? 语句<span class="number">1</span> : 语句<span class="number">2</span> &#125;</span><br></pre></td></tr></table></figure>

<p><strong>验证运算符</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$&#123;empty 表达式&#125; </span><br><span class="line">返回布尔值判断表达式是否为<span class="string">&quot;空&quot;</span>值，<span class="keyword">null</span>值、无元素的集合或数组、长度为零的String被认为是空值。</span><br></pre></td></tr></table></figure>

<h1 id="JSTL"><a href="#JSTL" class="headerlink" title="JSTL"></a>JSTL</h1><ul>
<li>JSTL( JSP Standard Tag Library ) 被称为JSP标准标签库。</li>
<li>开发人员可以利用这些标签取代JSP页面上的Java代码，从而提高程序的可读性，降低程序的维护难度。</li>
</ul>
<h2 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h2><ul>
<li><p>下载JSTL的jar包并添加到项目中，下载地址为：<a target="_blank" rel="noopener" href="https://tomcat.apache.org/download-taglibs.cgi">https://tomcat.apache.org/download-taglibs.cgi</a><br><a target="_blank" rel="noopener" href="https://imgtu.com/i/jNSU0O"><img src="https://s1.ax1x.com/2022/07/05/jNSU0O.png" alt="jNSU0O.png"></a></p>
</li>
<li><p>在JSP页面中使用taglib指令引入jstl标签库，方式为：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- prefix属性用于指定库前缀 --&gt; </span><br><span class="line">&lt;!-- uri属性用于指定库的标识 --&gt; </span><br><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="常用核心标签"><a href="#常用核心标签" class="headerlink" title="常用核心标签"></a>常用核心标签</h2><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<p><strong>输出标签</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:out&gt;&lt;/c:out&gt; 用来将指定内容输出的标签</span><br></pre></td></tr></table></figure>

<p><strong>设置标签</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:set&gt;&lt;/c:set&gt; 用来设置属性范围值的标签</span><br></pre></td></tr></table></figure>

<p><strong>删除标签</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:remove&gt;&lt;/c:remove&gt; 用来删除指定数据的标签</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--  设置session中，name值为zhangfei  --%&gt;</span><br><span class="line">    &lt;c:set <span class="keyword">var</span>=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;zhangfei&quot;</span> scope=<span class="string">&quot;session&quot;</span>&gt;&lt;/c:set&gt;</span><br><span class="line">    &lt;c:out value=<span class="string">&quot;$&#123;name&#125;&quot;</span>&gt;&lt;/c:out&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--  设置对象的属性值 --%&gt;&lt;hr/&gt;&lt;hr/&gt;</span><br><span class="line">    &lt;jsp:useBean id=<span class="string">&quot;person&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;Bean.Person&quot;</span> scope=<span class="string">&quot;session&quot;</span>&gt;&lt;/jsp:useBean&gt;</span><br><span class="line">    &lt;c:set property=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;liubei&quot;</span> target=<span class="string">&quot;$&#123;person&#125;&quot;</span>&gt;&lt;/c:set&gt;</span><br><span class="line">    &lt;c:out value=<span class="string">&quot;$&#123;person.name&#125;&quot;</span>&gt;&lt;/c:out&gt;</span><br><span class="line"></span><br><span class="line">&lt;%-- 删除 --%&gt;</span><br><span class="line">    &lt;c:remove <span class="keyword">var</span>=<span class="string">&quot;person&quot;</span> scope=<span class="string">&quot;session&quot;</span>&gt;&lt;/c:remove&gt;</span><br></pre></td></tr></table></figure>

<p><strong>单条件判断标签</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:<span class="keyword">if</span> test =“EL条件表达式”&gt; </span><br><span class="line">    满足条件执行 </span><br><span class="line">&lt;/c:<span class="keyword">if</span> &gt;</span><br></pre></td></tr></table></figure>

<p><strong>多条件判断标签</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:choose &gt; </span><br><span class="line">    &lt;c:when test =“EL表达式”&gt; </span><br><span class="line">        满足条件执行 </span><br><span class="line">    &lt;/c:when&gt; </span><br><span class="line">    …</span><br><span class="line">    &lt;c:otherwise&gt; </span><br><span class="line">        不满足上述when条件时执行 </span><br><span class="line">    &lt;/c:otherwise&gt; </span><br><span class="line">&lt;/c:choose &gt;</span><br></pre></td></tr></table></figure>

<p><strong>循环标签</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:forEach <span class="keyword">var</span>=“循环变量” items=“集合”&gt; </span><br><span class="line">    … </span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>

<h2 id="常用函数标签"><a href="#常用函数标签" class="headerlink" title="常用函数标签"></a>常用函数标签</h2><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;fn&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/functions&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;% pageContext.setAttribute(<span class="string">&quot;str&quot;</span>, <span class="string">&quot;Hello Word!&quot;</span>); %&gt;</span><br><span class="line">$&#123;fn:contains(str, <span class="string">&quot;ord&quot;</span>)&#125;</span><br><span class="line">&lt;br/&gt;</span><br><span class="line">$&#123;fn:toUpperCase(str)&#125;</span><br></pre></td></tr></table></figure>

<h2 id="常用格式化标签"><a href="#常用格式化标签" class="headerlink" title="常用格式化标签"></a>常用格式化标签</h2><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;fmt&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/fmt&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    Date date = <span class="keyword">new</span> Date();</span><br><span class="line">    pageContext.setAttribute(<span class="string">&quot;date&quot;</span>, date);</span><br><span class="line">%&gt;</span><br><span class="line">系统时间：$&#123;date&#125;</span><br><span class="line">&lt;br/&gt;&lt;br/&gt;</span><br><span class="line">格式化后的系统时间：</span><br><span class="line">&lt;fmt:formatDate value=<span class="string">&quot;$&#123;date&#125;&quot;</span> pattern=<span class="string">&quot;yyyy-MM-dd  HH-mm-ss&quot;</span>&gt;&lt;/fmt:formatDate&gt;</span><br></pre></td></tr></table></figure>

<h2 id="自定义标签"><a href="#自定义标签" class="headerlink" title="自定义标签"></a>自定义标签</h2><ul>
<li>如果上面几个标签不能满足需求，程序员也可以自定义标签，步骤如下：</li>
<li>编写标签类继承SimpleTagSupport类重写doTag()方法或继承TagSupport类重写doStartTag()方法。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloTag</span> <span class="keyword">extends</span> <span class="title">SimpleTagSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doTag</span><span class="params">()</span> <span class="keyword">throws</span> JspException, IOException </span>&#123;</span><br><span class="line">        JspWriter out = <span class="keyword">this</span>.getJspContext().getOut();</span><br><span class="line">        out.println(<span class="string">&quot;自定义标签哦！&quot;</span>);</span><br><span class="line">        out.print( getName() );</span><br><span class="line">        out.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>定义标签库文件（tld标签库文件）并配置标签说明文件到到WEB-INF下：<br><a target="_blank" rel="noopener" href="https://imgtu.com/i/jNEE9S"><img src="https://s1.ax1x.com/2022/07/05/jNEE9S.png" alt="jNEE9S.png"></a></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tlib-version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">tlib-version</span>&gt;</span>	<span class="comment">&lt;!-- 版本号 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">short-name</span>&gt;</span>my<span class="tag">&lt;/<span class="name">short-name</span>&gt;</span>   <span class="comment">&lt;!-- 前缀 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uri</span>&gt;</span>http://de.com<span class="tag">&lt;/<span class="name">uri</span>&gt;</span>			<span class="comment">&lt;!-- uri --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Invoke &#x27;Generate&#x27; action to add tags or functions --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tag</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>helloTag<span class="tag">&lt;/<span class="name">name</span>&gt;</span>     <span class="comment">&lt;!-- 标签名 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tag-class</span>&gt;</span>tag.HelloTag<span class="tag">&lt;/<span class="name">tag-class</span>&gt;</span>  <span class="comment">&lt;!-- 真实类 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body-content</span>&gt;</span>empty<span class="tag">&lt;/<span class="name">body-content</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attribute</span>&gt;</span>    <span class="comment">&lt;!-- 定义属性，必填 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">required</span>&gt;</span>true<span class="tag">&lt;/<span class="name">required</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tag</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>使用自定义标签</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;my&quot;</span> uri=<span class="string">&quot;http://de.com&quot;</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;my:helloTag name=<span class="string">&quot;zhangsan&quot;</span>&gt;&lt;/my:helloTag&gt;</span><br></pre></td></tr></table></figure>

<h1 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h1><ul>
<li>Filter本意为”过滤“的含义，是JavaWeb的三大组件之一，三大组件为：Servlet、Filter、Listener。</li>
<li>过滤器是向 Web 应用程序的请求和响应处理添加功能的 Web 服务组件。</li>
<li>过滤器相当于浏览器与Web资源之间的一道过滤网，在访问资源之前通过一系列的过滤器对请求进行修改、判断以及拦截等，也可以对响应进行修改、判断以及拦截等。</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/jNE6jH"><img src="https://s1.ax1x.com/2022/07/05/jNE6jH.png" alt="jNE6jH.png"></a></p>
<h2 id="使用方式-1"><a href="#使用方式-1" class="headerlink" title="使用方式"></a>使用方式</h2><ul>
<li><p>自定义类实现Filter接口并重写doFilter方法。</p>
</li>
<li><p>在web.xml文件中配置过滤器。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>LoginFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.lagou.LoginFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>LoginFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>案例：</p>
<p>要求：访问主页home.jsp时，使用过滤器：判断是否登入，若登入可以访问，没登入转发到登入页面<br>思路：登入成功，session中会保存User对象，否则不保存。过滤器中判断session中有无User对象，有则放行，无则转发到登入页面</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        <span class="comment">//获取session</span></span><br><span class="line">        HttpServletRequest httpServletRequest = (HttpServletRequest) servletRequest;</span><br><span class="line">        HttpSession session = httpServletRequest.getSession();</span><br><span class="line">        <span class="comment">//获取session中的user</span></span><br><span class="line">        User user = (User)session.getAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">		<span class="comment">//判断是否有user对象</span></span><br><span class="line">        <span class="keyword">if</span>(user == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">//无则转发登入页面</span></span><br><span class="line">            RequestDispatcher requestDispatcher = servletRequest.getRequestDispatcher(<span class="string">&quot;login.jsp&quot;</span>);</span><br><span class="line">            requestDispatcher.forward(servletRequest, servletResponse);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//有则放行</span></span><br><span class="line">            filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在web.xml中配置过滤器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>LoginFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.de.filter.LoginFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>LoginFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/home.jsp<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Filter接口"><a href="#Filter接口" class="headerlink" title="Filter接口"></a>Filter接口</h2><p>javax.servlet.Filter接口主要用于描述过滤器对象，可以对资源的请求和资源的响应操作进行筛选操作。</p>
<p>常用方法：</p>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>void init(FilterConfig filterConfig)</td>
<td>实现过滤器的初始化操作</td>
</tr>
<tr>
<td>void doFilter(ServletRequest request, ServletResponse  response, FilterChain chain)</td>
<td>执行过滤操作的功能</td>
</tr>
<tr>
<td>void destroy()</td>
<td>实现过滤器的销毁操作</td>
</tr>
</tbody></table>
<p>启动服务器时，init()执行一次，<br>关闭服务器时，destroy()执行一次，<br>访问n次过滤器配置的页面时，doFilter()执行n次。</p>
<h2 id="FilterConfig接口"><a href="#FilterConfig接口" class="headerlink" title="FilterConfig接口"></a>FilterConfig接口</h2><p>javax.servlet.FilterConfifig接口主要用于描述过滤器的配置信息。</p>
<p>常用方法：</p>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>String getFilterName()</td>
<td>获取过滤器的名字</td>
</tr>
<tr>
<td>String getInitParameter(String name)</td>
<td>获取指定的初始化参数信息</td>
</tr>
<tr>
<td>Enumeration getInitParameterNames()</td>
<td>获取所有的初始化操作名称</td>
</tr>
<tr>
<td>ServletContext getServletContext()</td>
<td>获取ServletContext对象</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">    System.out.println( filterConfig.getFilterName() );</span><br><span class="line">    System.out.println( filterConfig.getInitParameter(<span class="string">&quot;name&quot;</span>) );</span><br><span class="line"></span><br><span class="line">    Enumeration&lt;String&gt; initParameterNames = filterConfig.getInitParameterNames();</span><br><span class="line">    <span class="keyword">while</span> (initParameterNames.hasMoreElements())&#123;</span><br><span class="line">        System.out.println( initParameterNames.nextElement() );</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println( filterConfig.getServletContext() );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="多个过滤器的使用"><a href="#多个过滤器的使用" class="headerlink" title="多个过滤器的使用"></a>多个过滤器的使用</h2><p>如果有多个过滤器都满足过滤的条件，则容器依据配置文件中<strong>映射的先后顺序</strong>来调用各个过滤器。</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/jNZOhV"><img src="https://s1.ax1x.com/2022/07/05/jNZOhV.png" alt="jNZOhV.png"></a></p>
<h2 id="过滤器优点"><a href="#过滤器优点" class="headerlink" title="过滤器优点"></a>过滤器优点</h2><ul>
<li>实现代码的“可插拔性”，即增加或减少某个功能模块，不会影响程序的正常执行。</li>
<li>可以将多个相同处理逻辑的模块集中写在过滤器里面，可实现重复利用、也方便代码的维护。</li>
</ul>
<h1 id="Listener"><a href="#Listener" class="headerlink" title="Listener"></a>Listener</h1><ul>
<li>Servlet规范中定义的一种特殊的组件，用来监听Servlet容器产生的事件并进行相应的处理。</li>
<li>容器产生的事件分类如下：<br>生命周期相关的事件。<br>属性状态相关的事件。<br>存值状态相关的事件。</li>
<li>底层原理是采用接口回调的方式实现。</li>
</ul>
<p><strong>基本分类：</strong></p>
<table>
<thead>
<tr>
<th>监听器类型</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>javax.servlet.ServletRequestListener</td>
<td>监听request作用域的创建和销毁</td>
</tr>
<tr>
<td>javax.servlet.ServletRequestAttributeListener</td>
<td>监听request作用域的属性状态变化</td>
</tr>
<tr>
<td>javax.servlet.http.HttpSessionListener</td>
<td>监听session作用域的创建和销毁</td>
</tr>
<tr>
<td>javax.servlet.http.HttpSessionAttributeListener</td>
<td>监听session作用域的属性状态变化</td>
</tr>
<tr>
<td>javax.servlet.ServletContextListener</td>
<td>监听application作用域的创建和销毁</td>
</tr>
<tr>
<td>javax.servlet.ServletContextAttributeListener</td>
<td>监听application作用域的属性状态变化</td>
</tr>
<tr>
<td>javax.servlet.http.HttpSessionBindingListener</td>
<td>监听对象与session的绑定和解除</td>
</tr>
<tr>
<td>javax.servlet.http.HttpSessionActivationListener</td>
<td>监听session数值的钝化和活化</td>
</tr>
</tbody></table>
<p>自定义类实现上面接口，在web.xml文件中配置监听器。</p>
<h2 id="监听器详解"><a href="#监听器详解" class="headerlink" title="监听器详解"></a>监听器详解</h2><p><strong>(1)ServletRequestListener监听器</strong></p>
<ul>
<li>在ServletRequest创建和关闭时都会通知ServletRequestListener监听器。</li>
<li>常用方法如下：</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>void requestInitialized(ServletRequestEvent sre)</td>
<td>实现ServletRequest对象的初始化</td>
</tr>
<tr>
<td>void requestDestroyed(ServletRequestEvent sre)</td>
<td>实现ServletRequest对象的销毁</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestLestener</span> <span class="keyword">implements</span> <span class="title">ServletRequestListener</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestDestroyed</span><span class="params">(ServletRequestEvent servletRequestEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;创建了一个request&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestInitialized</span><span class="params">(ServletRequestEvent servletRequestEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;销毁了一个request&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在web.xml文件中配置监听器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>listener.RequestLestener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>(2)ServletRequestAttributeListener监听器</strong></p>
<ul>
<li>向ServletRequest添加、删除或者替换一个属性的时候，将会通知ServletRequestAttributeListener监听器。</li>
<li>常用方法如下：</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>void attributeAdded(ServletRequestAttributeEvent srae)</td>
<td>增加属性时触发</td>
</tr>
<tr>
<td>void attributeReplaced(ServletRequestAttributeEvent srae)</td>
<td>修改属性时触发</td>
</tr>
<tr>
<td>void attributeRemoved(ServletRequestAttributeEvent srae)</td>
<td>删除属性时触发</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestAttributeListener</span> <span class="keyword">implements</span> <span class="title">ServletRequestAttributeListener</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeAdded</span><span class="params">(ServletRequestAttributeEvent servletRequestAttributeEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;添加了属性&quot;</span> + servletRequestAttributeEvent.getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeRemoved</span><span class="params">(ServletRequestAttributeEvent servletRequestAttributeEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;删除了属性&quot;</span> + servletRequestAttributeEvent.getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeReplaced</span><span class="params">(ServletRequestAttributeEvent servletRequestAttributeEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;修改了属性&quot;</span> + servletRequestAttributeEvent.getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>listener.RequestAttributeListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>(3)HttpSessionListener监听器</strong>     </p>
<ul>
<li>当一个HttpSession刚被创建或者失效（invalidate）的时候，将会通知HttpSessionListener监听器。</li>
<li>常用方法如下：</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>void  sessionCreated(HttpSessionEvent se)</td>
<td>当一个HttpSession对象被创建时会调用这个方法</td>
</tr>
<tr>
<td>void sessionDestroyed(HttpSessionEvent se)</td>
<td>当一个HttpSession超时或者调用HttpSession的 invalidate()方法让它销毁时，将会调用这个方法</td>
</tr>
</tbody></table>
<p><strong>(4)HttpSessionAttributeListener监听器</strong></p>
<ul>
<li>HttpSession中添加、删除或者替换一个属性的时候，将会通知HttpSessionAttributeListener监听器。</li>
<li>常用方法如下：</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>void attributeAdded(HttpSessionBindingEvent se)</td>
<td>当往会话中加入一个属性的时候会调用这个方法</td>
</tr>
<tr>
<td>void  attributeRemoved(HttpSessionBindingEvent se)</td>
<td>当从会话中删除一个属性的时候会调用这个方法</td>
</tr>
<tr>
<td>void  attributeReplaced(HttpSessionBindingEvent  se)</td>
<td>当改变会话中的属性的时候会调用这个方法</td>
</tr>
</tbody></table>
<p><strong>(5)ServletContextListener监听器</strong>     </p>
<ul>
<li>在ServletContext创建和关闭时都会通知ServletContextListener监听器。</li>
<li>常用方法如下：</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>void  contextInitialized(ServletContextEvent sce)</td>
<td>当ServletContext创建的时候，将会调用这个方法</td>
</tr>
<tr>
<td>void  contextDestroyed(ServletContextEvent sce)</td>
<td>当ServletContext销毁的时候（例如关闭应用服务器或者重新加载应用），将会调用这个方法</td>
</tr>
</tbody></table>
<p><strong>(6)ServletContextAttributeListener监听器</strong>     </p>
<ul>
<li>向ServletContext添加、删除或者替换一个属性的时候，将会通知ServletContextAttributesListener监听器</li>
<li>常用方法如下：</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>void attributeAdded(ServletContextAttributeEvent scae)</td>
<td>往ServletContext中加入一个属性的时  候触发</td>
</tr>
<tr>
<td>void  attributeRemoved(ServletContextAttributeEvent scae)</td>
<td>从ServletContext中删除一个属性的时  候触发</td>
</tr>
<tr>
<td>void attributeReplaced(ServletContextAttributeEvent scae)</td>
<td>改变ServletContext中属性的时候触发</td>
</tr>
</tbody></table>
<p><strong>(7)HttpSessionBindingListener监听器</strong>     </p>
<ul>
<li>HttpSession中绑定和解除绑定时，将会通知HttpSessionListener监听器。</li>
<li>常用方法如下：</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>void valueBound(HttpSessionBindingEvent event)</td>
<td>有对象绑定时调用该方法</td>
</tr>
<tr>
<td>void valueUnbound(HttpSessionBindingEvent event)</td>
<td>有对象解除绑定时调用该方法</td>
</tr>
</tbody></table>
<p>bean.Person类实现接口，当session绑定和解绑该类时，会被监听到，不需要配置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">HttpSessionBindingListener</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//有参、无参构造方法。。。</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//公有get()和set()方法。。。</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">valueBound</span><span class="params">(HttpSessionBindingEvent httpSessionBindingEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;session绑定了对象&quot;</span> + httpSessionBindingEvent.getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">valueUnbound</span><span class="params">(HttpSessionBindingEvent httpSessionBindingEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;session解绑了对象&quot;</span> + httpSessionBindingEvent.getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    Person person = <span class="keyword">new</span> Person();</span><br><span class="line">	<span class="comment">//session绑定person</span></span><br><span class="line">    session.setAttribute(<span class="string">&quot;person&quot;</span>, person);  </span><br><span class="line">	<span class="comment">//session解绑person</span></span><br><span class="line">    session.removeAttribute(<span class="string">&quot;person&quot;</span>);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>



<p><strong>(8)HttpSessionActivationListener监听器</strong>     </p>
<ul>
<li>当有session数值的钝化和活化操作时，将会通知HttpSessionActivationListener监听器。<br>钝化：内存中的session数据，保存到硬盘中<br>活化：硬盘中的数据，保存到内存session中</li>
<li>常用方法如下：</li>
</ul>
<table>
<thead>
<tr>
<th>方法声明</th>
<th>功能介绍</th>
</tr>
</thead>
<tbody><tr>
<td>void sessionWillPassivate(HttpSessionEvent se)</td>
<td>有钝化操作时调用该方法</td>
</tr>
<tr>
<td>void sessionDidActivate(HttpSessionEvent se)</td>
<td>有活化操作时调用该方法</td>
</tr>
</tbody></table>
<h2 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h2><p>要求：利用监听器，显示用户在线人数</p>
<p>思路：<br>一个用户，相当于一个浏览器，相当于一个session。<br>所以有session创建时，在线人数加一，有session销毁时，在线人数减一。需要监听session。<br>在线人数数据保存在servletContext中，需要监听servletContext。</p>
<p>监听器：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OnlineUser</span> <span class="keyword">implements</span> <span class="title">HttpSessionListener</span>, <span class="title">ServletContextListener</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ServletContext servletContext;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextInitialized</span><span class="params">(ServletContextEvent servletContextEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;servletContext创建了&quot;</span>);</span><br><span class="line">        servletContext = servletContextEvent.getServletContext();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextDestroyed</span><span class="params">(ServletContextEvent servletContextEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;servletContext销毁了&quot;</span>);</span><br><span class="line">        servletContext = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionCreated</span><span class="params">(HttpSessionEvent httpSessionEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;一个session创建了&quot;</span>);</span><br><span class="line">        Object count = servletContext.getAttribute(<span class="string">&quot;count&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(count == <span class="keyword">null</span>)&#123;</span><br><span class="line">            servletContext.setAttribute(<span class="string">&quot;count&quot;</span> , <span class="number">1</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            Integer integer = (Integer) count;</span><br><span class="line">            integer++;</span><br><span class="line">            servletContext.setAttribute(<span class="string">&quot;count&quot;</span>, integer);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;在线人数&quot;</span> + servletContext.getAttribute(<span class="string">&quot;count&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionDestroyed</span><span class="params">(HttpSessionEvent httpSessionEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println( <span class="string">&quot;一个session销毁了&quot;</span> );</span><br><span class="line">        Object count = servletContext.getAttribute(<span class="string">&quot;count&quot;</span>);</span><br><span class="line">        Integer integer = (Integer)count;</span><br><span class="line">        integer--;</span><br><span class="line">        servletContext.setAttribute(<span class="string">&quot;count&quot;</span>, integer);</span><br><span class="line">        System.out.println(<span class="string">&quot;在线人数&quot;</span> + integer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 监听器配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>listener.OnlineUser<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- session失效时间设置为1分钟 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>1<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>前端界面：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;在线人数$&#123;applicationScope.count&#125;&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>


    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>感谢老铁的支持！</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.jpg" alt="唧唧歪歪 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="/images/alipay.jpg" alt="唧唧歪歪 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/java/" rel="tag"><i class="fa fa-tag"></i> java</a>
              <a href="/tags/web/" rel="tag"><i class="fa fa-tag"></i> web</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/04/29/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0/" rel="prev" title="前端学习">
                  <i class="fa fa-chevron-left"></i> 前端学习
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/07/08/Linux/" rel="next" title="Linux">
                  Linux <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments" id="lv-container" data-id="city" data-uid="MTAyMC81MzYzOC8zMDExMQ=="></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">唧唧歪歪</span>
</div>
<div class="busuanzi-count">
</div>

<!--
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div> -->

    </div>
  </footer>

  
  <script size="300" alpha="0.6" zIndex="-1" src="https://cdn.jsdelivr.net/npm/ribbon.js@1.0.2/dist/ribbon.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  



  <script class="next-config" data-name="nprogress" type="application/json">{"enable":true,"spinner":true}</script>
  <script src="/js/third-party/nprogress.js"></script>

  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<script src="/js/third-party/comments/livere.js"></script>

</body>
</html>
